{"componentChunkName":"component---src-templates-journal-item-js","path":"/journal/test-out-javascript-async-await-easily","result":{"data":{"kontentItemGotcha":{"system":{"id":"824edc48-f3e4-5e30-ae0e-ee359a838dc0"},"elements":{"title":{"value":"Test out Javascript async await easily"},"post_date":{"value":"2020-08-29T00:00:00Z"},"summary":{"value":"<p>Have you been struggling with some NPM library providing <code>async</code> API? It is surprisingly easy to set up a playground capable of Javascript <code>async</code>, <code>await</code>. Let's get to it!</p>"},"image":{"value":[{"name":"2020-08-29_15-19-00.png","url":"https://assets-eu-01.kc-usercontent.com:443/6aec6c2a-3010-01c9-8295-4d988333f15d/5edcc9fc-bfcf-47a4-8a02-734dcb55a91d/2020-08-29_15-19-00.png","width":1697,"height":786,"description":"Async Await playground example"}]},"content":{"value":"<h2>Solution</h2>\n<p>It is quite a straight forward process with <strong>one key aspect</strong>. You want to initialize new NPM package and prepare script that is capable to run asynchronous API and wait for the result.<br>I suppose you already have <a href=\"https://nodejs.org/en/download/\" data-new-window=\"true\" target=\"_blank\" rel=\"noopener noreferrer\">Node.js</a> installed since you want to test out some javascript locally.</p>\n<p><strong>First</strong>, you need to <strong>create empty directory</strong> and <a href=\"https://docs.npmjs.com/cli/init\" data-new-window=\"true\" target=\"_blank\" rel=\"noopener noreferrer\"><strong>initialize the NPM package</strong></a> inside.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n6096de47_b427_01e5_44bb_ffa332dba3b9\"></object>\n<p>This will create <code>package.json</code> file with this content.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n4191d3f6_b85d_015e_160b_53c8e1a37e80\"></object>\n<p><strong>Second step </strong>is to create <code>index.js</code> file with <strong>self-invocation function</strong> plus <strong>mark this function as async! </strong>This will do the trick and you could use <code>await</code> wherever you want.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n01733e3c_6588_01a3_74e6_d2f68ff05f62\"></object>\n<p><strong>&nbsp;Last step</strong> is to add a NPM script that will run <code>index.js</code> file to test it out. Just define <code>start</code> script that will run <code>node index.js</code> command.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"d8a4ffef_c406_01cc_e21e_0ece7cda6d49\"></object>\n<p>And just run the <code>start</code> script via <a href=\"https://docs.npmjs.com/cli/npm\" data-new-window=\"true\" target=\"_blank\" rel=\"noopener noreferrer\"><code>npm CLI</code></a>.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"f517d495_ec7a_01ce_6b5f_d3a608c33870\"></object>\n<h2>Real example</h2>\n<p>My exact scenario is to test out the <a href=\"https://github.com/Kentico/kontent-delivery-sdk-js#readme\" data-new-window=\"true\" target=\"_blank\" rel=\"noopener noreferrer\">Kontent Delivery SDK for Javascript</a> for loading one content piece asynchronously using <code>await</code> so the result look like that.</p>\n<figure data-asset-id=\"77eeeadc-1283-5681-9d69-8a278040b7ff\" data-image-id=\"77eeeadc-1283-5681-9d69-8a278040b7ff\"><img src=\"https://assets-eu-01.kc-usercontent.com:443/6aec6c2a-3010-01c9-8295-4d988333f15d/5edcc9fc-bfcf-47a4-8a02-734dcb55a91d/2020-08-29_15-19-00.png\" data-asset-id=\"77eeeadc-1283-5681-9d69-8a278040b7ff\" data-image-id=\"77eeeadc-1283-5681-9d69-8a278040b7ff\" alt=\"Async Await playground example\"></figure>\n<p>Install &nbsp;required packages <code>rxjs</code> and <code>@kentico/kontent-delivery</code></p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n00328158_4ab3_0147_6265_713926374196\"></object>\n<p>This will define these two dependencies to <code>package.json</code> file and install them to <code>node_modules</code> folder.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n47f04860_ec67_0100_005a_d25c07861de2\"></object>\n<p>And to test out something real, let's adjust the <code>index.js</code> file to load content item of this gotcha.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n87e96179_c4ac_019d_5a49_3a92b0db5000\"></object>\n<p>So by running <code>npm start</code> you will get something like that!</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"ec0be9be_d3cc_01b5_ec39_6890bb5a2115\"></object>\n<p><strong>And Voila - the title logged to console! </strong>That is why we program ðŸ¤“</p>","modular_content":[{"system":{"codename":"n6096de47_b427_01e5_44bb_ffa332dba3b9","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"powershell\",\"code\":\"mkdir playground\\ncd playground\\nnpm init -y\"}"}}},{"system":{"codename":"n4191d3f6_b85d_015e_160b_53c8e1a37e80","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"json\",\"code\":\"{\\r\\n  \\\"name\\\": \\\"playground\\\",\\r\\n  \\\"version\\\": \\\"1.0.0\\\",\\r\\n  \\\"description\\\": \\\"\\\",\\r\\n  \\\"main\\\": \\\"index.js\\\",\\r\\n  \\\"scripts\\\": {\\r\\n    \\\"test\\\": \\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\"\\r\\n  },\\r\\n  \\\"keywords\\\": [],\\r\\n  \\\"author\\\": \\\"\\\",\\r\\n  \\\"license\\\": \\\"ISC\\\"\\r\\n}\"}"}}},{"system":{"codename":"n01733e3c_6588_01a3_74e6_d2f68ff05f62","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"javascript\",\"code\":\"const doWhatever = async () => {\\r\\n  // await whatever\\r\\n};\\r\\n\\r\\n// Self-invocation async function\\r\\n(async () => {\\r\\n  await doWhatever();\\r\\n})().catch((err) => {\\r\\n  console.error(err);\\r\\n  throw err;\\r\\n});\"}"}}},{"system":{"codename":"d8a4ffef_c406_01cc_e21e_0ece7cda6d49","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"json\",\"code\":\"{\\r\\n  \\\"name\\\": \\\"playground\\\",\\r\\n  \\\"version\\\": \\\"1.0.0\\\",\\r\\n  \\\"description\\\": \\\"\\\",\\r\\n  \\\"main\\\": \\\"index.js\\\",\\r\\n  \\\"scripts\\\": {\\r\\n    \\\"test\\\": \\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\",\\r\\n    \\\"start\\\": \\\"node index.js\\\" // THAT LINE\\r\\n  },\\r\\n  \\\"keywords\\\": [],\\r\\n  \\\"author\\\": \\\"\\\",\\r\\n  \\\"license\\\": \\\"ISC\\\"\\r\\n}\"}"}}},{"system":{"codename":"f517d495_ec7a_01ce_6b5f_d3a608c33870","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"powershell\",\"code\":\"npm start\"}"}}},{"system":{"codename":"n00328158_4ab3_0147_6265_713926374196","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"powershell\",\"code\":\"npm i rxjs --save\\r\\nnpm i @kentico/kontent-delivery --save\"}"}}},{"system":{"codename":"n47f04860_ec67_0100_005a_d25c07861de2","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"json\",\"code\":\"{\\r\\n  \\\"name\\\": \\\"playground\\\",\\r\\n  \\\"version\\\": \\\"1.0.0\\\",\\r\\n  \\\"description\\\": \\\"\\\",\\r\\n  \\\"main\\\": \\\"index.js\\\",\\r\\n  \\\"scripts\\\": {\\r\\n    \\\"test\\\": \\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\",\\r\\n    \\\"start\\\": \\\"node index.js\\\"\\r\\n  },\\r\\n  \\\"keywords\\\": [],\\r\\n  \\\"author\\\": \\\"\\\",\\r\\n  \\\"license\\\": \\\"ISC\\\",\\r\\n  \\\"dependencies\\\": { // THESE DEPENDENCIES\\r\\n    \\\"@kentico/kontent-delivery\\\": \\\"^10.0.0\\\",\\r\\n    \\\"rxjs\\\": \\\"^6.6.2\\\"\\r\\n  }\\r\\n}\"}"}}},{"system":{"codename":"n87e96179_c4ac_019d_5a49_3a92b0db5000","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"javascript\",\"code\":\"const { DeliveryClient } = require('@kentico/kontent-delivery');\\r\\n\\r\\nconst doWhatever = async () => {\\r\\n  const client = new DeliveryClient({\\r\\n    projectId: \\\"75653ec1-36a2-01e0-0d25-a64799947697\\\",\\r\\n  });\\r\\n\\r\\n  const result = await client.item(\\\"test_out_javascript_await_easily\\\")\\r\\n    .toPromise(); // THERE YOU GO!\\r\\n\\r\\n  console.log(result.item.title.value);\\r\\n}\\r\\n\\r\\n\\r\\n// Self-invocation async function\\r\\n(async () => {\\r\\n  await doWhatever();\\r\\n})().catch(err => {\\r\\n  console.error(err);\\r\\n  throw (err);\\r\\n});\"}"}}},{"system":{"codename":"ec0be9be_d3cc_01b5_ec39_6890bb5a2115","type":"code_snippet"},"elements":{"code":{"value":"{\"language\":\"powershell\",\"code\":\"PS C:\\\\tmp\\\\playground> npm start\\r\\n\\r\\n> playground@1.0.0 start C:\\\\tmp\\\\playground\\r\\n> node index.js\\r\\n\\r\\nTest out Javascript async await easily\"}"}}}],"images":[{"image_id":"77eeeadc-1283-5681-9d69-8a278040b7ff","url":"https://assets-eu-01.kc-usercontent.com:443/6aec6c2a-3010-01c9-8295-4d988333f15d/5edcc9fc-bfcf-47a4-8a02-734dcb55a91d/2020-08-29_15-19-00.png","width":1697,"height":786,"description":"Async Await playground example"}]}}}},"pageContext":{"language":"en-US","codename":"test_out_javascript_await_easily"}},"staticQueryHashes":["2624379000","690649307"]}