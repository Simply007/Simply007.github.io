{"componentChunkName":"component---src-templates-journal-item-js","path":"/journal/get-kontent-project-id-from-the-management-api-key","result":{"data":{"kontentItemGotcha":{"system":{"id":"1a8feff9-a4b4-4db6-b7a3-cae1fb09e189"},"elements":{"title":{"value":"Get Kontent Project ID from the Management API key"},"post_date":{"value":"2021-03-21T00:00:00Z"},"summary":{"value":"<p>It is possible to parse out Kontent Project ID out of the <a href=\"https://docs.kontent.ai/reference/management-api-v2#tag/API-key-scope-and-validity\">Management API Key</a>. That means no more necessity to ask for two keys for your Kontent tools.</p>"},"image":{"value":[{"name":"JWT Kontent.png","url":"https://assets-eu-01.kc-usercontent.com:443/75653ec1-36a2-01e0-0d25-a64799947697/deca64e3-2ca3-41bc-bce9-cf65aa6940f4/JWT%20Kontent.png","width":1400,"height":840,"description":null}]},"content":{"value":"<p>Do you develop any Kontent tool using <a href=\"https://docs.kontent.ai/reference/management-api-v2#tag/API-key-scope-and-validity\">Management API</a> and still ask for both - Project ID and Management API key? Following lines will help you to improve your UX as well as cleanout your code.</p>\n<p>The management API key is just a <a href=\"https://tools.ietf.org/html/rfc7519\">JWT token</a> containing the payload (in between header with signature). So you could decode it i.e. by using <a href=\"https://jwt.io/\">JWT.io</a>, And as a payload, you could see this:</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"n60f5933f_7045_0152_b861_aa9f2038d5d8\"></object>\n<p>The <code>project_id</code> could be used to identify the project with one modification. It is necessary to add dashes on appropriate places to respect the <a href=\"http://guid.one/guid\">GUID format</a>.<br>\n<br>\nTo do all of that, the code would end up looking like that (or any other language alternative) - or you just use a library like <a href=\"https://github.com/auth0/jwt-decode\">jwt-decode</a>. But it is always good to know what they do.</p>\n<object type=\"application/kenticocloud\" data-type=\"item\" data-rel=\"component\" data-codename=\"b2865e88_bc29_01ef_89f1_634e33d5f1cb\"></object>\n<p>If you want to play with it - <a href=\"https://codepen.io/simply007-the-sasster/pen/xxRvNoX\" data-new-window=\"true\" target=\"_blank\" rel=\"noopener noreferrer\">check out this Codepen</a>.<br>\n<br>\n<em>...and of course, I invalidated the showcased API key ðŸ¤ž &nbsp;</em></p>","modular_content":[{"__typename":"kontent_item_code_snippet","system":{"codename":"n60f5933f_7045_0152_b861_aa9f2038d5d8"},"elements":{"code":{"value":"{\"language\":\"json\",\"code\":\"{\\r\\n  \\\"jti\\\": \\\"b6a9ee86bfdc41c89f20048c3baaba04\\\",\\r\\n  \\\"iat\\\": \\\"1612535158\\\",\\r\\n  \\\"exp\\\": \\\"1958135158\\\",\\r\\n  \\\"project_id\\\": \\\"06c2b8951700013e5f3160283aff1100\\\",\\r\\n  \\\"ver\\\": \\\"2.1.0\\\",\\r\\n  \\\"uid\\\": \\\"usr_0vMrpCH2TkOK5oK3y3bKNS\\\",\\r\\n  \\\"aud\\\": \\\"manage.kenticocloud.com\\\"\\r\\n}\"}"}}},{"__typename":"kontent_item_code_snippet","system":{"codename":"b2865e88_bc29_01ef_89f1_634e33d5f1cb"},"elements":{"code":{"value":"{\"language\":\"javascript\",\"code\":\"const managementApiKey = \\\"ew0KICAiYWxnIjogIkhTMjU2IiwNCiAgInR5cCI6ICJKV1QiDQp9.ew0KICAianRpIjogImI2YTllZTg2YmZkYzQxYzg5ZjIwMDQ4YzNiYWFiYTA0IiwNCiAgImlhdCI6ICIxNjEyNTM1MTU4IiwNCiAgImV4cCI6ICIxOTU4MTM1MTU4IiwNCiAgInByb2plY3RfaWQiOiAiMDZjMmI4OTUxNzAwMDEzZTVmMzE2MDI4M2FmZjExMDAiLA0KICAidmVyIjogIjIuMS4wIiwNCiAgInVpZCI6ICJ1c3JfMHZNcnBDSDJUa09LNW9LM3kzYktOUyIsDQogICJhdWQiOiAibWFuYWdlLmtlbnRpY29jbG91ZC5jb20iDQp9.aEqGajw7e9m13lnID0z9PBCL0MytqYlvoYg_rwPfEJo\\\";\\r\\n\\r\\nconst payloadBase64 = managementApiKey.split('.')[1];\\r\\nconst payloadBase64Cleared = payloadBase64.replace(/-/g, '+').replace(/_/g, '/');\\r\\nconst jsonPayload = decodeURIComponent(\\r\\n\\tatob(payloadBase64Cleared)\\r\\n  \\t.split('')\\r\\n    .map((c) => \\r\\n    \\t('%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\\r\\n    )\\r\\n    .join('')\\r\\n);\\r\\n\\r\\nconst payloadObject = JSON.parse(jsonPayload);\\r\\n\\r\\nconst projectIdWithoutDashes = payloadObject.project_id;\\r\\n\\r\\nconst projectId = \\r\\n\\t`${projectIdWithoutDashes.substr(0, 8)}-\\\\\\r\\n${projectIdWithoutDashes.substr(8, 4)}-\\\\\\r\\n${projectIdWithoutDashes.substr(12,4 )}-\\\\\\r\\n${projectIdWithoutDashes.substr(16, 4)}-\\\\\\r\\n${projectIdWithoutDashes.substr(20)}`\\r\\n\\r\\nconsole.log(projectId);\"}"}}}],"images":[]}}}},"pageContext":{"language":"en-US","codename":"kontent_project_id_from_the_management_api_key"}},"staticQueryHashes":["2624379000","2688675029"]}