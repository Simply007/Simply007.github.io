{"version":3,"file":"131a21b5a80533224e73b970f323b13b1173ef86-a4a1bff6c28dfab4ed58.js","mappings":"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","sources":["webpack://ondrej-chrastina-personal-site/./src/components/Header.js","webpack://ondrej-chrastina-personal-site/./src/components/Menu.js","webpack://ondrej-chrastina-personal-site/./src/components/Footer.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/iframe.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/errors.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/abstract/KSLCustomElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/Logger.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/assert.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/node.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLIconElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/abstract/KSLPositionedElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/tokens/colors.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/tokens/shadows.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/constants/zIndex.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/abstract/KSLPopUpElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLTooltipElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/abstract/KSLCustomElementWithTooltip.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLButtonElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLPopoverElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/IFrameCommunicatorTypes.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/dataAttributes.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/ConfigurationManager.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/customElements.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLHighlightElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLContainerElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/KSLAddButtonElement.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/web-components/components.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/SmartLinkRenderer.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/validation.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/link.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/NodeSmartLinkProvider.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/storage.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/EventManager.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/IFrameCommunicator.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/createUuid.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/lib/QueryParamPresenceWatcher.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/utils/reload.js","webpack://ondrej-chrastina-personal-site/./node_modules/@kentico/kontent-smart-link/es/sdk.js","webpack://ondrej-chrastina-personal-site/./src/components/SmartLinkWrapper.js","webpack://ondrej-chrastina-personal-site/./src/components/layout.js","webpack://ondrej-chrastina-personal-site/./node_modules/lodash.get/index.js","webpack://ondrej-chrastina-personal-site/./node_modules/react-fast-compare/index.js","webpack://ondrej-chrastina-personal-site/./node_modules/react-helmet/es/Helmet.js","webpack://ondrej-chrastina-personal-site/./node_modules/react-side-effect/lib/index.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'gatsby'\nimport get from 'lodash.get'\n\nconst Header = props => {\n  const titleLink = get(props.data, 'elements.title_link.value[0]')\n  const menuCaption = get(props.data, 'elements.menu_caption.value', 'Menu')\n\n  const titleText = get(titleLink, 'elements.text.value')\n  const titleURL = get(titleLink, 'elements.url.value', '/')\n  return (\n    <header\n      id=\"header\"\n      className=\"alt\"\n      data-kontent-item-id={props.data.system.id}\n    >\n      <Link to={titleURL} className=\"logo\">\n        <strong>{titleText}</strong>\n      </Link>\n      <nav>\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className=\"menu-link\"\n          onClick={props.onToggleMenu}\n          onKeyDown={props.onToggleMenu}\n          data-kontent-element-codename=\"menu\"\n        >\n          {menuCaption}\n        </span>\n      </nav>\n    </header>\n  )\n}\n\nHeader.propTypes = {\n  onToggleMenu: PropTypes.func,\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'gatsby'\n\nconst Menu = props => {\n  let menuItems =\n    props.data &&\n    props.data.map(menuItem => (\n      <li key={menuItem.url}>\n        {menuItem.elements.external_url.value ? (\n          <a\n            onClick={props.onToggleMenu}\n            href={menuItem.elements.external_url.value || menuItem.url}\n            className=\"button special\"\n          >\n            {menuItem.elements.title.value}\n          </a>\n        ) : (\n          <Link onClick={props.onToggleMenu} to={menuItem.url}>\n            {menuItem.elements.title.value}\n          </Link>\n        )}\n      </li>\n    ))\n\n  return (\n    <nav id=\"menu\" data-kontent-item-id={props['data-kontent-item-id']}>\n      <div className=\"inner\" data-kontent-element-codename=\"menu\">\n        <ul className=\"links\">{menuItems}</ul>\n      </div>\n      <span\n        role=\"button\"\n        tabIndex={0}\n        className=\"close\"\n        onClick={props.onToggleMenu}\n        onKeyDown={props.onToggleMenu}\n      >\n        Close\n      </span>\n    </nav>\n  )\n}\n\nMenu.propTypes = {\n  onToggleMenu: PropTypes.func,\n}\n\nexport default Menu\n","import React from 'react'\n\nconst Footer = props => {\n  const icons = props.data.elements.social_media_accounts.value.map(\n    social_media_account => {\n      const handle = social_media_account.elements.account_handle.value\n      const mediaType = social_media_account.elements.social_media_type.value[0]\n      const url = mediaType.elements.account_pattern.value.replace('%s', handle)\n      return (\n        <li key={url}>\n          <a\n            href={url}\n            className={`icon alt ${mediaType.elements.account_icon_code.value}`}\n          >\n            <span className=\"label\">{mediaType.elements.label.value}</span>\n          </a>\n        </li>\n      )\n    }\n  )\n\n  return (\n    <footer id=\"footer\" data-kontent-item-id={props.footerItemId}>\n      <div className=\"inner\">\n        <ul\n          className=\"icons\"\n          data-kontent-element-codename=\"social_media_accounts\"\n        >\n          {icons}\n        </ul>\n        <ul\n          className=\"copyright\"\n          dangerouslySetInnerHTML={{\n            __html: props.data.elements.footer_text.value,\n          }}\n          data-kontent-element-codename=\"footer_text\"\n        ></ul>\n      </div>\n    </footer>\n  )\n}\n\nexport default Footer\n","export function isInsideIFrame() {\r\n    return window.self !== window.top;\r\n}\r\n//# sourceMappingURL=iframe.js.map","export function AssertionError(message) {\r\n    const error = new Error(message);\r\n    error.name = 'AssertionError';\r\n    return error;\r\n}\r\nexport function NotImplementedError(message) {\r\n    const error = new Error(message);\r\n    error.name = 'NotImplementedError';\r\n    return error;\r\n}\r\nexport function InvalidEnvironmentError(message) {\r\n    const error = new Error(message);\r\n    error.name = 'InvalidEnvironmentError';\r\n    return error;\r\n}\r\nexport function NotInitializedError(message) {\r\n    const error = new Error(message);\r\n    error.name = 'NotInitializedError';\r\n    return error;\r\n}\r\n//# sourceMappingURL=errors.js.map","import { InvalidEnvironmentError, NotImplementedError } from '../../utils/errors';\r\n// Custom elements API as well as all Web Component definitions can only be run in a browser environment,\r\n// because they require build-in browser APIs, which are not available on the backend (during SSR).\r\n// There are several libraries that allow server-side rendering of Web Components. It is usually done by\r\n// redefining the whole DOM API on the backend. For the purpose of this SDK it is not required to\r\n// support server-side rendering of Web Components, because whole page must be loaded for SDK to work properly.\r\n// However, some SSR frameworks (such as Next.js) will try to run this code on the server side first during SSR,\r\n// which could result in a crash because HTMLElement is not defined on the backend. That is why we are setting\r\n// this property to null in a global Nodejs scope.\r\nconst isNotInBrowser = typeof window === 'undefined';\r\nif (isNotInBrowser) {\r\n    // eslint-disable-next-line\r\n    // @ts-ignore: required to support SSR frameworks\r\n    global['HTMLElement'] = null;\r\n}\r\n/**\r\n * This is a base class for all kontent-smart-link custom elements.\r\n */\r\nlet KSLCustomElement = /** @class */ (() => {\r\n    class KSLCustomElement extends HTMLElement {\r\n        constructor() {\r\n            super();\r\n            // We are using an \"open\" mode here, so that it is easier for users to manipulate the shadow root\r\n            // of our custom elements if they want to change or customize something.\r\n            const shadowRootConfig = { mode: 'open' };\r\n            const selfClass = Object.getPrototypeOf(this).constructor;\r\n            const shadowRoot = this.attachShadow(shadowRootConfig);\r\n            shadowRoot.appendChild(selfClass.template.content.cloneNode(true));\r\n        }\r\n        /**\r\n         * Name of the custom element that will be added to the CustomElementRegistry.\r\n         * This name will be used to add a custom element to the page.\r\n         *\r\n         * @type {string}\r\n         */\r\n        static get is() {\r\n            throw NotImplementedError('KSLCustomElement: \"is\" getter is not implemented for this custom element.');\r\n        }\r\n        /**\r\n         * Template is usually stored in the scope of custom element file, but this does not work with SSR,\r\n         * since `document` is not available on the backend. That is why we are storing the template in a static\r\n         * constructor property and initialize it when we are sure we are in a browser environment.\r\n         *\r\n         * @type {HTMLTemplateElement}\r\n         */\r\n        static get template() {\r\n            if (!this._template) {\r\n                this._template = this.initializeTemplate();\r\n            }\r\n            return this._template;\r\n        }\r\n        /**\r\n         * Add this custom element to the CustomElementRegistry so that it can be used on the page.\r\n         * Usually customElements.define is called inline right at the bottom of the custom element file,\r\n         * but this would not work with SSR, since custom elements can't be defined on the backend.\r\n         */\r\n        static define() {\r\n            if (typeof window === 'undefined') {\r\n                throw InvalidEnvironmentError('KSLCustomElement: custom elements can only be defined in a browser environment.');\r\n            }\r\n            if (!window.customElements) {\r\n                throw InvalidEnvironmentError('KSLCustomElement: custom elements API is not available.');\r\n            }\r\n            // The 'this' keyword refers to current constructor in static methods.\r\n            // Conversion to unknown is needed so that we can explicitly converse\r\n            // this class to CustomElementConstructor.\r\n            const self = this;\r\n            if (!window.customElements.get(this.is)) {\r\n                customElements.define(this.is, self);\r\n                return customElements.whenDefined(this.is);\r\n            }\r\n            return Promise.resolve();\r\n        }\r\n        /**\r\n         * Initialize a template for the custom element.\r\n         * Each KSL custom element class should implement this static method.\r\n         *\r\n         * @returns {HTMLTemplateElement}\r\n         */\r\n        static initializeTemplate() {\r\n            throw NotImplementedError('KSLCustomElement: \"initializeTemplate\" method should be implemented for every component.');\r\n        }\r\n        /**\r\n         * Update attribute value on the custom element.\r\n         *\r\n         * @param {string} attributeName\r\n         * @param {string | number | boolean | null} attributeValue\r\n         */\r\n        updateAttribute(attributeName, attributeValue) {\r\n            if (attributeValue) {\r\n                this.setAttribute(attributeName, attributeValue.toString());\r\n            }\r\n            else {\r\n                this.removeAttribute(attributeName);\r\n            }\r\n        }\r\n        /**\r\n         * Dispatch an asynchronous event from component. Dispatching this event returns Promise\r\n         * which resolves if event was successful and rejects if events is not successful.\r\n         *\r\n         * @param {string} eventType\r\n         * @param {TEventData} eventData\r\n         * @param {number | null} timeout\r\n         * @protected\r\n         */\r\n        dispatchAsyncEvent(eventType, eventData, timeout = null) {\r\n            return new Promise((resolve, reject) => {\r\n                const timeoutId = timeout ? window.setTimeout(reject, timeout) : 0;\r\n                const customEvent = new CustomEvent(eventType, {\r\n                    detail: {\r\n                        eventData: eventData,\r\n                        onResolve: (data) => {\r\n                            window.clearTimeout(timeoutId);\r\n                            resolve(data);\r\n                        },\r\n                        onReject: (reason) => {\r\n                            window.clearTimeout(timeoutId);\r\n                            reject(reason);\r\n                        },\r\n                    },\r\n                });\r\n                this.dispatchEvent(customEvent);\r\n            });\r\n        }\r\n    }\r\n    KSLCustomElement._template = null;\r\n    return KSLCustomElement;\r\n})();\r\nexport { KSLCustomElement };\r\n//# sourceMappingURL=KSLCustomElement.js.map","export var LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Debug\"] = 1] = \"Debug\";\r\n    LogLevel[LogLevel[\"Info\"] = 2] = \"Info\";\r\n    LogLevel[LogLevel[\"Warn\"] = 3] = \"Warn\";\r\n    LogLevel[LogLevel[\"Error\"] = 4] = \"Error\";\r\n})(LogLevel || (LogLevel = {}));\r\nlet Logger = /** @class */ (() => {\r\n    class Logger {\r\n        static setLogLevel(level) {\r\n            Logger.logLevel = level;\r\n        }\r\n        static error(...args) {\r\n            if (Logger.logLevel <= LogLevel.Error) {\r\n                console.error('[KSL][Error]: ', ...args);\r\n            }\r\n        }\r\n        static warn(...args) {\r\n            if (Logger.logLevel <= LogLevel.Warn) {\r\n                console.warn('[KSL][Warning]: ', ...args);\r\n            }\r\n        }\r\n        static info(...args) {\r\n            if (Logger.logLevel <= LogLevel.Info) {\r\n                console.info('[KSL][Info]: ', ...args);\r\n            }\r\n        }\r\n        static debug(...args) {\r\n            if (Logger.logLevel <= LogLevel.Debug) {\r\n                console.log(...args);\r\n            }\r\n        }\r\n        static debugGroupCollapsed(...args) {\r\n            if (Logger.logLevel <= LogLevel.Debug) {\r\n                console.groupCollapsed(...args);\r\n            }\r\n        }\r\n        static debugGroup(...args) {\r\n            if (Logger.logLevel <= LogLevel.Debug) {\r\n                console.group(...args);\r\n            }\r\n        }\r\n        static debugGroupEnd() {\r\n            if (Logger.logLevel <= LogLevel.Debug) {\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n    Logger.logLevel = LogLevel.Info;\r\n    return Logger;\r\n})();\r\nexport { Logger };\r\n//# sourceMappingURL=Logger.js.map","import { AssertionError } from './errors';\r\nimport { Logger } from '../lib/Logger';\r\nexport function assert(condition, message) {\r\n    if (!condition) {\r\n        const error = AssertionError(message);\r\n        Logger.error(error);\r\n        throw error;\r\n    }\r\n}\r\n//# sourceMappingURL=assert.js.map","export function groupElementsByRenderingRoot(elements) {\r\n    var _a;\r\n    const results = new Map();\r\n    for (const element of elements) {\r\n        const root = getRenderingRootForElement(element);\r\n        const prev = (_a = results.get(root)) !== null && _a !== void 0 ? _a : new Set();\r\n        results.set(root, prev.add(element));\r\n    }\r\n    return results;\r\n}\r\n/**\r\n * Iterate through node ancestors and find an element which will be used as a parent for\r\n * the ksl-container. This element should either be positioned (position is anything except static) or should\r\n * have its content clipped. In case of table element (td, th, table) it should be positioned or it will be ignored\r\n * (even if its content is clipped).\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {HTMLElement | null}\r\n */\r\nexport function getRenderingRootForElement(element) {\r\n    const parentElement = element.parentElement;\r\n    if (parentElement instanceof HTMLElement) {\r\n        const metadata = getRenderingRootMetadata(parentElement);\r\n        // Table HTML element (td, th, table) can be an offset parent of some node, but unless it is positioned it will not be\r\n        // used as a offset parent for the absolute positioned child (highlight). That is why we should ignore those elements and\r\n        // do not use them as parents unless they are positioned. Otherwise, the highlighting might broke for the tables.\r\n        const isNotTable = !['TD', 'TH', 'TABLE'].includes(parentElement.tagName);\r\n        return metadata.isPositioned || (metadata.isContentClipped && isNotTable)\r\n            ? parentElement\r\n            : getRenderingRootForElement(parentElement);\r\n    }\r\n    return null;\r\n}\r\nexport function getRenderingRootMetadata(root) {\r\n    const computedStyles = window.getComputedStyle(root);\r\n    const position = computedStyles.getPropertyValue('position');\r\n    const overflow = computedStyles.getPropertyValue('overflow');\r\n    return {\r\n        isPositioned: position !== 'static',\r\n        isContentClipped: overflow.split(' ').some((value) => ['auto', 'scroll', 'clip', 'hidden'].includes(value)),\r\n    };\r\n}\r\n/**\r\n * Iterate through node ancestors until HTMLElement.offsetParent is reached and sum scroll offsets.\r\n *\r\n * @param {HTMLElement | null} node\r\n * @returns {[number, number]}\r\n *  where the first number is a totalScrollTop, and the second number is a totalScrollLeft.\r\n */\r\nexport function getTotalScrollOffset(node) {\r\n    if (!node) {\r\n        return [0, 0];\r\n    }\r\n    const offsetParent = node.offsetParent;\r\n    // HTMLElement.offsetParent can be null when the node is <body> or <html>\r\n    if (!offsetParent) {\r\n        return [0, 0];\r\n    }\r\n    let scrollTop = 0;\r\n    let scrollLeft = 0;\r\n    let currentNode = node;\r\n    while (currentNode.parentElement) {\r\n        currentNode = currentNode.parentElement;\r\n        if (offsetParent && offsetParent.isSameNode(currentNode)) {\r\n            break;\r\n        }\r\n        scrollTop += currentNode.scrollTop;\r\n        scrollLeft += currentNode.scrollLeft;\r\n    }\r\n    return [scrollTop, scrollLeft];\r\n}\r\n/**\r\n * Get all element ancestors.\r\n * @param {HTMLElement} element\r\n */\r\nexport function getElementAncestors(element) {\r\n    const ancestors = [];\r\n    let parent = element.parentElement;\r\n    while (parent !== null) {\r\n        ancestors.push(parent);\r\n        parent = parent.parentElement;\r\n    }\r\n    return ancestors;\r\n}\r\nexport function createTemplateForCustomElement(html) {\r\n    const template = document.createElement('template');\r\n    template.innerHTML = html;\r\n    return template;\r\n}\r\n//# sourceMappingURL=node.js.map","import { KSLCustomElement } from './abstract/KSLCustomElement';\r\nimport { assert } from '../utils/assert';\r\nimport { createTemplateForCustomElement } from '../utils/node';\r\nexport var IconName;\r\n(function (IconName) {\r\n    IconName[\"CollapseScheme\"] = \"icon-collapse-scheme\";\r\n    IconName[\"Edit\"] = \"icon-edit\";\r\n    IconName[\"Plus\"] = \"icon-plus\";\r\n    IconName[\"PlusPuzzle\"] = \"icon-plus-puzzle\";\r\n    IconName[\"Puzzle\"] = \"icon-puzzle\";\r\n    IconName[\"Spinner\"] = \"icon-spinner\";\r\n})(IconName || (IconName = {}));\r\nconst iconsHTML = `\r\n  <template id=\"${IconName.Edit}\">\r\n    <svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n            d=\"M1 14.993V10.0515L9.47121 1.58221C10.2522 0.801373 11.5183 0.801373 12.2993 1.58221L14.4132 3.69561C15.1945 4.47669 15.1945 5.74327 14.4132 6.52436L5.94263 14.993H1ZM5.52848 13.993L10.7581 8.7646L7.22982 5.23714L2 10.4658V13.993H5.52848ZM7.937 4.53012L11.4653 8.05757L13.7062 5.81717C14.0968 5.42663 14.0968 4.79334 13.7062 4.4028L11.5923 2.28939C11.2018 1.89898 10.5687 1.89898 10.1782 2.28939L7.937 4.53012Z\"\r\n      />\r\n      <path\r\n          d=\"M9.48975 13.9982C9.2136 13.9982 8.98975 14.2221 8.98975 14.4982C8.98975 14.7743 9.2136 14.9982 9.48975 14.9982H14.4865C14.7626 14.9982 14.9865 14.7743 14.9865 14.4982C14.9865 14.2221 14.7626 13.9982 14.4865 13.9982H9.48975Z\"\r\n      />\r\n    </svg>\r\n  </template>\r\n  <template id=\"${IconName.Plus}\">\r\n    <svg viewBox=\"0 0 18 18\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n          d=\"M7.75366 16.5C7.75366 17.1904 8.31331 17.75 9.00366 17.75C9.69402 17.75 10.2537 17.1904 10.2537 16.5V10.2861H16.5C17.1904 10.2861 17.75 9.72642 17.75 9.03606C17.75 8.34571 17.1904 7.78606 16.5 7.78606H10.2537V1.5C10.2537 0.809643 9.69402 0.25 9.00366 0.25C8.31331 0.25 7.75366 0.809644 7.75366 1.5V7.78606H1.5C0.809644 7.78606 0.25 8.34571 0.25 9.03606C0.25 9.72642 0.809644 10.2861 1.5 10.2861H7.75366V16.5Z\"\r\n      />\r\n    </svg>\r\n  </template>\r\n  <template id=\"${IconName.Spinner}\">\r\n    <svg class=\"spin-500\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n            d=\"M1.25049 10.0001C1.25049 5.16797 5.16766 1.25069 9.99979 1.25061C10.345 1.2506 10.6248 1.53042 10.6248 1.8756C10.6248 2.22078 10.345 2.5006 9.99981 2.50061C5.85803 2.50068 2.50049 5.85831 2.50049 10.0001C2.50049 14.1418 5.85811 17.4995 9.99993 17.4995C14.1418 17.4995 17.4994 14.1418 17.4994 10.0001C17.4994 8.00692 16.7227 6.19654 15.4542 4.85289C15.2172 4.60189 15.2286 4.20633 15.4796 3.96937C15.7306 3.73241 16.1261 3.74379 16.3631 3.99479C17.8419 5.5612 18.7494 7.67533 18.7494 10.0001C18.7494 14.8322 14.8321 18.7495 9.99993 18.7495C5.16775 18.7495 1.25049 14.8322 1.25049 10.0001Z\"\r\n      />\r\n    </svg>\r\n  </template>\r\n  <template id=\"${IconName.Puzzle}\">\r\n    <svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n            d=\"M5.36522 2.48835C5.12409 2.7724 5.03429 3.10232 5.03429 3.27273V4.50861C5.03429 4.78476 4.81043 5.00861 4.53429 5.00861H2V14H4.0343V13.2727C4.0343 12.8522 4.21698 12.2958 4.60288 11.8412C5.00497 11.3675 5.63191 11 6.49745 11C7.36086 11 7.99972 11.3654 8.41593 11.8319C8.81555 12.2798 9.02461 12.8381 9.02461 13.2727V14.0072L11.0125 14.0014V11.4936C11.0125 11.2175 11.2363 10.9936 11.5125 10.9936H12.7273C12.8923 10.9936 13.2215 10.9016 13.5081 10.6537C13.7758 10.4221 14 10.0599 14 9.50642C14 8.95199 13.7748 8.58042 13.5038 8.34043C13.2141 8.08395 12.8857 7.98937 12.7273 7.98937H11.5125C11.2363 7.98937 11.0125 7.76551 11.0125 7.48937V5.00861H8.52459C8.24845 5.00861 8.02459 4.78476 8.02459 4.50861V3.27273C8.02459 3.11648 7.92916 2.7884 7.66975 2.49765C7.42692 2.2255 7.0522 2 6.49743 2C5.94479 2 5.59016 2.22337 5.36522 2.48835ZM4.60286 1.84119C5.00495 1.36753 5.6319 1 6.49743 1C7.36085 1 7.9997 1.36541 8.41592 1.83189C8.81554 2.27978 9.0246 2.83807 9.0246 3.27273V4.00861H11.5125C11.7886 4.00861 12.0125 4.23247 12.0125 4.50861V6.98937H12.7273C13.1597 6.98937 13.7177 7.19422 14.1667 7.59172C14.6343 8.00572 15 8.64268 15 9.50642C15 10.3712 14.6333 11.0025 14.1624 11.41C13.7103 11.8011 13.1531 11.9936 12.7273 11.9936H12.0125V14.5C12.0125 14.7756 11.7895 14.9992 11.5139 15L8.52605 15.0086C8.3932 15.009 8.26565 14.9565 8.17157 14.8627C8.07749 14.7689 8.02461 14.6415 8.02461 14.5086V13.2727C8.02461 13.1165 7.92918 12.7884 7.66976 12.4977C7.42694 12.2255 7.05222 12 6.49745 12C5.9448 12 5.59017 12.2234 5.36523 12.4884C5.12411 12.7724 5.0343 13.1023 5.0343 13.2727V14.5C5.0343 14.7761 4.81044 15 4.5343 15H1.5C1.22386 15 1 14.7761 1 14.5V4.50861C1 4.23247 1.22386 4.00861 1.5 4.00861H4.03429V3.27273C4.03429 2.85223 4.21696 2.29579 4.60286 1.84119Z\"/>\r\n    </svg>\r\n  </template>\r\n  <template id=\"${IconName.PlusPuzzle}\">\r\n    <svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path d=\"M4.5 8.97021C4.22386 8.97021 4 9.19407 4 9.47021C4 9.74636 4.22386 9.97021 4.5 9.97021H6.01123V11.5C6.01123 11.7761 6.23509 12 6.51123 12C6.78737 12 7.01123 11.7761 7.01123 11.5V9.97021H8.5C8.77614 9.97021 9 9.74636 9 9.47021C9 9.19407 8.77614 8.97021 8.5 8.97021H7.01123V7.5C7.01123 7.22386 6.78737 7 6.51123 7C6.23509 7 6.01123 7.22386 6.01123 7.5V8.97021H4.5Z\" />\r\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.49743 1C5.6319 1 5.00495 1.36753 4.60286 1.84119C4.21696 2.29579 4.03429 2.85223 4.03429 3.27273V4.00861H1.5C1.22386 4.00861 1 4.23247 1 4.50861V10.9545C1 12.5357 1.67001 13.5722 2.53739 14.1967C3.37928 14.8028 4.37453 15 5.04545 15H11.5125C11.7886 15 12.0125 14.7761 12.0125 14.5V11.9936H12.7273C13.1531 11.9936 13.7103 11.8011 14.1624 11.41C14.6333 11.0025 15 10.3712 15 9.50642C15 8.64268 14.6343 8.00572 14.1667 7.59172C13.7177 7.19422 13.1597 6.98937 12.7273 6.98937H12.0125V4.50861C12.0125 4.23247 11.7886 4.00861 11.5125 4.00861H9.0246V3.27273C9.0246 2.83807 8.81554 2.27978 8.41592 1.83189C7.9997 1.36541 7.36085 1 6.49743 1ZM5.03429 3.27273C5.03429 3.10232 5.12409 2.7724 5.36522 2.48835C5.59016 2.22337 5.94479 2 6.49743 2C7.0522 2 7.42692 2.2255 7.66975 2.49765C7.92916 2.7884 8.02459 3.11648 8.02459 3.27273V4.50861C8.02459 4.78476 8.24845 5.00861 8.52459 5.00861H11.0125V7.48937C11.0125 7.76551 11.2363 7.98937 11.5125 7.98937H12.7273C12.8857 7.98937 13.2141 8.08395 13.5038 8.34043C13.7748 8.58042 14 8.95199 14 9.50642C14 10.0599 13.7758 10.4221 13.5081 10.6537C13.2215 10.9016 12.8923 10.9936 12.7273 10.9936H11.5125C11.2363 10.9936 11.0125 11.2175 11.0125 11.4936V14H5.04545C4.53456 14 3.75708 13.8426 3.1217 13.3851C2.51181 12.946 2 12.2098 2 10.9545V5.00861H4.53429C4.81043 5.00861 5.03429 4.78476 5.03429 4.50861V3.27273Z\" />\r\n    </svg>\r\n  </template>\r\n  <template id=\"${IconName.CollapseScheme}\">\r\n    <svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n            d=\"M14.9952 2.54249V4.99715H15.0024V6.99547H14.0027V6.00319H2.00561L2.00561 6.99547H1.00586L1.00586 6.00319H1.00244V2.54249C1.00244 1.69346 1.62932 1.00439 2.40172 1.00439H13.596C14.3684 1.00439 14.9952 1.69346 14.9952 2.54249ZM13.9955 5.00403H2.00561V4.99715H2.0022V2.54249C2.0022 2.15367 2.26888 2.00356 2.40172 2.00356H13.596C13.7288 2.00356 13.9955 2.15366 13.9955 2.54249V5.00403Z\"\r\n      />\r\n      <path\r\n          d=\"M1.00625 14.0052H3.00537L3.00498 15.0044H1.50732C1.37433 15.0044 1.24678 14.938 1.15273 14.8198C1.05869 14.7016 1.00586 14.5412 1.00586 14.3741L1.00625 14.0052Z\"\r\n      />\r\n      <path\r\n          d=\"M13.0029 13.9964H15.0021L15.0024 14.3653C15.0024 14.5325 14.9496 14.6928 14.8556 14.811C14.7615 14.9292 14.634 14.9956 14.501 14.9956H13.0033L13.0029 13.9964Z\"\r\n      />\r\n      <path d=\"M1.00586 11.0039L1.00586 13.0022H2.00561L2.00561 11.0039H1.00586Z\"/>\r\n      <path d=\"M14.0027 13.0022V11.0039H15.0024V13.0022H14.0027Z\"/>\r\n      <path d=\"M1.00586 7.99464L1.00586 9.99296H2.00561L2.00561 7.99464H1.00586Z\"/>\r\n      <path d=\"M14.0027 7.99464V9.99296H15.0024V7.99464H14.0027Z\"/>\r\n      <path d=\"M6.00464 14.0052H4.00513L4.00513 15.0044H6.00464V14.0052Z\"/>\r\n      <path d=\"M7.00439 14.0052H9.00391V15.0044H7.00439V14.0052Z\"/>\r\n      <path d=\"M12.0032 14.0052H10.0037V15.0044H12.0032V14.0052Z\"/>\r\n    </svg>\r\n  </template>\r\n`;\r\nconst templateHTML = `\r\n  <style>\r\n    @-webkit-keyframes spin-500 {\r\n      0% {\r\n        -webkit-transform: rotate(0deg);\r\n      }\r\n  \r\n      100% {\r\n        -webkit-transform: rotate(359deg);\r\n      }\r\n    }\r\n  \r\n    @keyframes spin-500 {\r\n      0% {\r\n        transform: rotate(0deg);\r\n      }\r\n  \r\n      100% {\r\n        transform: rotate(359deg);\r\n      }\r\n    }\r\n  \r\n  \r\n    :host {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: var(--ksl-icon-width, 0px);\r\n      height: var(--ksl-icon-height, 0px);\r\n    }\r\n  \r\n    .spin-500 {\r\n      animation-direction: normal;\r\n      animation-delay: 0s;\r\n      animation-duration: 1s;\r\n      animation-iteration-count: infinite;\r\n      animation-name: spin-500;\r\n      animation-timing-function: linear;\r\n      transform-origin: center;\r\n    }\r\n  </style>\r\n`;\r\nlet KSLIconElement = /** @class */ (() => {\r\n    class KSLIconElement extends KSLCustomElement {\r\n        constructor() {\r\n            super();\r\n            this.getTemplateByIconName = (iconName) => {\r\n                if (!iconName) {\r\n                    return null;\r\n                }\r\n                const template = KSLIconElement.icons.content.querySelector(`template#${iconName}`);\r\n                if (template instanceof HTMLTemplateElement) {\r\n                    return template;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            };\r\n            this.updateIcon = (iconName) => {\r\n                if (!this.shadowRoot) {\r\n                    return;\r\n                }\r\n                const template = this.getTemplateByIconName(iconName);\r\n                if (template) {\r\n                    const content = template.content.cloneNode(true);\r\n                    if (this.iconRef) {\r\n                        this.shadowRoot.replaceChild(content, this.iconRef);\r\n                    }\r\n                    else {\r\n                        this.shadowRoot.appendChild(content);\r\n                    }\r\n                    this.iconRef = this.shadowRoot.lastElementChild;\r\n                }\r\n                else if (this.iconRef) {\r\n                    this.iconRef.remove();\r\n                    this.iconRef = null;\r\n                }\r\n            };\r\n            assert(this.shadowRoot, 'Shadow root must be always accessible in \"open\" mode.');\r\n            const name = this.getAttribute('icon-name');\r\n            const template = this.getTemplateByIconName(name);\r\n            if (template) {\r\n                const content = template.content.cloneNode(true);\r\n                this.shadowRoot.appendChild(content);\r\n                this.iconRef = this.shadowRoot.lastElementChild;\r\n            }\r\n            else {\r\n                this.iconRef = null;\r\n            }\r\n        }\r\n        static get is() {\r\n            return 'ksl-icon';\r\n        }\r\n        static get icons() {\r\n            if (!this._icons) {\r\n                const template = document.createElement('template');\r\n                template.innerHTML = iconsHTML;\r\n                this._icons = template;\r\n            }\r\n            return this._icons;\r\n        }\r\n        static get observedAttributes() {\r\n            return ['icon-name'];\r\n        }\r\n        get iconName() {\r\n            return this.getAttribute('icon-name');\r\n        }\r\n        set iconName(value) {\r\n            this.updateAttribute('icon-name', value);\r\n        }\r\n        static initializeTemplate() {\r\n            return createTemplateForCustomElement(templateHTML);\r\n        }\r\n        attributeChangedCallback(attributeName, _oldValue, newValue) {\r\n            if (attributeName === 'icon-name') {\r\n                this.updateIcon(newValue);\r\n            }\r\n        }\r\n    }\r\n    KSLIconElement._icons = null;\r\n    return KSLIconElement;\r\n})();\r\nexport { KSLIconElement };\r\n//# sourceMappingURL=KSLIconElement.js.map","import { KSLCustomElement } from './KSLCustomElement';\r\nexport var ElementPositionOffset;\r\n(function (ElementPositionOffset) {\r\n    ElementPositionOffset[\"Bottom\"] = \"bottom\";\r\n    ElementPositionOffset[\"BottomEnd\"] = \"bottom-end\";\r\n    ElementPositionOffset[\"BottomStart\"] = \"bottom-start\";\r\n    ElementPositionOffset[\"Left\"] = \"left\";\r\n    ElementPositionOffset[\"LeftEnd\"] = \"left-end\";\r\n    ElementPositionOffset[\"LeftStart\"] = \"left-start\";\r\n    ElementPositionOffset[\"None\"] = \"\";\r\n    ElementPositionOffset[\"Right\"] = \"right\";\r\n    ElementPositionOffset[\"RightEnd\"] = \"right-end\";\r\n    ElementPositionOffset[\"RightStart\"] = \"right-start\";\r\n    ElementPositionOffset[\"Top\"] = \"top\";\r\n    ElementPositionOffset[\"TopEnd\"] = \"top-end\";\r\n    ElementPositionOffset[\"TopStart\"] = \"top-start\";\r\n})(ElementPositionOffset || (ElementPositionOffset = {}));\r\nexport class KSLPositionedElement extends KSLCustomElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.targetRef = null;\r\n    }\r\n    get position() {\r\n        return ElementPositionOffset.None;\r\n    }\r\n    connectedCallback() {\r\n        if (!this.hasAttribute('tabindex')) {\r\n            this.setAttribute('tabindex', '-1');\r\n        }\r\n    }\r\n    disconnectedCallback() {\r\n        this.targetRef = null;\r\n    }\r\n    attachTo(element) {\r\n        this.targetRef = element;\r\n    }\r\n    calculateTopOffset(thisRect, targetRect) {\r\n        switch (this.position) {\r\n            case ElementPositionOffset.TopStart:\r\n            case ElementPositionOffset.Top:\r\n            case ElementPositionOffset.TopEnd:\r\n                return -thisRect.height;\r\n            case ElementPositionOffset.BottomStart:\r\n            case ElementPositionOffset.Bottom:\r\n            case ElementPositionOffset.BottomEnd:\r\n                return targetRect.height;\r\n            case ElementPositionOffset.Left:\r\n            case ElementPositionOffset.Right:\r\n                return (targetRect.height - thisRect.height) / 2;\r\n            case ElementPositionOffset.LeftEnd:\r\n            case ElementPositionOffset.RightEnd:\r\n                return targetRect.height - thisRect.height;\r\n            case ElementPositionOffset.LeftStart:\r\n            case ElementPositionOffset.RightStart:\r\n            case ElementPositionOffset.None:\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n    calculateLeftOffset(thisRect, targetRect) {\r\n        switch (this.position) {\r\n            case ElementPositionOffset.Top:\r\n            case ElementPositionOffset.Bottom:\r\n                return (targetRect.width - thisRect.width) / 2;\r\n            case ElementPositionOffset.TopEnd:\r\n            case ElementPositionOffset.BottomEnd:\r\n                return targetRect.width - thisRect.width;\r\n            case ElementPositionOffset.LeftStart:\r\n            case ElementPositionOffset.Left:\r\n            case ElementPositionOffset.LeftEnd:\r\n                return -thisRect.width;\r\n            case ElementPositionOffset.RightStart:\r\n            case ElementPositionOffset.Right:\r\n            case ElementPositionOffset.RightEnd:\r\n                return targetRect.width;\r\n            case ElementPositionOffset.TopStart:\r\n            case ElementPositionOffset.BottomStart:\r\n            case ElementPositionOffset.None:\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=KSLPositionedElement.js.map","export var Colors;\r\n(function (Colors) {\r\n    Colors[\"BackgroundDefault\"] = \"rgba(255, 255, 255, 1)\";\r\n    Colors[\"BackgroundDefaultDisabled\"] = \"rgba(223, 223, 223, 1)\";\r\n    Colors[\"BackgroundDefaultHover\"] = \"rgba(21, 21, 21, 0.1)\";\r\n    Colors[\"BackgroundDefaultSelected\"] = \"rgba(255, 240, 239, 1)\";\r\n    Colors[\"BackgroundSecondary\"] = \"rgba(20, 22, 25, 1)\";\r\n    Colors[\"Primary\"] = \"rgba(219, 60, 0, 1)\";\r\n    Colors[\"PrimaryHover\"] = \"rgba(149, 48, 0, 1)\";\r\n    Colors[\"PrimaryTransparent\"] = \"rgba(219, 60, 0, 0.5)\";\r\n    Colors[\"TextDefault\"] = \"rgba(21, 21, 21, 1)\";\r\n    Colors[\"TextDefaultDisabled\"] = \"rgba(140, 140, 140, 1)\";\r\n    Colors[\"TextSecondary\"] = \"rgba(255, 255, 255, 1)\";\r\n})(Colors || (Colors = {}));\r\n//# sourceMappingURL=colors.js.map","export var Shadows;\r\n(function (Shadows) {\r\n    Shadows[\"Default\"] = \"0 8px 32px rgba(16, 33, 60, 0.24), 0 0 8px rgba(0, 0, 0, 0.03)\";\r\n    Shadows[\"Primary\"] = \"0 8px 10px rgba(219, 60, 0, 0.2), 0 6px 20px rgba(219, 60, 0, 0.12), 0 8px 14px rgba(219, 60, 0, 0.14)\";\r\n})(Shadows || (Shadows = {}));\r\n//# sourceMappingURL=shadows.js.map","export const BaseZIndex = 9000;\r\n//# sourceMappingURL=zIndex.js.map","import { ElementPositionOffset, KSLPositionedElement } from './KSLPositionedElement';\r\nimport { createTemplateForCustomElement, getTotalScrollOffset } from '../../utils/node';\r\nimport { Colors } from '../tokens/colors';\r\nimport { Shadows } from '../tokens/shadows';\r\nimport { BaseZIndex } from '../constants/zIndex';\r\nconst templateHTML = `\r\n  <style>\r\n    :host {\r\n      --arrow-size: var(--ksl-pop-up-arrow-size, 12px);\r\n      --background-color: var(--ksl-pop-up-background-color, ${Colors.BackgroundDefault});\r\n      --border-radius: var(--ksl-pop-up-border-radius, 4px);\r\n      --box-shadow: var(--ksl-pop-up-box-shadow, ${Shadows.Default});\r\n      --color: var(--ksl-pop-up-color, ${Colors.TextDefault});\r\n      --padding: var(--ksl-pop-up-padding, 8px 8px);\r\n      \r\n      display: block;\r\n      position: absolute;\r\n      opacity: 0;\r\n      z-index: calc(var(--ksl-z-index, ${BaseZIndex}) + 1000);\r\n      transition: opacity 250ms ease-in-out;\r\n    }\r\n  \r\n    :host([visible]) {\r\n      opacity: 1;\r\n    }\r\n    \r\n    :host(:focus) {\r\n      outline: none;\r\n    }\r\n  \r\n    .ksl-pop-up__content {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      box-shadow: var(--box-shadow);\r\n      background-color: var(--background-color);\r\n      padding: var(--padding);\r\n      border-radius: var(--border-radius);\r\n      font-size: 12px;\r\n      line-height: 16px;\r\n      font-weight: normal;\r\n      color: var(--color);\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.RightStart}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.Right}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.RightEnd}\"]) .ksl-pop-up__content {\r\n      margin-left: var(--arrow-size);\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.LeftStart}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.Left}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.LeftEnd}\"]) .ksl-pop-up__content {\r\n      margin-right: var(--arrow-size);\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.BottomStart}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.Bottom}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.BottomEnd}\"]) .ksl-pop-up__content {\r\n      margin-top: var(--arrow-size);\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.TopStart}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.Top}\"]) .ksl-pop-up__content,\r\n    :host([position=\"${ElementPositionOffset.TopEnd}\"]) .ksl-pop-up__content {\r\n      margin-bottom: var(--arrow-size);\r\n    }\r\n  \r\n    .ksl-pop-up__arrow {\r\n      position: absolute;\r\n      width: 0;\r\n      height: 0;\r\n      margin: 0 .25rem;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.RightStart}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.Right}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.RightEnd}\"]) .ksl-pop-up__arrow {\r\n      left: -(var(--arrow-size));\r\n      border-right: var(--arrow-size) solid var(--background-color);\r\n      border-top: var(--arrow-size) solid transparent;\r\n      border-bottom: var(--arrow-size) solid transparent;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.LeftStart}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.Left}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.LeftEnd}\"]) .ksl-pop-up__arrow {\r\n      right: -(var(--arrow-size));\r\n      border-top: var(--arrow-size) solid transparent;\r\n      border-left: var(--arrow-size) solid var(--background-color);\r\n      border-bottom: var(--arrow-size) solid transparent;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.BottomStart}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.Bottom}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.BottomEnd}\"]) .ksl-pop-up__arrow {\r\n      top: 0;\r\n      border-left: var(--arrow-size) solid transparent;\r\n      border-right: var(--arrow-size) solid transparent;\r\n      border-bottom: var(--arrow-size) solid var(--background-color);\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.TopStart}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.Top}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.TopEnd}\"]) .ksl-pop-up__arrow {\r\n      bottom: 0;\r\n      border-top: var(--arrow-size) solid var(--background-color);\r\n      border-left: var(--arrow-size) solid transparent;\r\n      border-right: var(--arrow-size) solid transparent;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.Top}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.Bottom}\"]) .ksl-pop-up__arrow {\r\n      left: calc(50% - var(--arrow-size) - 0.25rem);\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.TopEnd}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.BottomEnd}\"]) .ksl-pop-up__arrow {\r\n      right: 0;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.TopStart}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.BottomStart}\"]) .ksl-pop-up__arrow {\r\n      left: 0;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.Left}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.Right}\"]) .ksl-pop-up__arrow {\r\n      top: 8px;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.LeftEnd}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.RightEnd}\"]) .ksl-pop-up__arrow {\r\n      bottom: 0;\r\n    }\r\n  \r\n    :host([position=\"${ElementPositionOffset.LeftStart}\"]) .ksl-pop-up__arrow,\r\n    :host([position=\"${ElementPositionOffset.RightStart}\"]) .ksl-pop-up__arrow {\r\n      top: 0;\r\n    }\r\n  </style>\r\n  <div class=\"ksl-pop-up__content\">\r\n    <slot></slot>\r\n  </div>\r\n  <div class=\"ksl-pop-up__arrow\"/>\r\n`;\r\nexport class KSLPopUpElement extends KSLPositionedElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.attachTo = (element) => {\r\n            super.attachTo(element);\r\n            this.adjustPosition();\r\n        };\r\n        this.adjustPosition = () => {\r\n            if (!this.targetRef || !this.offsetParent) {\r\n                return; // Can't position without target reference or when not mounted to DOM.\r\n            }\r\n            const thisRect = this.getBoundingClientRect();\r\n            const targetRect = this.targetRef.getBoundingClientRect();\r\n            const parentRect = this.offsetParent.getBoundingClientRect();\r\n            const isOffsetToBody = this.offsetParent.isSameNode(document.body);\r\n            const isOffsetToTarget = this.offsetParent.isSameNode(this.targetRef);\r\n            const topOffset = this.calculateTopOffset(thisRect, targetRect);\r\n            const leftOffset = this.calculateLeftOffset(thisRect, targetRect);\r\n            let thisTop;\r\n            let thisLeft;\r\n            if (isOffsetToTarget) {\r\n                thisTop = topOffset;\r\n                thisLeft = leftOffset;\r\n            }\r\n            else {\r\n                const [scrollOffsetTop, scrollOffsetLeft] = getTotalScrollOffset(this.parentElement);\r\n                thisTop = targetRect.top + topOffset + (isOffsetToBody ? window.pageYOffset : scrollOffsetTop);\r\n                thisLeft = targetRect.left + leftOffset + (isOffsetToBody ? window.pageXOffset : scrollOffsetLeft);\r\n            }\r\n            if (isOffsetToBody) {\r\n                if (parentRect.top + thisTop + thisRect.height > window.innerHeight) {\r\n                    this.style.bottom = parentRect.height + 'px';\r\n                    this.style.top = 'auto';\r\n                }\r\n                else {\r\n                    this.style.bottom = 'auto';\r\n                    this.style.top = Math.max(-parentRect.top, thisTop) + 'px';\r\n                }\r\n                if (parentRect.left + thisLeft + thisRect.width > window.innerWidth) {\r\n                    this.style.right = '0px';\r\n                    this.style.left = 'auto';\r\n                }\r\n                else {\r\n                    this.style.right = 'auto';\r\n                    this.style.left = Math.max(-parentRect.left, thisLeft) + 'px';\r\n                }\r\n            }\r\n            else {\r\n                this.style.right = 'auto';\r\n                this.style.left = `${thisLeft}px`;\r\n                this.style.bottom = 'auto';\r\n                this.style.top = `${thisTop}px`;\r\n            }\r\n        };\r\n    }\r\n    get position() {\r\n        var _a;\r\n        return (_a = this.getAttribute('position')) !== null && _a !== void 0 ? _a : ElementPositionOffset.Bottom;\r\n    }\r\n    set position(value) {\r\n        this.updateAttribute('position', value);\r\n    }\r\n    get visible() {\r\n        return this.hasAttribute('visible');\r\n    }\r\n    set visible(value) {\r\n        this.updateAttribute('visible', value);\r\n    }\r\n    static initializeTemplate() {\r\n        return createTemplateForCustomElement(templateHTML);\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        if (!this.hasAttribute('role')) {\r\n            this.setAttribute('role', 'tooltip');\r\n        }\r\n        window.addEventListener('resize', this.adjustPosition, { capture: true });\r\n        window.addEventListener('scroll', this.adjustPosition, { capture: true });\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        window.removeEventListener('resize', this.adjustPosition, { capture: true });\r\n        window.removeEventListener('scroll', this.adjustPosition, { capture: true });\r\n    }\r\n}\r\n//# sourceMappingURL=KSLPopUpElement.js.map","import { KSLPopUpElement } from './abstract/KSLPopUpElement';\r\nimport { createTemplateForCustomElement } from '../utils/node';\r\nimport { Colors } from './tokens/colors';\r\nconst templateHTML = `\r\n  <style>\r\n    :host {\r\n      --ksl-pop-up-arrow-size: 4px;\r\n      --ksl-pop-up-background-color: var(--ksl-color-background-secondary, ${Colors.BackgroundSecondary});\r\n      --ksl-pop-up-box-shadow: none;\r\n      --ksl-pop-up-color: var(--ksl-color-text-secondary, ${Colors.TextSecondary});\r\n      --ksl-pop-up-padding: 4px 6px;\r\n    }\r\n  </style>\r\n`;\r\nexport class KSLTooltipElement extends KSLPopUpElement {\r\n    static get is() {\r\n        return 'ksl-tooltip';\r\n    }\r\n    static initializeTemplate() {\r\n        const baseTemplate = KSLPopUpElement.initializeTemplate();\r\n        const thisTemplate = createTemplateForCustomElement(templateHTML);\r\n        baseTemplate.content.appendChild(thisTemplate.content.cloneNode(true));\r\n        return baseTemplate;\r\n    }\r\n}\r\n//# sourceMappingURL=KSLTooltipElement.js.map","import { KSLCustomElement } from './KSLCustomElement';\r\nimport { KSLTooltipElement } from '../KSLTooltipElement';\r\nimport { ElementPositionOffset } from './KSLPositionedElement';\r\nexport class KSLCustomElementWithTooltip extends KSLCustomElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.tooltipRef = null;\r\n        this.showTooltip = () => {\r\n            if (this.tooltipRef) {\r\n                this.hideTooltip();\r\n            }\r\n            if (!this.tooltipMessage || this.tooltipDisabled) {\r\n                return;\r\n            }\r\n            const tooltip = document.createElement(KSLTooltipElement.is);\r\n            tooltip.innerText = this.tooltipMessage;\r\n            this.tooltipRef = document.body.appendChild(tooltip);\r\n            this.tooltipRef.position = this.tooltipPosition;\r\n            this.tooltipRef.attachTo(this);\r\n            this.tooltipRef.visible = true;\r\n        };\r\n        this.hideTooltip = () => {\r\n            if (this.tooltipRef) {\r\n                this.tooltipRef.visible = false;\r\n                this.tooltipRef.remove();\r\n                this.tooltipRef = null;\r\n            }\r\n        };\r\n    }\r\n    static get observedAttributes() {\r\n        return ['tooltip-disabled', 'tooltip-message'];\r\n    }\r\n    get tooltipDisabled() {\r\n        return this.hasAttribute('tooltip-disabled');\r\n    }\r\n    set tooltipDisabled(value) {\r\n        this.updateAttribute('tooltip-disabled', value);\r\n    }\r\n    get tooltipMessage() {\r\n        return this.getAttribute('tooltip-message');\r\n    }\r\n    set tooltipMessage(value) {\r\n        this.updateAttribute('tooltip-message', value);\r\n    }\r\n    get tooltipPosition() {\r\n        return this.getAttribute('tooltip-position') || ElementPositionOffset.Bottom;\r\n    }\r\n    set tooltipPosition(value) {\r\n        this.updateAttribute('tooltip-position', value);\r\n    }\r\n    connectedCallback() {\r\n        this.addEventListener('focus', this.showTooltip);\r\n        this.addEventListener('mouseenter', this.showTooltip);\r\n        this.addEventListener('blur', this.hideTooltip);\r\n        this.addEventListener('mouseleave', this.hideTooltip);\r\n    }\r\n    disconnectedCallback() {\r\n        this.hideTooltip();\r\n        this.removeEventListener('focus', this.showTooltip);\r\n        this.removeEventListener('mouseenter', this.showTooltip);\r\n        this.removeEventListener('blur', this.hideTooltip);\r\n        this.removeEventListener('mouseleave', this.hideTooltip);\r\n    }\r\n    attributeChangedCallback(attributeName, _oldValue, newValue) {\r\n        if (attributeName === 'tooltip-disabled') {\r\n            if (newValue) {\r\n                this.hideTooltip();\r\n            }\r\n        }\r\n        else if (attributeName === 'tooltip-message') {\r\n            if (!newValue) {\r\n                this.hideTooltip();\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=KSLCustomElementWithTooltip.js.map","import { IconName } from './KSLIconElement';\r\nimport { assert } from '../utils/assert';\r\nimport { KSLCustomElementWithTooltip } from './abstract/KSLCustomElementWithTooltip';\r\nimport { createTemplateForCustomElement } from '../utils/node';\r\nimport { Colors } from './tokens/colors';\r\nimport { Shadows } from './tokens/shadows';\r\nexport var ButtonType;\r\n(function (ButtonType) {\r\n    ButtonType[\"Primary\"] = \"primary\";\r\n    ButtonType[\"Quinary\"] = \"quinary\";\r\n})(ButtonType || (ButtonType = {}));\r\nconst templateHTML = `\r\n  <style>\r\n    :host,\r\n    :host * {\r\n      box-sizing: border-box;\r\n    }\r\n    \r\n    :host {\r\n      display: block;\r\n    }\r\n    \r\n    :host([hidden]) {\r\n      display: none;\r\n    }\r\n    \r\n    :host(:focus) {\r\n      outline: none;\r\n    }\r\n\r\n    .ksl-button {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      border: none;\r\n      cursor: pointer;\r\n    }\r\n    \r\n    .ksl-button:focus {\r\n      outline: none;\r\n    }\r\n    \r\n    :host([disabled]) .ksl-button {\r\n      cursor: not-allowed;\r\n    }\r\n    \r\n    .ksl-button__content,\r\n    :host([loading]) .ksl-button__loader {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n    \r\n    .ksl-button__loader,\r\n    :host([loading]) .ksl-button__content {\r\n      display: none;\r\n    }\r\n    \r\n    :host([type=${ButtonType.Primary}]) .ksl-button {\r\n      --ksl-icon-width: 18px;\r\n      --ksl-icon-height: 18px;\r\n      min-width: 40px;\r\n      max-width: 40px;\r\n      min-height: 40px;\r\n      max-height: 40px;\r\n      border-radius: 5000px;\r\n      box-shadow: var(--ksl-shadow-primary, ${Shadows.Primary});\r\n      background-color: var(--ksl-color-primary, ${Colors.Primary});\r\n      color: var(--ksl-color-text-secondary, ${Colors.TextSecondary});\r\n      fill: var(--ksl-color-text-secondary, ${Colors.TextSecondary});\r\n    }\r\n    \r\n    :host([type=${ButtonType.Primary}]:not([disabled])) .ksl-button:hover,\r\n    :host([type=${ButtonType.Primary}]:not([disabled])) .ksl-button:active {\r\n      background-color: var(--ksl-color-primary-hover, ${Colors.PrimaryHover});\r\n    }\r\n    \r\n    :host([type=${ButtonType.Primary}][disabled]) .ksl-button {\r\n      background-color: var(--ksl-color-background-default-disabled, ${Colors.BackgroundDefaultDisabled});\r\n      color: var(--ksl-color-text-default-disabled, ${Colors.TextDefaultDisabled});\r\n      fill: var(--ksl-color-text-default-disabled, ${Colors.TextDefaultDisabled});\r\n      box-shadow: none;\r\n    }\r\n    \r\n    :host([type=${ButtonType.Primary}][loading]) .ksl-button {\r\n      color: var(--ksl-color-primary, ${Colors.Primary});\r\n      fill: var(--ksl-color-primary, ${Colors.Primary});\r\n      box-shadow: none;\r\n    }\r\n    \r\n    :host([type=${ButtonType.Quinary}]) .ksl-button {\r\n      --ksl-icon-width: 16px;\r\n      --ksl-icon-height: 16px;\r\n      border-radius: 5px;\r\n      padding: 0;\r\n      min-height: 24px;\r\n      min-width: 24px;\r\n      max-height: 24px;\r\n      max-width: 24px;\r\n      color: var(--ksl-color-text-default, ${Colors.TextDefault});\r\n      fill: var(--ksl-color-text-default, ${Colors.TextDefault});\r\n      background-color: var(--ksl-color-background-default, ${Colors.BackgroundDefault});\r\n    }\r\n    \r\n    :host([type=${ButtonType.Quinary}][disabled]) .ksl-button {\r\n      color: var(--ksl-color-text-default-disabled, ${Colors.TextDefaultDisabled});\r\n      fill: var(--ksl-color-text-default-disabled, ${Colors.TextDefaultDisabled});\r\n    }\r\n    \r\n    :host([type=${ButtonType.Quinary}]:not([disabled])) .ksl-button:hover {\r\n      background-color: var(--ksl-color-background-default-hover, ${Colors.BackgroundDefaultHover});\r\n    }\r\n    \r\n    :host([type=${ButtonType.Quinary}]:not([disabled])) .ksl-button:active {\r\n      background-color: var(--ksl-color-background-default-selected, ${Colors.BackgroundDefaultSelected});\r\n    }\r\n  </style>\r\n  <button class=\"ksl-button\">\r\n    <div class=\"ksl-button__content\">\r\n      <slot></slot>\r\n    </div>\r\n    <ksl-icon icon-name=\"${IconName.Spinner}\" class=\"ksl-button__loader\" />\r\n  </button>\r\n`;\r\nexport class KSLButtonElement extends KSLCustomElementWithTooltip {\r\n    constructor() {\r\n        super();\r\n        this.handleClick = (event) => {\r\n            // make sure the disabled button does not trigger events\r\n            if (this.disabled) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                event.stopImmediatePropagation();\r\n            }\r\n        };\r\n        assert(this.shadowRoot, 'Shadow root must be always accessible in \"open\" mode.');\r\n        this.buttonRef = this.shadowRoot.querySelector('button');\r\n    }\r\n    static get is() {\r\n        return 'ksl-button';\r\n    }\r\n    static get observedAttributes() {\r\n        const base = KSLCustomElementWithTooltip.observedAttributes;\r\n        return [...base, 'loading'];\r\n    }\r\n    get loading() {\r\n        return this.hasAttribute('loading');\r\n    }\r\n    set loading(value) {\r\n        this.updateAttribute('loading', value);\r\n    }\r\n    get disabled() {\r\n        return this.hasAttribute('disabled');\r\n    }\r\n    set disabled(value) {\r\n        this.updateAttribute('disabled', value);\r\n    }\r\n    static initializeTemplate() {\r\n        return createTemplateForCustomElement(templateHTML);\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        this.addEventListener('click', this.handleClick, { capture: true });\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        this.removeEventListener('click', this.handleClick, { capture: true });\r\n    }\r\n    attributeChangedCallback(attributeName, _oldValue, newValue) {\r\n        super.attributeChangedCallback(attributeName, _oldValue, newValue);\r\n        if (attributeName === 'loading') {\r\n            const value = Boolean(newValue);\r\n            this.disabled = value;\r\n            this.tooltipDisabled = value;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=KSLButtonElement.js.map","import { KSLPopUpElement } from './abstract/KSLPopUpElement';\r\nimport { createTemplateForCustomElement } from '../utils/node';\r\nimport { Colors } from './tokens/colors';\r\nimport { Shadows } from './tokens/shadows';\r\nconst templateHTML = `\r\n  <style>\r\n    :host {\r\n      --ksl-pop-up-arrow-size: 12px;\r\n      --ksl-pop-up-background-color: var(--ksl-color-background-default, ${Colors.BackgroundDefault});\r\n      --ksl-pop-up-border-radius: 4px;\r\n      --ksl-pop-up-box-shadow: var(--ksl-shadow-default, ${Shadows.Default});;\r\n      --ksl-pop-up-color: var(--ksl-color-text-default, ${Colors.TextDefault});\r\n      --ksl-pop-up-padding: 8px;\r\n    }\r\n  </style>\r\n`;\r\nexport class KSLPopoverElement extends KSLPopUpElement {\r\n    static get is() {\r\n        return 'ksl-popover';\r\n    }\r\n    static initializeTemplate() {\r\n        const baseTemplate = KSLPopUpElement.initializeTemplate();\r\n        const thisTemplate = createTemplateForCustomElement(templateHTML);\r\n        baseTemplate.content.appendChild(thisTemplate.content.cloneNode(true));\r\n        return baseTemplate;\r\n    }\r\n}\r\n//# sourceMappingURL=KSLPopoverElement.js.map","export var InsertPositionPlacement;\r\n(function (InsertPositionPlacement) {\r\n    InsertPositionPlacement[\"After\"] = \"after\";\r\n    InsertPositionPlacement[\"Before\"] = \"before\";\r\n    InsertPositionPlacement[\"End\"] = \"end\";\r\n    InsertPositionPlacement[\"Start\"] = \"start\";\r\n})(InsertPositionPlacement || (InsertPositionPlacement = {}));\r\nexport var AddButtonAction;\r\n(function (AddButtonAction) {\r\n    AddButtonAction[\"CreateComponent\"] = \"CreateComponent\";\r\n    AddButtonAction[\"CreateLinkedItem\"] = \"CreateLinkedItem\";\r\n    AddButtonAction[\"InsertLinkedItem\"] = \"InsertLinkedItem\";\r\n})(AddButtonAction || (AddButtonAction = {}));\r\nexport var AddButtonElementType;\r\n(function (AddButtonElementType) {\r\n    AddButtonElementType[\"LinkedItems\"] = \"LinkedItems\";\r\n    AddButtonElementType[\"RichText\"] = \"RichText\";\r\n    AddButtonElementType[\"Unknown\"] = \"Unknown\";\r\n})(AddButtonElementType || (AddButtonElementType = {}));\r\nexport var AddButtonPermission;\r\n(function (AddButtonPermission) {\r\n    AddButtonPermission[\"CreateNew\"] = \"createNew\";\r\n    AddButtonPermission[\"Edit\"] = \"edit\";\r\n    AddButtonPermission[\"ViewParent\"] = \"viewParent\";\r\n})(AddButtonPermission || (AddButtonPermission = {}));\r\nexport var AddButtonPermissionCheckResult;\r\n(function (AddButtonPermissionCheckResult) {\r\n    AddButtonPermissionCheckResult[\"ItemNotTranslated\"] = \"ItemNotTranslated\";\r\n    AddButtonPermissionCheckResult[\"Ok\"] = \"Ok\";\r\n    AddButtonPermissionCheckResult[\"PermissionMissing\"] = \"PermissionMissing\";\r\n    AddButtonPermissionCheckResult[\"RteWithForbiddenComponents\"] = \"RteWithForbiddenComponents\";\r\n    AddButtonPermissionCheckResult[\"Unknown\"] = \"Unknown\";\r\n})(AddButtonPermissionCheckResult || (AddButtonPermissionCheckResult = {}));\r\nexport var IFrameMessageType;\r\n(function (IFrameMessageType) {\r\n    IFrameMessageType[\"ElementClicked\"] = \"kontent-smart-link:element:clicked\";\r\n    IFrameMessageType[\"ContentItemClicked\"] = \"kontent-smart-link:content-item:clicked\";\r\n    IFrameMessageType[\"ContentComponentClicked\"] = \"kontent-smart-link:content-component:clicked\";\r\n    IFrameMessageType[\"Initialized\"] = \"kontent-smart-link:initialized\";\r\n    IFrameMessageType[\"Status\"] = \"kontent-smart-link:status\";\r\n    IFrameMessageType[\"AddInitial\"] = \"kontent-smart-link:add:initial\";\r\n    IFrameMessageType[\"AddAction\"] = \"kontent-smart-link:add:action\";\r\n    IFrameMessageType[\"RefreshPreview\"] = \"kontent-smart-link:preview:refresh\";\r\n})(IFrameMessageType || (IFrameMessageType = {}));\r\nexport var IFrameResponseType;\r\n(function (IFrameResponseType) {\r\n    IFrameResponseType[\"AddInitialResponse\"] = \"kontent-smart-link:add:initial:response\";\r\n})(IFrameResponseType || (IFrameResponseType = {}));\r\n//# sourceMappingURL=IFrameCommunicatorTypes.js.map","import { getElementAncestors } from './node';\r\nimport { InsertPositionPlacement, } from '../lib/IFrameCommunicatorTypes';\r\nimport { getHighlightTypeForElement, HighlightType } from './customElements';\r\nimport { Logger } from '../lib/Logger';\r\n/**\r\n * Data-attributes are used to get some Kontent related data from DOM.\r\n * Data from data-attributes is used to generate smart links or iframe messages to Kontent.\r\n * However, this data can also be used in rendering (e.g. HTML elements with element codename attribute\r\n * have highlights).\r\n */\r\nexport var DataAttribute;\r\n(function (DataAttribute) {\r\n    DataAttribute[\"AddButtonInsertPosition\"] = \"data-kontent-add-button-insert-position\";\r\n    DataAttribute[\"ElementCodename\"] = \"data-kontent-element-codename\";\r\n    DataAttribute[\"ComponentId\"] = \"data-kontent-component-id\";\r\n    DataAttribute[\"ItemId\"] = \"data-kontent-item-id\";\r\n    DataAttribute[\"LanguageCodename\"] = \"data-kontent-language-codename\";\r\n    DataAttribute[\"ProjectId\"] = \"data-kontent-project-id\";\r\n})(DataAttribute || (DataAttribute = {}));\r\n/**\r\n * Metadata-attributes are used to get some metadata about some of the SDK features.\r\n * Metadata is used for SDK inner logic (such as rendering, event handling, etc.).\r\n */\r\nexport var MetadataAttribute;\r\n(function (MetadataAttribute) {\r\n    MetadataAttribute[\"AddButton\"] = \"data-kontent-add-button\";\r\n    MetadataAttribute[\"AddButtonRenderPosition\"] = \"data-kontent-add-button-render-position\";\r\n    MetadataAttribute[\"DisableFeatures\"] = \"data-kontent-disable-features\";\r\n})(MetadataAttribute || (MetadataAttribute = {}));\r\n/**\r\n * Valid values of the MetadataAttribute.DisableFeatures attribute.\r\n * Those values can be used to disable certain features for the selected node.\r\n */\r\nexport var DisableableFeature;\r\n(function (DisableableFeature) {\r\n    DisableableFeature[\"Highlight\"] = \"highlight\";\r\n})(DisableableFeature || (DisableableFeature = {}));\r\nvar ParserTokenKey;\r\n(function (ParserTokenKey) {\r\n    ParserTokenKey[\"ProjectId\"] = \"projectId\";\r\n    ParserTokenKey[\"LanguageCodename\"] = \"languageCodename\";\r\n    ParserTokenKey[\"ItemId\"] = \"itemId\";\r\n    ParserTokenKey[\"ComponentId\"] = \"contentComponentId\";\r\n    ParserTokenKey[\"ElementCodename\"] = \"elementCodename\";\r\n    ParserTokenKey[\"Placement\"] = \"placement\";\r\n    ParserTokenKey[\"TargetId\"] = \"targetId\";\r\n})(ParserTokenKey || (ParserTokenKey = {}));\r\nconst baseParserPattern = [\r\n    { key: ParserTokenKey.LanguageCodename, dataAttributes: [DataAttribute.LanguageCodename] },\r\n    { key: ParserTokenKey.ProjectId, dataAttributes: [DataAttribute.ProjectId] },\r\n];\r\nconst itemEditButtonParserPattern = [\r\n    { key: ParserTokenKey.ItemId, dataAttributes: [DataAttribute.ItemId] },\r\n    ...baseParserPattern,\r\n];\r\nconst componentEditButtonParserPattern = [\r\n    { key: ParserTokenKey.ComponentId, dataAttributes: [DataAttribute.ComponentId] },\r\n    ...itemEditButtonParserPattern,\r\n];\r\nconst elementEditButtonParserPattern = [\r\n    { key: ParserTokenKey.ElementCodename, dataAttributes: [DataAttribute.ElementCodename] },\r\n    { key: ParserTokenKey.ComponentId, dataAttributes: [DataAttribute.ComponentId], optional: true },\r\n    ...itemEditButtonParserPattern,\r\n];\r\nconst baseAddButtonParserPattern = [\r\n    { key: ParserTokenKey.ElementCodename, dataAttributes: [DataAttribute.ElementCodename] },\r\n    { key: ParserTokenKey.ComponentId, dataAttributes: [DataAttribute.ComponentId], optional: true },\r\n    { key: ParserTokenKey.ItemId, dataAttributes: [DataAttribute.ItemId] },\r\n    ...baseParserPattern,\r\n];\r\nconst relativeAddButtonParserPattern = [\r\n    { key: ParserTokenKey.Placement, dataAttributes: [DataAttribute.AddButtonInsertPosition], optional: true },\r\n    { key: ParserTokenKey.TargetId, dataAttributes: [DataAttribute.ComponentId, DataAttribute.ItemId] },\r\n    ...baseAddButtonParserPattern,\r\n];\r\nconst fixedAddButtonParserPattern = [\r\n    { key: ParserTokenKey.Placement, dataAttributes: [DataAttribute.AddButtonInsertPosition], optional: true },\r\n    ...baseAddButtonParserPattern,\r\n];\r\nexport function parseEditButtonDataAttributes(target) {\r\n    const type = getHighlightTypeForElement(target);\r\n    const pattern = getEditButtonDataAttributesPattern(type);\r\n    const parsed = parseDataAttributes(pattern, target);\r\n    return Object.assign(Object.assign({ projectId: parsed.get(ParserTokenKey.ProjectId), languageCodename: parsed.get(ParserTokenKey.LanguageCodename), itemId: parsed.get(ParserTokenKey.ItemId) }, (parsed.has(ParserTokenKey.ComponentId) && { contentComponentId: parsed.get(ParserTokenKey.ComponentId) })), (parsed.has(ParserTokenKey.ElementCodename) && { elementCodename: parsed.get(ParserTokenKey.ElementCodename) }));\r\n}\r\nexport function parseAddButtonDataAttributes(target) {\r\n    const position = target.getAttribute(DataAttribute.AddButtonInsertPosition);\r\n    const pattern = getAddButtonDataAttributesPattern(position);\r\n    const parsed = parseDataAttributes(pattern, target);\r\n    return Object.assign(Object.assign({ projectId: parsed.get(ParserTokenKey.ProjectId), languageCodename: parsed.get(ParserTokenKey.LanguageCodename), itemId: parsed.get(ParserTokenKey.ItemId) }, (parsed.get(ParserTokenKey.ComponentId) && { contentComponentId: parsed.get(ParserTokenKey.ComponentId) })), { elementCodename: parsed.get(ParserTokenKey.ElementCodename), insertPosition: getAddButtonInsertPosition(parsed) });\r\n}\r\nfunction getEditButtonDataAttributesPattern(type) {\r\n    switch (type) {\r\n        case HighlightType.Element:\r\n            return elementEditButtonParserPattern;\r\n        case HighlightType.ContentComponent:\r\n            return componentEditButtonParserPattern;\r\n        case HighlightType.ContentItem:\r\n            return itemEditButtonParserPattern;\r\n        default:\r\n            return baseParserPattern;\r\n    }\r\n}\r\nfunction getAddButtonDataAttributesPattern(position) {\r\n    switch (position) {\r\n        case InsertPositionPlacement.End:\r\n        case InsertPositionPlacement.Start:\r\n            return fixedAddButtonParserPattern;\r\n        case InsertPositionPlacement.After:\r\n        case InsertPositionPlacement.Before:\r\n        default:\r\n            return relativeAddButtonParserPattern;\r\n    }\r\n}\r\nfunction getAddButtonInsertPosition(parsed) {\r\n    var _a;\r\n    const placement = (_a = parsed.get(ParserTokenKey.Placement)) !== null && _a !== void 0 ? _a : InsertPositionPlacement.After;\r\n    const targetId = parsed.get(ParserTokenKey.TargetId);\r\n    switch (placement) {\r\n        case InsertPositionPlacement.End:\r\n        case InsertPositionPlacement.Start:\r\n            return { placement };\r\n        case InsertPositionPlacement.Before:\r\n        case InsertPositionPlacement.After:\r\n            return { placement, targetId };\r\n        default:\r\n            return { targetId, placement: InsertPositionPlacement.After };\r\n    }\r\n}\r\n/**\r\n * Parse data-attributes starting from target to its ancestors using the parsing pattern.\r\n *\r\n * @param {DataAttributesParserPattern} pattern\r\n * @param {HTMLElement} startFrom\r\n * @returns {ReadonlyMap<ParserTokenKey, string>}\r\n */\r\nfunction parseDataAttributes(pattern, startFrom) {\r\n    const parsed = new Map();\r\n    Logger.debugGroup('Parse data-attributes starting with ', startFrom);\r\n    const elements = [startFrom, ...getElementAncestors(startFrom)];\r\n    Logger.debug('Elements that will be parsed: ', elements);\r\n    Logger.debug('Parsing pattern: ', pattern);\r\n    for (const element of elements) {\r\n        const takenDataAttributes = new Set();\r\n        Logger.debugGroup('Checking data-attributes on ', element);\r\n        for (const token of pattern) {\r\n            const { key, dataAttributes, optional } = token;\r\n            Logger.debugGroupCollapsed(`Looking for '${key}' [${dataAttributes}]`);\r\n            const [dataAttribute, value] = findDataAttribute(element, dataAttributes);\r\n            Logger.debug('Value: ', value);\r\n            Logger.debug('Already parsed: ', parsed.has(key));\r\n            Logger.debug('Already taken by previous token: ', takenDataAttributes.has(dataAttribute));\r\n            if (!value && !parsed.has(key) && !optional) {\r\n                Logger.debug('[Result]: Required data-attribute is missing.');\r\n                Logger.debugGroupEnd();\r\n                // Required data-attribute is missing. There is no point in continuing parsing data-attributes\r\n                // on current element, we should move to the next ancestor.\r\n                break;\r\n            }\r\n            if (parsed.has(key)) {\r\n                Logger.debug('[Result]: This data-attribute has already been parsed in some of the previous steps.');\r\n                Logger.debugGroupEnd();\r\n                continue;\r\n            }\r\n            if (!value) {\r\n                Logger.debug('[Result]: This data attribute has no value.');\r\n                Logger.debugGroupEnd();\r\n                continue;\r\n            }\r\n            if (takenDataAttributes.has(dataAttribute)) {\r\n                Logger.debug('[Result]: A previous token has already used this data-attribute.');\r\n                Logger.debugGroupEnd();\r\n                continue;\r\n            }\r\n            const currentTokenIndex = pattern.indexOf(token);\r\n            const tokensWithHigherPriority = pattern.slice(currentTokenIndex, pattern.length);\r\n            const areSomeTokensWithHigherPriorityParsed = tokensWithHigherPriority.some((token) => parsed.has(token.key));\r\n            // If some higher token has already been parsed, it can mean two things:\r\n            // a) Current data-attribute is optional and is not related to the current scope. In that case, it can be ignored.\r\n            // b) Parsed data is related to some lower scope (or invalid) and should be cleared.\r\n            if (areSomeTokensWithHigherPriorityParsed) {\r\n                if (optional) {\r\n                    Logger.debug('[Result]: Attribute is not related to the current scope.');\r\n                    Logger.debugGroupEnd();\r\n                    continue;\r\n                }\r\n                for (const token of tokensWithHigherPriority) {\r\n                    parsed.delete(token.key);\r\n                }\r\n            }\r\n            parsed.set(token.key, value);\r\n            takenDataAttributes.add(dataAttribute);\r\n            Logger.debug('[Result]: Attribute successfully parsed!');\r\n            Logger.debugGroupEnd();\r\n        }\r\n        Logger.debug('Values parsed so far: ', parsed);\r\n        Logger.debugGroupEnd();\r\n    }\r\n    Logger.debugGroupEnd();\r\n    Logger.debug('[Result]: ', parsed);\r\n    return parsed;\r\n}\r\nfunction findDataAttribute(element, dataAttributes) {\r\n    for (const attribute of dataAttributes) {\r\n        const value = element.getAttribute(attribute);\r\n        if (value) {\r\n            return [attribute, value];\r\n        }\r\n    }\r\n    return [null, null];\r\n}\r\n//# sourceMappingURL=dataAttributes.js.map","import { isInsideIFrame } from '../utils/iframe';\r\nconst defaultConfiguration = {\r\n    debug: false,\r\n    defaultDataAttributes: {\r\n        languageCodename: undefined,\r\n        projectId: undefined,\r\n    },\r\n    forceWebSpotlightMode: false,\r\n    isInsideWebSpotlight: false,\r\n    queryParam: 'ksl-enabled',\r\n};\r\nexport class ConfigurationManager {\r\n    constructor() {\r\n        this.update = (configuration = {}) => {\r\n            this.configuration = Object.assign(Object.assign({}, this.configuration), configuration);\r\n        };\r\n        this.configuration = defaultConfiguration;\r\n    }\r\n    get debug() {\r\n        return this.configuration.debug;\r\n    }\r\n    get queryParam() {\r\n        return this.configuration.queryParam;\r\n    }\r\n    get defaultLanguageCodename() {\r\n        return this.configuration.defaultDataAttributes.languageCodename;\r\n    }\r\n    get defaultProjectId() {\r\n        return this.configuration.defaultDataAttributes.projectId;\r\n    }\r\n    get isInsideWebSpotlightPreviewIFrame() {\r\n        const { forceWebSpotlightMode, isInsideWebSpotlight } = this.configuration;\r\n        return forceWebSpotlightMode || (isInsideIFrame() && isInsideWebSpotlight);\r\n    }\r\n    static getInstance() {\r\n        if (!ConfigurationManager.instance) {\r\n            ConfigurationManager.instance = new ConfigurationManager();\r\n        }\r\n        return ConfigurationManager.instance;\r\n    }\r\n}\r\n//# sourceMappingURL=ConfigurationManager.js.map","import { DataAttribute, DisableableFeature, MetadataAttribute } from './dataAttributes';\r\nimport { ConfigurationManager } from '../lib/ConfigurationManager';\r\nexport var HighlightType;\r\n(function (HighlightType) {\r\n    HighlightType[\"None\"] = \"\";\r\n    HighlightType[\"Element\"] = \"element\";\r\n    HighlightType[\"ContentComponent\"] = \"content-component\";\r\n    HighlightType[\"ContentItem\"] = \"content-item\";\r\n})(HighlightType || (HighlightType = {}));\r\nconst DisabledHighlightFeatureSelector = `[${MetadataAttribute.DisableFeatures}*=\"${DisableableFeature.Highlight}\"]`;\r\nconst ElementSelector = `*[${DataAttribute.ElementCodename}]:not(${DisabledHighlightFeatureSelector})`;\r\nconst ContentComponentSelector = `*[${DataAttribute.ComponentId}]:not([${DataAttribute.ElementCodename}]):not(${DisabledHighlightFeatureSelector})`;\r\nconst ContentItemSelector = `*[${DataAttribute.ItemId}]:not([${DataAttribute.ComponentId}]):not([${DataAttribute.ElementCodename}]):not(${DisabledHighlightFeatureSelector})`;\r\nconst ElementsWithAddButtonSelector = `*[${MetadataAttribute.AddButton}]`;\r\nconst AllAugmentableElementsSelector = `${ElementSelector}, ${ContentComponentSelector}, ${ContentItemSelector}, ${ElementsWithAddButtonSelector}`;\r\n/**\r\n * Find all descendant HTML elements that could be augmented (have highlights or add buttons near them).\r\n *\r\n * @param {HTMLElement | Document} node\r\n * @returns {NodeListOf<HTMLElement>}\r\n */\r\nexport function getAugmentableDescendants(node) {\r\n    const configurationManager = ConfigurationManager.getInstance();\r\n    const isInsideWebSpotlight = configurationManager.isInsideWebSpotlightPreviewIFrame;\r\n    if (isInsideWebSpotlight) {\r\n        return node.querySelectorAll(AllAugmentableElementsSelector);\r\n    }\r\n    return node.querySelectorAll(ElementSelector);\r\n}\r\n/**\r\n * Checks if HTML element could be augmented (have highlights or add buttons near them).\r\n *\r\n * @param {HTMLElement | null} element\r\n * @returns {boolean}\r\n */\r\nexport function isElementAugmentable(element) {\r\n    return shouldElementHaveHighlight(element) || shouldElementHaveAddButton(element);\r\n}\r\n/**\r\n * Check if node should have highlights based on its data-attributes.\r\n *\r\n * @param {HTMLElement | null} element\r\n * @returns {boolean}\r\n */\r\nexport function shouldElementHaveHighlight(element) {\r\n    const highlightType = getHighlightTypeForElement(element);\r\n    switch (highlightType) {\r\n        case HighlightType.None:\r\n            return false;\r\n        case HighlightType.Element:\r\n            return true;\r\n        case HighlightType.ContentItem:\r\n        case HighlightType.ContentComponent:\r\n        default: {\r\n            const configurationManager = ConfigurationManager.getInstance();\r\n            return configurationManager.isInsideWebSpotlightPreviewIFrame;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Check if node should have a add button based on its data-attributes.\r\n *\r\n * @param {HTMLElement | null} element\r\n * @returns {boolean}\r\n */\r\nexport function shouldElementHaveAddButton(element) {\r\n    const configurationManager = ConfigurationManager.getInstance();\r\n    const isInsideWebSpotlight = configurationManager.isInsideWebSpotlightPreviewIFrame;\r\n    // add button should only be visible inside Web Spotlight\r\n    return Boolean(isInsideWebSpotlight && element && element.hasAttribute(MetadataAttribute.AddButton));\r\n}\r\n/**\r\n * Get HighlightType based on the HTML element data-attributes.\r\n *\r\n * @param {HTMLElement | null} element\r\n * @returns {HighlightType}\r\n */\r\nexport function getHighlightTypeForElement(element) {\r\n    if (!element || isFeatureDisabledForElement(element, DisableableFeature.Highlight)) {\r\n        return HighlightType.None;\r\n    }\r\n    // treat node as element if it has element codename attribute\r\n    if (element.hasAttribute(DataAttribute.ElementCodename)) {\r\n        return HighlightType.Element;\r\n    }\r\n    // else treat node as content component if it has component id attribute\r\n    else if (element.hasAttribute(DataAttribute.ComponentId)) {\r\n        return HighlightType.ContentComponent;\r\n    }\r\n    // else treat node as content item if it has item id attribute\r\n    else if (element.hasAttribute(DataAttribute.ItemId)) {\r\n        return HighlightType.ContentItem;\r\n    }\r\n    return HighlightType.None;\r\n}\r\nfunction isFeatureDisabledForElement(element, feature) {\r\n    var _a;\r\n    const attribute = element.getAttribute(MetadataAttribute.DisableFeatures);\r\n    return (_a = attribute === null || attribute === void 0 ? void 0 : attribute.toLowerCase().includes(feature)) !== null && _a !== void 0 ? _a : false;\r\n}\r\n//# sourceMappingURL=customElements.js.map","import { ButtonType } from './KSLButtonElement';\r\nimport { IconName } from './KSLIconElement';\r\nimport { assert } from '../utils/assert';\r\nimport { getHighlightTypeForElement, HighlightType } from '../utils/customElements';\r\nimport { ElementPositionOffset, KSLPositionedElement } from './abstract/KSLPositionedElement';\r\nimport { KSLContainerElement } from './KSLContainerElement';\r\nimport { createTemplateForCustomElement } from '../utils/node';\r\nimport { parseEditButtonDataAttributes } from '../utils/dataAttributes';\r\nimport { Logger } from '../lib/Logger';\r\nimport { Colors } from './tokens/colors';\r\nimport { Shadows } from './tokens/shadows';\r\nimport { BaseZIndex } from './constants/zIndex';\r\nconst templateHTML = `\r\n  <style>\r\n    :host,\r\n    :host * {\r\n      box-sizing: border-box;\r\n    }\r\n    \r\n    :host {\r\n      display: block;\r\n      position: absolute;\r\n      pointer-events: none;\r\n      touch-action: none;\r\n      min-height: 40px;\r\n      min-width: 40px;\r\n      width: 100%;\r\n      height: 100%;\r\n      border: 2px dashed;\r\n      border-color: var(--ksl-color-primary-transparent, ${Colors.PrimaryTransparent});\r\n      border-radius: 5px;\r\n    }\r\n    \r\n    :host([hidden]) {\r\n      display: none;\r\n    }\r\n    \r\n    :host(:hover),\r\n    :host([selected]) {\r\n      border-color: var(--ksl-color-primary, ${Colors.Primary});\r\n      z-index: calc(var(--ksl-z-index, ${BaseZIndex}) + 10);\r\n    }\r\n    \r\n    :host(:focus) {\r\n      outline: none;\r\n    }\r\n    \r\n    .ksl-highlight__toolbar {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: center;\r\n      align-items: center;\r\n      pointer-events: all;\r\n      touch-action: auto;\r\n      min-height: 40px;\r\n      max-height: 40px;\r\n      border-radius: 8px;\r\n      background-color: var(--ksl-color-background-default, ${Colors.BackgroundDefault});\r\n      z-index: var(--ksl-z-index, ${BaseZIndex});\r\n      padding: 8px;\r\n      box-shadow: var(--ksl-shadow-default, ${Shadows.Default});\r\n    }\r\n    \r\n    .ksl-highlight__toolbar:hover {\r\n      z-index: calc(var(--ksl-z-index, ${BaseZIndex}) + 10);\r\n    }\r\n    \r\n    .ksl-highlight__toolbar-button + .ksl-highlight__toolbar-button {\r\n      margin-left: 4px;\r\n    }\r\n  </style>\r\n  <div id=\"ksl-toolbar\" class=\"ksl-highlight__toolbar\">\r\n    <ksl-button \r\n      id=\"ksl-edit\" \r\n      class=\"ksl-highlight__toolbar-button\"\r\n      type=\"${ButtonType.Quinary}\"\r\n      tooltip-position=\"${ElementPositionOffset.BottomEnd}\"\r\n    >\r\n      <ksl-icon icon-name=\"${IconName.Edit}\" />\r\n    </ksl-button>\r\n  </div>\r\n`;\r\nexport class KSLHighlightElement extends KSLPositionedElement {\r\n    constructor() {\r\n        super();\r\n        this.attachTo = (node) => {\r\n            this.unregisterTargetNodeListeners();\r\n            super.attachTo(node);\r\n            const type = this.type;\r\n            this.hidden = type === HighlightType.None;\r\n            this.editButtonRef.tooltipMessage = KSLHighlightElement.getEditButtonTooltip(type);\r\n            if (this.targetRef) {\r\n                this.targetRef.addEventListener('mousemove', this.handleTargetNodeMouseEnter);\r\n                this.targetRef.addEventListener('mouseleave', this.handleTargetNodeMouseLeave);\r\n                this.targetRef.addEventListener('click', this.handleEditButtonClick);\r\n            }\r\n        };\r\n        this.adjustPosition = () => {\r\n            if (!this.targetRef || !this.offsetParent) {\r\n                return;\r\n            }\r\n            if (!(this.offsetParent instanceof KSLContainerElement)) {\r\n                Logger.warn('KSLHighlightElement: should be located inside KSLContainerElement to be positioned properly.');\r\n            }\r\n            const offsetParentRect = this.offsetParent.getBoundingClientRect();\r\n            const targetRect = this.targetRef.getBoundingClientRect();\r\n            this.style.top = `${targetRect.top - offsetParentRect.top}px`;\r\n            this.style.left = `${targetRect.left - offsetParentRect.left}px`;\r\n            this.style.width = `${targetRect.width}px`;\r\n            this.style.height = `${targetRect.height}px`;\r\n        };\r\n        this.unregisterTargetNodeListeners = () => {\r\n            if (this.targetRef) {\r\n                this.targetRef.removeEventListener('mousemove', this.handleTargetNodeMouseEnter);\r\n                this.targetRef.removeEventListener('mouseleave', this.handleTargetNodeMouseLeave);\r\n                this.targetRef.removeEventListener('click', this.handleEditButtonClick);\r\n            }\r\n        };\r\n        this.handleTargetNodeMouseEnter = () => {\r\n            this.selected = true;\r\n        };\r\n        this.handleTargetNodeMouseLeave = () => {\r\n            this.selected = false;\r\n        };\r\n        this.handleEditButtonClick = (event) => {\r\n            assert(this.targetRef, 'Target node is not set for this highlight.');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            const dataAttributes = parseEditButtonDataAttributes(this.targetRef);\r\n            this.dispatchEditEvent(dataAttributes);\r\n        };\r\n        this.dispatchEditEvent = (data) => {\r\n            assert(this.targetRef, 'Target node is not set for this highlight element.');\r\n            const customEvent = new CustomEvent('ksl:highlight:edit', {\r\n                detail: {\r\n                    data,\r\n                    targetNode: this.targetRef,\r\n                },\r\n            });\r\n            this.dispatchEvent(customEvent);\r\n        };\r\n        assert(this.shadowRoot, 'Shadow root must be always accessible in \"open\" mode.');\r\n        this.editButtonRef = this.shadowRoot.querySelector('#ksl-edit');\r\n    }\r\n    static get is() {\r\n        return 'ksl-highlight';\r\n    }\r\n    get type() {\r\n        return getHighlightTypeForElement(this.targetRef);\r\n    }\r\n    get selected() {\r\n        return this.hasAttribute('selected');\r\n    }\r\n    set selected(value) {\r\n        this.updateAttribute('selected', value);\r\n    }\r\n    static initializeTemplate() {\r\n        return createTemplateForCustomElement(templateHTML);\r\n    }\r\n    static getEditButtonTooltip(type) {\r\n        switch (type) {\r\n            case HighlightType.Element:\r\n                return 'Edit element';\r\n            case HighlightType.ContentComponent:\r\n                return 'Edit component';\r\n            case HighlightType.ContentItem:\r\n                return 'Edit item';\r\n            default:\r\n                return 'Edit';\r\n        }\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        this.editButtonRef.addEventListener('click', this.handleEditButtonClick);\r\n    }\r\n    disconnectedCallback() {\r\n        super.connectedCallback();\r\n        this.editButtonRef.removeEventListener('click', this.handleEditButtonClick);\r\n        this.unregisterTargetNodeListeners();\r\n    }\r\n}\r\n//# sourceMappingURL=KSLHighlightElement.js.map","import { KSLCustomElement } from './abstract/KSLCustomElement';\r\nimport { KSLAddButtonElement } from './KSLAddButtonElement';\r\nimport { KSLHighlightElement } from './KSLHighlightElement';\r\nimport { createTemplateForCustomElement, getRenderingRootMetadata, getTotalScrollOffset } from '../utils/node';\r\nimport { BaseZIndex } from './constants/zIndex';\r\nconst templateHTML = `\r\n  <style>\r\n    :host {\r\n      display: block;\r\n      position: absolute;\r\n      box-sizing: border-box;\r\n      top: 0;\r\n      right: 0;\r\n      left: 0;\r\n      bottom: 0;\r\n      pointer-events: none;\r\n      touch-action: none;\r\n      z-index: var(--ksl-z-index, ${BaseZIndex});\r\n    }\r\n    \r\n    :host([clipped]) {\r\n      overflow: hidden;\r\n    }\r\n  </style>\r\n  <slot></slot>\r\n`;\r\nexport class KSLContainerElement extends KSLCustomElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._boundingClientRect = null;\r\n        this.createHighlightForElement = (element) => {\r\n            const highlight = document.createElement(KSLHighlightElement.is);\r\n            highlight.attachTo(element);\r\n            this.appendChild(highlight);\r\n            return highlight;\r\n        };\r\n        this.createAddButtonForElement = (element) => {\r\n            const button = document.createElement(KSLAddButtonElement.is);\r\n            button.attachTo(element);\r\n            this.appendChild(button);\r\n            return button;\r\n        };\r\n        this.adjustPosition = () => {\r\n            const parent = this.parentElement;\r\n            if (!parent) {\r\n                return; // No need to adjust position when element is not mounted.\r\n            }\r\n            const metadata = getRenderingRootMetadata(parent);\r\n            if (!metadata.isPositioned) {\r\n                // When parent element is not positioned it means that container\r\n                // will be positioned relatively to some other element. That is why we need\r\n                // to keep in mind all of the scroll offsets on the way to this relative element.\r\n                const [scrollOffsetTop, scrollOffsetLeft] = getTotalScrollOffset(parent);\r\n                this.style.height = `${parent.clientHeight}px`;\r\n                this.style.width = `${parent.clientWidth}px`;\r\n                this.style.top = `${parent.offsetTop - scrollOffsetTop}px`;\r\n                this.style.left = `${parent.offsetLeft - scrollOffsetLeft}px`;\r\n                // When parent element is not positioned and its content is clipped\r\n                // we need to hide overflow of the container as well to prevent\r\n                // highlights from appearing for overflown content.\r\n                this.updateAttribute('clipped', Boolean(metadata.isContentClipped));\r\n            }\r\n            this.getBoundingClientRect(true);\r\n        };\r\n    }\r\n    static get is() {\r\n        return 'ksl-container';\r\n    }\r\n    static initializeTemplate() {\r\n        return createTemplateForCustomElement(templateHTML);\r\n    }\r\n    getBoundingClientRect(shouldRecompute = false) {\r\n        if (!this._boundingClientRect || shouldRecompute) {\r\n            this._boundingClientRect = super.getBoundingClientRect();\r\n        }\r\n        return this._boundingClientRect;\r\n    }\r\n}\r\n//# sourceMappingURL=KSLContainerElement.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { ButtonType, KSLButtonElement } from './KSLButtonElement';\r\nimport { IconName } from './KSLIconElement';\r\nimport { assert } from '../utils/assert';\r\nimport { KSLPopoverElement } from './KSLPopoverElement';\r\nimport { ElementPositionOffset, KSLPositionedElement } from './abstract/KSLPositionedElement';\r\nimport { KSLContainerElement } from './KSLContainerElement';\r\nimport { createTemplateForCustomElement } from '../utils/node';\r\nimport { MetadataAttribute, parseAddButtonDataAttributes } from '../utils/dataAttributes';\r\nimport { AddButtonAction, AddButtonElementType, AddButtonPermission, AddButtonPermissionCheckResult, } from '../lib/IFrameCommunicatorTypes';\r\nimport { Logger } from '../lib/Logger';\r\nimport { BaseZIndex } from './constants/zIndex';\r\nconst ContentIsPublishedTooltip = 'Content is published';\r\nconst DefaultTooltipMessage = 'Insert...';\r\nconst getCreateLinkedItemTooltip = (canUserCreateLinkedItem) => canUserCreateLinkedItem ? 'Create new item' : 'Your role cannot create items from the allowed types';\r\nvar PopoverButtonId;\r\n(function (PopoverButtonId) {\r\n    PopoverButtonId[\"CreateComponent\"] = \"create-component\";\r\n    PopoverButtonId[\"CreateLinkedItem\"] = \"create-linked-item\";\r\n    PopoverButtonId[\"InsertLinkedItem\"] = \"insert-linked-item\";\r\n})(PopoverButtonId || (PopoverButtonId = {}));\r\nconst getPopoverHtml = ({ elementType, isParentPublished, permissions }) => {\r\n    const canUserCreateLinkedItem = permissions.get(AddButtonPermission.CreateNew) === AddButtonPermissionCheckResult.Ok;\r\n    return `\r\n    <style>\r\n    .ksl-add-button__popover-button + .ksl-add-button__popover-button {\r\n      margin-left: 4px;\r\n    }\r\n  </style>\r\n  <ksl-button\r\n    id=\"${PopoverButtonId.InsertLinkedItem}\"\r\n    class=\"ksl-add-button__popover-button\"\r\n    type=\"${ButtonType.Quinary}\"\r\n    tooltip-position=\"${ElementPositionOffset.Top}\"\r\n    tooltip-message=\"${isParentPublished ? ContentIsPublishedTooltip : 'Insert existing item'}\"\r\n    ${isParentPublished && 'disabled'}\r\n  >\r\n    <ksl-icon icon-name=\"${IconName.Puzzle}\"/>\r\n  </ksl-button>\r\n  <ksl-button\r\n    id=\"${PopoverButtonId.CreateLinkedItem}\"\r\n    class=\"ksl-add-button__popover-button\"\r\n    type=\"${ButtonType.Quinary}\"\r\n    tooltip-position=\"${ElementPositionOffset.Top}\"\r\n    tooltip-message=\"${isParentPublished ? ContentIsPublishedTooltip : getCreateLinkedItemTooltip(canUserCreateLinkedItem)}\"\r\n    ${(isParentPublished || !canUserCreateLinkedItem) && 'disabled'}\r\n    ${elementType !== AddButtonElementType.LinkedItems && 'hidden'}\r\n  >\r\n    <ksl-icon icon-name=\"${IconName.PlusPuzzle}\"/>\r\n  </ksl-button>\r\n  <ksl-button\r\n    id=\"${PopoverButtonId.CreateComponent}\"\r\n    class=\"ksl-add-button__popover-button\"\r\n    type=\"${ButtonType.Quinary}\"\r\n    tooltip-position=\"${ElementPositionOffset.Top}\"\r\n    tooltip-message=\"${isParentPublished ? ContentIsPublishedTooltip : 'Insert new component'}\"\r\n    ${isParentPublished && 'disabled'}\r\n    ${elementType !== AddButtonElementType.RichText && 'hidden'}\r\n  >\r\n    <ksl-icon icon-name=\"${IconName.CollapseScheme}\"/>\r\n  </ksl-button>\r\n`;\r\n};\r\nconst templateHTML = `\r\n  <style>\r\n    :host {\r\n      display: inline-block;\r\n      position: absolute;\r\n      z-index: calc(var(--ksl-z-index, ${BaseZIndex}) + 20);\r\n      pointer-events: all;\r\n      touch-action: initial;\r\n    }\r\n    \r\n    :host(:focus) {\r\n      outline: none;\r\n    }\r\n  </style>\r\n  <ksl-button\r\n      type=\"${ButtonType.Primary}\"\r\n      tooltip-position=\"${ElementPositionOffset.Top}\"\r\n  >\r\n    <ksl-icon icon-name=\"${IconName.Plus}\"/>\r\n  </ksl-button>\r\n`;\r\nexport class KSLAddButtonElement extends KSLPositionedElement {\r\n    constructor() {\r\n        super();\r\n        this.popoverRef = null;\r\n        this.adjustPosition = () => {\r\n            if (!this.targetRef || !this.offsetParent) {\r\n                return;\r\n            }\r\n            if (!(this.offsetParent instanceof KSLContainerElement)) {\r\n                console.warn('KSLAddButtonElement: should be located inside KSLContainerElement to be positioned properly.');\r\n            }\r\n            const offsetParentRect = this.offsetParent.getBoundingClientRect();\r\n            const targetRect = this.targetRef.getBoundingClientRect();\r\n            const thisRect = this.getBoundingClientRect();\r\n            const verticalOffset = this.calculateTopOffset(thisRect, targetRect);\r\n            const horizontalOffset = this.calculateLeftOffset(thisRect, targetRect);\r\n            this.style.top = `${targetRect.top - offsetParentRect.top + verticalOffset}px`;\r\n            this.style.left = `${targetRect.left - offsetParentRect.left + horizontalOffset}px`;\r\n        };\r\n        this.handleClick = (event) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.popoverRef) {\r\n                return;\r\n            }\r\n            assert(this.targetRef, 'Target node is not set for this add button.');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            this.buttonRef.loading = true;\r\n            const data = parseAddButtonDataAttributes(this.targetRef);\r\n            try {\r\n                const eventData = { data, targetNode: this.targetRef };\r\n                const response = yield this.dispatchAsyncEvent('ksl:add-button:initial', eventData);\r\n                const { permissions } = response;\r\n                const isUserMissingPermissions = !permissions ||\r\n                    permissions.get(AddButtonPermission.ViewParent) !== AddButtonPermissionCheckResult.Ok ||\r\n                    permissions.get(AddButtonPermission.Edit) !== AddButtonPermissionCheckResult.Ok;\r\n                const areComponentsForbidden = permissions.get(AddButtonPermission.CreateNew) === AddButtonPermissionCheckResult.RteWithForbiddenComponents;\r\n                if (isUserMissingPermissions || areComponentsForbidden) {\r\n                    this.buttonRef.loading = false;\r\n                    this.buttonRef.disabled = true;\r\n                    this.buttonRef.tooltipMessage = isUserMissingPermissions\r\n                        ? 'You are not allowed to add content here'\r\n                        : \"Components and items can't be added here\";\r\n                }\r\n                else {\r\n                    this.buttonRef.loading = false;\r\n                    this.buttonRef.disabled = false;\r\n                    this.buttonRef.tooltipMessage = DefaultTooltipMessage;\r\n                    this.showPopover(response);\r\n                }\r\n            }\r\n            catch (reason) {\r\n                Logger.error(reason);\r\n                this.buttonRef.loading = false;\r\n                this.buttonRef.disabled = true;\r\n                if (reason && typeof reason.message === 'string') {\r\n                    this.buttonRef.tooltipMessage = reason.message;\r\n                }\r\n                else {\r\n                    this.buttonRef.tooltipMessage = 'Something went wrong';\r\n                }\r\n            }\r\n        });\r\n        this.handleClickOutside = (event) => {\r\n            if (!this.popoverRef || !(event.target instanceof Element)) {\r\n                return;\r\n            }\r\n            const clickedInside = this.isSameNode(event.target) || this.contains(event.target);\r\n            if (!clickedInside) {\r\n                this.hidePopover();\r\n            }\r\n        };\r\n        this.showPopover = (response) => {\r\n            assert(this.shadowRoot, 'Shadow root must be available in \"open\" mode.');\r\n            if (this.popoverRef) {\r\n                this.hidePopover();\r\n            }\r\n            this.buttonRef.tooltipPosition = ElementPositionOffset.Bottom;\r\n            const popover = document.createElement(KSLPopoverElement.is);\r\n            popover.innerHTML = getPopoverHtml(response);\r\n            const popoverParent = this.shadowRoot;\r\n            this.popoverRef = popoverParent.appendChild(popover);\r\n            this.popoverRef.position = ElementPositionOffset.Top;\r\n            this.popoverRef.attachTo(this);\r\n            this.addPopoverEventListeners(response.elementType);\r\n            this.popoverRef.visible = true;\r\n            this.popoverRef.adjustPosition();\r\n        };\r\n        this.hidePopover = () => {\r\n            this.buttonRef.tooltipPosition = ElementPositionOffset.Top;\r\n            if (this.popoverRef) {\r\n                this.removePopoverEventListeners();\r\n                this.popoverRef.visible = false;\r\n                this.popoverRef.remove();\r\n                this.popoverRef = null;\r\n            }\r\n        };\r\n        this.addPopoverEventListeners = (elementType) => {\r\n            if (!this.popoverRef) {\r\n                return;\r\n            }\r\n            const createComponentButtonRef = this.popoverRef.querySelector(`#${PopoverButtonId.CreateComponent}`);\r\n            const createLinkedItemButtonRef = this.popoverRef.querySelector(`#${PopoverButtonId.CreateLinkedItem}`);\r\n            const insertLinkedItemButtonRef = this.popoverRef.querySelector(`#${PopoverButtonId.InsertLinkedItem}`);\r\n            if (createComponentButtonRef && elementType === AddButtonElementType.RichText) {\r\n                createComponentButtonRef.addEventListener('click', this.handleCreateComponentClick);\r\n            }\r\n            if (createLinkedItemButtonRef && elementType === AddButtonElementType.LinkedItems) {\r\n                createLinkedItemButtonRef.addEventListener('click', this.handleCreateLinkedItemClick);\r\n            }\r\n            if (insertLinkedItemButtonRef) {\r\n                insertLinkedItemButtonRef.addEventListener('click', this.handleInsertLinkedItemClick);\r\n            }\r\n        };\r\n        this.removePopoverEventListeners = () => {\r\n            if (!this.popoverRef) {\r\n                return;\r\n            }\r\n            const createComponentButtonRef = this.popoverRef.querySelector(`#${PopoverButtonId.CreateComponent}`);\r\n            const createLinkedItemButtonRef = this.popoverRef.querySelector(`#${PopoverButtonId.CreateLinkedItem}`);\r\n            const insertLinkedItemButtonRef = this.popoverRef.querySelector(`#${PopoverButtonId.InsertLinkedItem}`);\r\n            if (createComponentButtonRef) {\r\n                createComponentButtonRef.removeEventListener('click', this.handleCreateComponentClick);\r\n            }\r\n            if (createLinkedItemButtonRef) {\r\n                createLinkedItemButtonRef.removeEventListener('click', this.handleCreateLinkedItemClick);\r\n            }\r\n            if (insertLinkedItemButtonRef) {\r\n                insertLinkedItemButtonRef.removeEventListener('click', this.handleInsertLinkedItemClick);\r\n            }\r\n        };\r\n        this.handleCreateComponentClick = (event) => {\r\n            this.handleAddActionClick(event, AddButtonAction.CreateComponent);\r\n        };\r\n        this.handleCreateLinkedItemClick = (event) => {\r\n            this.handleAddActionClick(event, AddButtonAction.CreateLinkedItem);\r\n        };\r\n        this.handleInsertLinkedItemClick = (event) => {\r\n            this.handleAddActionClick(event, AddButtonAction.InsertLinkedItem);\r\n        };\r\n        this.handleAddActionClick = (event, action) => {\r\n            assert(this.targetRef, 'Target node is not set for this add button.');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            const data = parseAddButtonDataAttributes(this.targetRef);\r\n            const customEvent = new CustomEvent('ksl:add-button:action', {\r\n                detail: {\r\n                    data: Object.assign(Object.assign({}, data), { action }),\r\n                    targetNode: this.targetRef,\r\n                },\r\n            });\r\n            this.hidePopover();\r\n            this.dispatchEvent(customEvent);\r\n        };\r\n        assert(this.shadowRoot, 'Shadow root must be available in \"open\" mode.');\r\n        this.buttonRef = this.shadowRoot.querySelector(KSLButtonElement.is);\r\n    }\r\n    static get is() {\r\n        return 'ksl-add-button';\r\n    }\r\n    get position() {\r\n        var _a, _b;\r\n        return (_b = (_a = this.targetRef) === null || _a === void 0 ? void 0 : _a.getAttribute(MetadataAttribute.AddButtonRenderPosition)) !== null && _b !== void 0 ? _b : ElementPositionOffset.Bottom;\r\n    }\r\n    static initializeTemplate() {\r\n        return createTemplateForCustomElement(templateHTML);\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        window.addEventListener('click', this.handleClickOutside, { capture: true });\r\n        this.buttonRef.addEventListener('click', this.handleClick);\r\n        this.buttonRef.tooltipMessage = DefaultTooltipMessage;\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        window.removeEventListener('click', this.handleClickOutside, { capture: true });\r\n        this.buttonRef.removeEventListener('click', this.handleClick);\r\n        this.hidePopover();\r\n    }\r\n    calculateTopOffset(thisRect, targetRect) {\r\n        const offset = super.calculateTopOffset(thisRect, targetRect);\r\n        switch (this.position) {\r\n            case ElementPositionOffset.TopStart:\r\n            case ElementPositionOffset.Top:\r\n            case ElementPositionOffset.TopEnd:\r\n                return offset / 2;\r\n            case ElementPositionOffset.BottomStart:\r\n            case ElementPositionOffset.Bottom:\r\n            case ElementPositionOffset.BottomEnd:\r\n                return offset - thisRect.height / 2;\r\n            default:\r\n                return offset;\r\n        }\r\n    }\r\n    calculateLeftOffset(thisRect, targetRect) {\r\n        const offset = super.calculateLeftOffset(thisRect, targetRect);\r\n        switch (this.position) {\r\n            case ElementPositionOffset.LeftStart:\r\n            case ElementPositionOffset.Left:\r\n            case ElementPositionOffset.LeftEnd:\r\n                return offset / 2;\r\n            case ElementPositionOffset.RightStart:\r\n            case ElementPositionOffset.Right:\r\n            case ElementPositionOffset.RightEnd:\r\n                return targetRect.width - thisRect.width / 2;\r\n            default:\r\n                return offset;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=KSLAddButtonElement.js.map","import { KSLAddButtonElement } from './KSLAddButtonElement';\r\nimport { KSLContainerElement } from './KSLContainerElement';\r\nimport { KSLButtonElement } from './KSLButtonElement';\r\nimport { KSLIconElement } from './KSLIconElement';\r\nimport { KSLTooltipElement } from './KSLTooltipElement';\r\nimport { KSLHighlightElement } from './KSLHighlightElement';\r\nimport { KSLPopoverElement } from './KSLPopoverElement';\r\nconst webComponents = [\r\n    KSLIconElement,\r\n    KSLButtonElement,\r\n    KSLAddButtonElement,\r\n    KSLHighlightElement,\r\n    KSLContainerElement,\r\n    KSLTooltipElement,\r\n    KSLPopoverElement,\r\n];\r\nconst webComponentTags = webComponents.map((component) => component.is);\r\n/**\r\n * Define all web components if it is possible.\r\n *\r\n * @returns {Promise<void[]>}\r\n */\r\nexport function defineAllRequiredWebComponents() {\r\n    const allDefined = webComponents.map((webComponent) => webComponent.define());\r\n    return Promise.all(allDefined);\r\n}\r\n/**\r\n * Check if element is a web component based on its tag name.\r\n *\r\n * @param {HTMLElement} element\r\n * @returns {boolean}\r\n */\r\nexport function isElementWebComponent(element) {\r\n    return webComponentTags.includes(element.tagName.toLowerCase());\r\n}\r\n//# sourceMappingURL=components.js.map","import { groupElementsByRenderingRoot } from '../utils/node';\r\nimport { KSLContainerElement } from '../web-components/KSLContainerElement';\r\nimport { shouldElementHaveHighlight, shouldElementHaveAddButton } from '../utils/customElements';\r\nexport class SmartLinkRenderer {\r\n    constructor() {\r\n        this.render = (visibleElements, observedElements) => {\r\n            var _a, _b;\r\n            if (observedElements.size === 0) {\r\n                this.clear();\r\n            }\r\n            else {\r\n                const newAddButtonByElement = new Map();\r\n                const newHighlightByElement = new Map();\r\n                // Group elements by their rendering roots to avoid unnecessary re-calculations (e.g. reposition container only once\r\n                // instead of repositioning it for every child, calculating bounding client rects, etc.).\r\n                const elementsByRenderingRoot = groupElementsByRenderingRoot(visibleElements);\r\n                for (const [root, elements] of elementsByRenderingRoot.entries()) {\r\n                    const container = this.createContainerIfNotExist(root);\r\n                    container.adjustPosition();\r\n                    for (const element of elements) {\r\n                        // This check is needed to prevent highlight rendering for the \"flat\" elements (height or/and width === 0),\r\n                        // because those elements are basically invisible and cannot be clicked.\r\n                        const isFlat = element.offsetHeight === 0 || element.offsetHeight === 0;\r\n                        if (!isFlat && shouldElementHaveHighlight(element)) {\r\n                            const highlight = (_a = this.highlightByElement.get(element)) !== null && _a !== void 0 ? _a : container.createHighlightForElement(element);\r\n                            highlight.adjustPosition();\r\n                            // We are creating a new highlight by element map to be able to compare it with an old one to find out\r\n                            // which elements have been removed before renders and remove their highlights from the DOM.\r\n                            newHighlightByElement.set(element, highlight);\r\n                            this.highlightByElement.delete(element);\r\n                        }\r\n                        if (shouldElementHaveAddButton(element)) {\r\n                            const button = (_b = this.addButtonByElement.get(element)) !== null && _b !== void 0 ? _b : container.createAddButtonForElement(element);\r\n                            button.adjustPosition();\r\n                            // We are creating a new add button by element map to be able to compare it with an old one to find out\r\n                            // which elements have been removed before renders and remove their add buttons from the DOM.\r\n                            newAddButtonByElement.set(element, button);\r\n                            this.addButtonByElement.delete(element);\r\n                        }\r\n                    }\r\n                }\r\n                // All highlights that are left in the old highlightByElement map are the remnants of the old render.\r\n                // We check if they are still observed and relevant for the renderer and if not they can be removed.\r\n                for (const [element, highlight] of this.highlightByElement.entries()) {\r\n                    if (!observedElements.has(element)) {\r\n                        highlight.remove();\r\n                        this.highlightByElement.delete(element);\r\n                    }\r\n                    else {\r\n                        newHighlightByElement.set(element, highlight);\r\n                    }\r\n                }\r\n                // All add buttons that are left in the old addButtonByElement map are the remnants of the old render.\r\n                // We check if they are still observed and relevant for the renderer and if not they can be removed.\r\n                for (const [element, addButton] of this.addButtonByElement.entries()) {\r\n                    if (!observedElements.has(element)) {\r\n                        addButton.remove();\r\n                        this.addButtonByElement.delete(element);\r\n                    }\r\n                    else {\r\n                        newAddButtonByElement.set(element, addButton);\r\n                    }\r\n                }\r\n                // All containers that have no children can be removed because they are not used by any highlight, or a add button.\r\n                for (const [parent, container] of this.containerByRenderingRoot.entries()) {\r\n                    if (container.children.length === 0) {\r\n                        container.remove();\r\n                        this.containerByRenderingRoot.delete(parent);\r\n                    }\r\n                }\r\n                this.highlightByElement = newHighlightByElement;\r\n                this.addButtonByElement = newAddButtonByElement;\r\n            }\r\n        };\r\n        this.destroy = () => {\r\n            this.clear();\r\n            this.defaultContainer.remove();\r\n        };\r\n        this.clear = () => {\r\n            for (const [element, addButton] of this.addButtonByElement.entries()) {\r\n                addButton.remove();\r\n                this.addButtonByElement.delete(element);\r\n            }\r\n            for (const [element, highlight] of this.highlightByElement.entries()) {\r\n                highlight.remove();\r\n                this.highlightByElement.delete(element);\r\n            }\r\n            for (const [root, container] of this.containerByRenderingRoot.entries()) {\r\n                container.remove();\r\n                this.containerByRenderingRoot.delete(root);\r\n            }\r\n            this.highlightByElement = new Map();\r\n            this.containerByRenderingRoot = new Map();\r\n            this.addButtonByElement = new Map();\r\n            this.defaultContainer.innerHTML = '';\r\n        };\r\n        this.createContainerIfNotExist = (root) => {\r\n            // if root is not specified or root is body\r\n            if (!root || root === document.body) {\r\n                return this.defaultContainer;\r\n            }\r\n            let container = this.containerByRenderingRoot.get(root);\r\n            if (container) {\r\n                return container;\r\n            }\r\n            container = document.createElement(KSLContainerElement.is);\r\n            root.appendChild(container);\r\n            this.containerByRenderingRoot.set(root, container);\r\n            return container;\r\n        };\r\n        this.containerByRenderingRoot = new Map();\r\n        this.highlightByElement = new Map();\r\n        this.addButtonByElement = new Map();\r\n        this.defaultContainer = SmartLinkRenderer.createAndMountDefaultContainer();\r\n    }\r\n    static createAndMountDefaultContainer() {\r\n        const container = document.createElement(KSLContainerElement.is);\r\n        window.document.body.appendChild(container);\r\n        return container;\r\n    }\r\n}\r\n//# sourceMappingURL=SmartLinkRenderer.js.map","import { Logger } from '../lib/Logger';\r\nfunction logErrors(errors) {\r\n    errors.forEach((error) => {\r\n        Logger.error(error);\r\n    });\r\n}\r\nexport function validateContentItemClickEditMessageData(data) {\r\n    const errors = [];\r\n    if (!data.projectId) {\r\n        errors.push('Project ID is required to handle element click.');\r\n    }\r\n    if (!data.languageCodename) {\r\n        errors.push('Language codename is required to handle element click.');\r\n    }\r\n    if (!data.itemId) {\r\n        errors.push('Item ID is required to handle element click.');\r\n    }\r\n    logErrors(errors);\r\n    return errors.length === 0;\r\n}\r\nexport function validateElementClickMessageData(data) {\r\n    if (!data.elementCodename) {\r\n        Logger.error('Element codename is required to handle element click.');\r\n        return false;\r\n    }\r\n    return validateContentItemClickEditMessageData(data);\r\n}\r\nexport function validateContentComponentClickMessageData(data) {\r\n    if (!data.contentComponentId) {\r\n        Logger.error('Content component ID is required to handle element click.');\r\n        return false;\r\n    }\r\n    return validateContentItemClickEditMessageData(data);\r\n}\r\nexport function validateAddInitialMessageData(data) {\r\n    const errors = [];\r\n    if (!data.projectId) {\r\n        errors.push('Project ID is required to handle add button click.');\r\n    }\r\n    if (!data.languageCodename) {\r\n        errors.push('Language codename is required to handle add button click.');\r\n    }\r\n    if (!data.itemId) {\r\n        errors.push('Item ID is required to handle add button click.');\r\n    }\r\n    if (!data.elementCodename) {\r\n        errors.push('Element codename is required to handle add button click.');\r\n    }\r\n    if (!data.insertPosition) {\r\n        errors.push('Insert position (placement, targetId) is required to handle add button click.');\r\n    }\r\n    logErrors(errors);\r\n    return errors.length === 0;\r\n}\r\nexport function validateAddActionMessageData(data) {\r\n    if (!data.action) {\r\n        Logger.error('Action is required to handle add button click.');\r\n        return false;\r\n    }\r\n    return validateAddInitialMessageData(data);\r\n}\r\n//# sourceMappingURL=validation.js.map","function buildItemLink(projectId, languageCodename, itemId) {\r\n    return `https://app.kontent.ai/goto/edit-item/project/${projectId}/variant-codename/${languageCodename}/item/${itemId}`;\r\n}\r\nexport function buildElementLink(projectId, languageCodename, itemId, elementCodename) {\r\n    return `${buildItemLink(projectId, languageCodename, itemId)}/element/${elementCodename}`;\r\n}\r\nexport function buildComponentElementLink(projectId, languageCodename, itemId, contentComponentId, componentElementCodename) {\r\n    return `${buildItemLink(projectId, languageCodename, itemId)}/component/${contentComponentId}/element/${componentElementCodename}`;\r\n}\r\nexport function buildKontentLink(data) {\r\n    if (data.contentComponentId) {\r\n        return buildComponentElementLink(data.projectId, data.languageCodename, data.itemId, data.contentComponentId, data.elementCodename);\r\n    }\r\n    else {\r\n        return buildElementLink(data.projectId, data.languageCodename, data.itemId, data.elementCodename);\r\n    }\r\n}\r\n//# sourceMappingURL=link.js.map","import { isElementWebComponent } from '../web-components/components';\r\nimport { AddButtonElementType, IFrameMessageType, } from './IFrameCommunicatorTypes';\r\nimport { SmartLinkRenderer } from './SmartLinkRenderer';\r\nimport { getAugmentableDescendants, isElementAugmentable } from '../utils/customElements';\r\nimport { validateAddActionMessageData, validateAddInitialMessageData, validateContentComponentClickMessageData, validateContentItemClickEditMessageData, validateElementClickMessageData, } from '../utils/validation';\r\nimport { ConfigurationManager } from './ConfigurationManager';\r\nimport { buildKontentLink } from '../utils/link';\r\nimport { Logger } from './Logger';\r\nimport { InvalidEnvironmentError } from '../utils/errors';\r\nexport class NodeSmartLinkProvider {\r\n    constructor(iframeCommunicator) {\r\n        this.iframeCommunicator = iframeCommunicator;\r\n        this.enabled = false;\r\n        this.renderingTimeoutId = 0;\r\n        this.observedElements = new Set();\r\n        this.visibleElements = new Set();\r\n        this.toggle = (force) => {\r\n            const shouldEnable = typeof force !== 'undefined' ? force : !this.enabled;\r\n            if (shouldEnable) {\r\n                this.enable();\r\n            }\r\n            else {\r\n                this.disable();\r\n            }\r\n        };\r\n        this.enable = () => {\r\n            if (this.enabled)\r\n                return;\r\n            this.startRenderingInterval();\r\n            this.listenToGlobalEvents();\r\n            this.observeDomMutations();\r\n            this.enabled = true;\r\n        };\r\n        this.disable = () => {\r\n            if (!this.enabled)\r\n                return;\r\n            this.stopRenderingInterval();\r\n            this.unlistenToGlobalEvents();\r\n            this.disconnectObservers();\r\n            this.renderer.clear();\r\n            this.enabled = false;\r\n        };\r\n        this.destroy = () => {\r\n            this.disable();\r\n            this.renderer.destroy();\r\n        };\r\n        this.augmentVisibleElements = () => {\r\n            requestAnimationFrame(() => {\r\n                this.renderer.render(this.visibleElements, this.observedElements);\r\n            });\r\n        };\r\n        /**\r\n         * Start an interval rendering (1s) that will re-render highlights for all visible elements using `setTimeout`.\r\n         * It helps to adjust highlights position even in situations that are currently not supported by\r\n         * the SDK (e.g. element position change w/o animations, some infinite animations and other possible unhandled cases)\r\n         * for better user experience.\r\n         */\r\n        this.startRenderingInterval = () => {\r\n            this.augmentVisibleElements();\r\n            this.renderingTimeoutId = window.setTimeout(this.startRenderingInterval, 1000);\r\n        };\r\n        this.stopRenderingInterval = () => {\r\n            if (this.renderingTimeoutId) {\r\n                clearTimeout(this.renderingTimeoutId);\r\n                this.renderingTimeoutId = 0;\r\n            }\r\n        };\r\n        this.listenToGlobalEvents = () => {\r\n            window.addEventListener('scroll', this.augmentVisibleElements, { capture: true });\r\n            window.addEventListener('resize', this.augmentVisibleElements, { passive: true });\r\n            window.addEventListener('animationend', this.augmentVisibleElements, { passive: true, capture: true });\r\n            window.addEventListener('transitionend', this.augmentVisibleElements, { passive: true, capture: true });\r\n            window.addEventListener('ksl:add-button:initial', this.onAddInitialClick, { capture: true });\r\n            window.addEventListener('ksl:add-button:action', this.onAddActionClick, { capture: true });\r\n            window.addEventListener('ksl:highlight:edit', this.onEditElement, { capture: true });\r\n        };\r\n        this.unlistenToGlobalEvents = () => {\r\n            window.removeEventListener('scroll', this.augmentVisibleElements, { capture: true });\r\n            window.removeEventListener('resize', this.augmentVisibleElements);\r\n            window.removeEventListener('animationend', this.augmentVisibleElements, { capture: true });\r\n            window.removeEventListener('transitionend', this.augmentVisibleElements, { capture: true });\r\n            window.removeEventListener('ksl:add-button:initial', this.onAddInitialClick, { capture: true });\r\n            window.removeEventListener('ksl:add-button:action', this.onAddActionClick, { capture: true });\r\n            window.removeEventListener('ksl:highlight:edit', this.onEditElement, { capture: true });\r\n        };\r\n        this.observeDomMutations = () => {\r\n            if (this.enabled)\r\n                return;\r\n            this.mutationObserver.observe(window.document.body, {\r\n                childList: true,\r\n                subtree: true,\r\n            });\r\n            getAugmentableDescendants(document).forEach((element) => {\r\n                if (element instanceof HTMLElement) {\r\n                    this.observeElementVisibility(element);\r\n                }\r\n            });\r\n        };\r\n        this.disconnectObservers = () => {\r\n            this.mutationObserver.disconnect();\r\n            this.intersectionObserver.disconnect();\r\n            this.observedElements.forEach((element) => {\r\n                this.unobserveElementVisibility(element);\r\n            });\r\n            this.observedElements = new Set();\r\n            this.visibleElements = new Set();\r\n        };\r\n        this.observeElementVisibility = (element) => {\r\n            if (this.observedElements.has(element))\r\n                return;\r\n            this.intersectionObserver.observe(element);\r\n            this.observedElements.add(element);\r\n        };\r\n        this.unobserveElementVisibility = (element) => {\r\n            if (!this.observedElements.has(element))\r\n                return;\r\n            this.intersectionObserver.unobserve(element);\r\n            this.observedElements.delete(element);\r\n            this.visibleElements.delete(element);\r\n        };\r\n        this.onDomMutation = (mutations) => {\r\n            const relevantMutations = mutations.filter((mutation) => {\r\n                const isTypeRelevant = mutation.type === 'childList';\r\n                const isTargetRelevant = mutation.target instanceof HTMLElement && !isElementWebComponent(mutation.target);\r\n                if (!isTypeRelevant || !isTargetRelevant) {\r\n                    return false;\r\n                }\r\n                const hasRelevantAddedNodes = Array.from(mutation.addedNodes).some((node) => node instanceof HTMLElement && !isElementWebComponent(node));\r\n                const hasRelevantRemovedNodes = Array.from(mutation.removedNodes).some((node) => node instanceof HTMLElement && !isElementWebComponent(node));\r\n                return hasRelevantAddedNodes || hasRelevantRemovedNodes;\r\n            });\r\n            for (const mutation of relevantMutations) {\r\n                for (const node of mutation.addedNodes) {\r\n                    if (!(node instanceof HTMLElement))\r\n                        continue;\r\n                    if (isElementAugmentable(node)) {\r\n                        this.observeElementVisibility(node);\r\n                    }\r\n                    for (const element of getAugmentableDescendants(node)) {\r\n                        if (!(element instanceof HTMLElement))\r\n                            continue;\r\n                        this.observeElementVisibility(element);\r\n                    }\r\n                }\r\n                for (const node of mutation.removedNodes) {\r\n                    if (!(node instanceof HTMLElement))\r\n                        continue;\r\n                    if (isElementAugmentable(node)) {\r\n                        this.unobserveElementVisibility(node);\r\n                    }\r\n                    for (const element of getAugmentableDescendants(node)) {\r\n                        if (!(element instanceof HTMLElement))\r\n                            continue;\r\n                        this.unobserveElementVisibility(element);\r\n                    }\r\n                }\r\n            }\r\n            if (relevantMutations.length > 0) {\r\n                this.augmentVisibleElements();\r\n            }\r\n        };\r\n        this.onElementVisibilityChange = (entries) => {\r\n            const filteredEntries = entries.filter((entry) => entry.target instanceof HTMLElement);\r\n            for (const entry of filteredEntries) {\r\n                const target = entry.target;\r\n                if (entry.isIntersecting) {\r\n                    this.visibleElements.add(target);\r\n                }\r\n                else {\r\n                    this.visibleElements.delete(target);\r\n                }\r\n            }\r\n            if (filteredEntries.length > 0) {\r\n                this.augmentVisibleElements();\r\n            }\r\n        };\r\n        this.onEditElement = (event) => {\r\n            var _a, _b;\r\n            const isInsideWebSpotlight = this.configurationManager.isInsideWebSpotlightPreviewIFrame;\r\n            const { data, targetNode } = event.detail;\r\n            const messageData = Object.assign(Object.assign({}, data), { projectId: (_a = data.projectId) !== null && _a !== void 0 ? _a : this.configurationManager.defaultProjectId, languageCodename: (_b = data.languageCodename) !== null && _b !== void 0 ? _b : this.configurationManager.defaultLanguageCodename });\r\n            const messageMetadata = {\r\n                elementRect: targetNode.getBoundingClientRect(),\r\n            };\r\n            if ('elementCodename' in messageData && messageData.elementCodename) {\r\n                if (validateElementClickMessageData(messageData)) {\r\n                    if (isInsideWebSpotlight) {\r\n                        this.iframeCommunicator.sendMessage(IFrameMessageType.ElementClicked, messageData, messageMetadata);\r\n                    }\r\n                    else {\r\n                        const link = buildKontentLink(messageData);\r\n                        window.open(link, '_blank');\r\n                    }\r\n                }\r\n            }\r\n            else if ('contentComponentId' in messageData && messageData.contentComponentId) {\r\n                if (validateContentComponentClickMessageData(messageData)) {\r\n                    if (isInsideWebSpotlight) {\r\n                        this.iframeCommunicator.sendMessage(IFrameMessageType.ContentComponentClicked, messageData, messageMetadata);\r\n                    }\r\n                    else {\r\n                        Logger.warn('Edit buttons for content components are only functional inside Web Spotlight.');\r\n                    }\r\n                }\r\n            }\r\n            else if ('itemId' in messageData && messageData.itemId) {\r\n                if (validateContentItemClickEditMessageData(messageData)) {\r\n                    if (isInsideWebSpotlight) {\r\n                        this.iframeCommunicator.sendMessage(IFrameMessageType.ContentItemClicked, messageData, messageMetadata);\r\n                    }\r\n                    else {\r\n                        Logger.warn('Add buttons for content items are only functional inside Web Spotlight.');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                Logger.warn('Some required attributes are not found or the edit button for this type of element is not yet supported.');\r\n            }\r\n        };\r\n        this.onAddInitialClick = (event) => {\r\n            var _a, _b;\r\n            const isInsideWebSpotlight = this.configurationManager.isInsideWebSpotlightPreviewIFrame;\r\n            const { eventData, onResolve, onReject } = event.detail;\r\n            const { data, targetNode } = eventData;\r\n            const messageData = Object.assign(Object.assign({}, data), { languageCodename: (_a = data.languageCodename) !== null && _a !== void 0 ? _a : this.configurationManager.defaultLanguageCodename, projectId: (_b = data.projectId) !== null && _b !== void 0 ? _b : this.configurationManager.defaultProjectId });\r\n            if (validateAddInitialMessageData(messageData)) {\r\n                if (isInsideWebSpotlight) {\r\n                    const messageMetadata = {\r\n                        elementRect: targetNode.getBoundingClientRect(),\r\n                    };\r\n                    this.iframeCommunicator.sendMessageWithResponse(IFrameMessageType.AddInitial, messageData, (response) => {\r\n                        if (!response || response.elementType === AddButtonElementType.Unknown) {\r\n                            return onReject({ message: 'Something went wrong' });\r\n                        }\r\n                        return onResolve(response);\r\n                    }, messageMetadata);\r\n                }\r\n                else {\r\n                    Logger.warn('Add buttons are only functional inside Web Spotlight.');\r\n                    onReject({ message: 'Add buttons are only functional inside Web Spotlight' });\r\n                }\r\n            }\r\n            else {\r\n                onReject({ message: 'Required data attributes are missing' });\r\n            }\r\n        };\r\n        this.onAddActionClick = (event) => {\r\n            var _a, _b;\r\n            const isInsideWebSpotlight = this.configurationManager.isInsideWebSpotlightPreviewIFrame;\r\n            const { data, targetNode } = event.detail;\r\n            const messageData = Object.assign(Object.assign({}, data), { languageCodename: (_a = data.languageCodename) !== null && _a !== void 0 ? _a : this.configurationManager.defaultLanguageCodename, projectId: (_b = data.projectId) !== null && _b !== void 0 ? _b : this.configurationManager.defaultProjectId });\r\n            if (validateAddActionMessageData(messageData)) {\r\n                if (isInsideWebSpotlight) {\r\n                    const messageMetadata = {\r\n                        elementRect: targetNode.getBoundingClientRect(),\r\n                    };\r\n                    this.iframeCommunicator.sendMessage(IFrameMessageType.AddAction, messageData, messageMetadata);\r\n                }\r\n                else {\r\n                    Logger.warn('Add buttons are only functional inside Web Spotlight.');\r\n                }\r\n            }\r\n        };\r\n        if (typeof window === 'undefined' ||\r\n            typeof MutationObserver === 'undefined' ||\r\n            typeof IntersectionObserver === 'undefined') {\r\n            throw InvalidEnvironmentError('NodeSmartLinkProvider can only be initialized in a browser environment.');\r\n        }\r\n        this.configurationManager = ConfigurationManager.getInstance();\r\n        this.mutationObserver = new MutationObserver(this.onDomMutation);\r\n        this.intersectionObserver = new IntersectionObserver(this.onElementVisibilityChange);\r\n        this.renderer = new SmartLinkRenderer();\r\n    }\r\n}\r\n//# sourceMappingURL=NodeSmartLinkProvider.js.map","import { Logger } from '../lib/Logger';\r\nconst LocalStorageNotAvailable = 'Local storage is not available or access to local storage is denied for the current document. It may affect the proper work of the SDK.';\r\nexport function createStorage(key) {\r\n    return {\r\n        get() {\r\n            try {\r\n                const value = window.localStorage.getItem(key);\r\n                return value ? JSON.parse(value) : null;\r\n            }\r\n            catch (_a) {\r\n                Logger.warn(LocalStorageNotAvailable);\r\n                return null;\r\n            }\r\n        },\r\n        set(data) {\r\n            try {\r\n                const json = JSON.stringify(data);\r\n                window.localStorage.setItem(key, json);\r\n            }\r\n            catch (_a) {\r\n                Logger.warn(LocalStorageNotAvailable);\r\n            }\r\n        },\r\n        remove() {\r\n            try {\r\n                window.localStorage.removeItem(key);\r\n            }\r\n            catch (_a) {\r\n                Logger.warn(LocalStorageNotAvailable);\r\n            }\r\n        },\r\n    };\r\n}\r\n//# sourceMappingURL=storage.js.map","export class EventManager {\r\n    constructor() {\r\n        this.listeners = new Map();\r\n        this.on = (event, listener) => {\r\n            var _a, _b;\r\n            const newListeners = (_b = (_a = this.listeners.get(event)) === null || _a === void 0 ? void 0 : _a.add(listener)) !== null && _b !== void 0 ? _b : new Set([listener]);\r\n            this.listeners.set(event, newListeners);\r\n        };\r\n        this.off = (event, listener) => {\r\n            var _a;\r\n            (_a = this.listeners.get(event)) === null || _a === void 0 ? void 0 : _a.delete(listener);\r\n        };\r\n        this.emit = (event, ...args) => {\r\n            const listeners = this.listeners.get(event);\r\n            if (listeners && listeners.size > 0) {\r\n                listeners.forEach((callback) => {\r\n                    callback(...args);\r\n                });\r\n            }\r\n        };\r\n        this.removeAllListeners = () => {\r\n            this.listeners = new Map();\r\n        };\r\n        this.hasEventListener = (event) => {\r\n            return this.listeners.has(event);\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=EventManager.js.map","import { isInsideIFrame } from '../utils/iframe';\r\nimport { EventManager } from './EventManager';\r\nimport { IFrameMessageType, } from './IFrameCommunicatorTypes';\r\nimport { createUuid } from '../utils/createUuid';\r\nimport { InvalidEnvironmentError } from '../utils/errors';\r\nexport class IFrameCommunicator {\r\n    constructor() {\r\n        this.events = new EventManager();\r\n        this.callbacks = new Map();\r\n        this.addMessageListener = (type, listener) => {\r\n            this.events.on(type, listener);\r\n        };\r\n        this.removeMessageListener = (type, listener) => {\r\n            this.events.off(type, listener);\r\n        };\r\n        this.sendMessageWithResponse = (type, data, callback, metadata) => {\r\n            const requestId = createUuid();\r\n            this.registerCallback(requestId, callback);\r\n            this.sendMessage(type, data, metadata, requestId);\r\n        };\r\n        this.sendMessage = (type, data, metadata, requestId) => {\r\n            if (!isInsideIFrame()) {\r\n                throw InvalidEnvironmentError('IFrameCommunicator: iframe message can only be send while inside iframe.');\r\n            }\r\n            const message = { type, data, metadata, requestId };\r\n            window.parent.postMessage(message, '*');\r\n        };\r\n        this.onMessage = (event) => {\r\n            if (!event.data)\r\n                return;\r\n            const message = event.data;\r\n            this.events.emit(message.type, message.data, message.metadata);\r\n            if (message.requestId) {\r\n                this.executeCallback(message.requestId, message.data);\r\n            }\r\n        };\r\n        this.registerCallback = (requestId, callback) => {\r\n            if (!callback) {\r\n                return;\r\n            }\r\n            this.callbacks.set(requestId, callback);\r\n        };\r\n        this.executeCallback = (requestId, data) => {\r\n            const callback = this.callbacks.get(requestId);\r\n            if (callback) {\r\n                callback(data);\r\n                this.callbacks.delete(requestId);\r\n            }\r\n        };\r\n    }\r\n    initialize() {\r\n        if (typeof window === 'undefined') {\r\n            throw InvalidEnvironmentError('IFrameCommunicator can only be initialized in a browser environment.');\r\n        }\r\n        window.addEventListener('message', this.onMessage, true);\r\n    }\r\n    destroy() {\r\n        this.events.removeAllListeners();\r\n        window.removeEventListener('message', this.onMessage, true);\r\n    }\r\n}\r\n//# sourceMappingURL=IFrameCommunicator.js.map","export const createUuid = () => {\r\n    const randomUint32 = window.crypto.getRandomValues(new Uint32Array(1))[0];\r\n    return randomUint32.toString(16);\r\n};\r\n//# sourceMappingURL=createUuid.js.map","let QueryParamPresenceWatcher = /** @class */ (() => {\r\n    class QueryParamPresenceWatcher {\r\n        constructor() {\r\n            this.previousValue = new Map();\r\n            this.timers = new Map();\r\n            this.watch = (queryParam, onChange) => {\r\n                const timerId = this.timers.get(queryParam);\r\n                if (timerId) {\r\n                    clearTimeout(timerId);\r\n                }\r\n                const isPresent = QueryParamPresenceWatcher.isQueryParamPresent(queryParam);\r\n                const hasChanged = this.previousValue.get(queryParam) !== isPresent;\r\n                if (hasChanged) {\r\n                    onChange(isPresent);\r\n                }\r\n                const newTimerId = window.setTimeout(() => this.watch(queryParam, onChange), QueryParamPresenceWatcher.WatchTimeoutMs);\r\n                this.timers.set(queryParam, newTimerId);\r\n            };\r\n            this.unwatchAll = () => {\r\n                this.timers.forEach((timerId) => {\r\n                    clearTimeout(timerId);\r\n                });\r\n                this.timers.clear();\r\n            };\r\n        }\r\n        /**\r\n         * Check if query parameter is present in the current page URL.\r\n         * Query parameter value is ignored, only presence is checked.\r\n         *\r\n         * @param {string} queryParam\r\n         * @returns {boolean}\r\n         */\r\n        static isQueryParamPresent(queryParam) {\r\n            const regex = new RegExp(`[?&]${queryParam}([=&]|$)`, 'i');\r\n            return regex.test(window.location.search);\r\n        }\r\n    }\r\n    QueryParamPresenceWatcher.WatchTimeoutMs = 1000;\r\n    return QueryParamPresenceWatcher;\r\n})();\r\nexport { QueryParamPresenceWatcher };\r\n//# sourceMappingURL=QueryParamPresenceWatcher.js.map","import { Logger } from '../lib/Logger';\r\nexport function reload() {\r\n    try {\r\n        window.location.reload();\r\n    }\r\n    catch (e) {\r\n        Logger.error(e);\r\n    }\r\n}\r\n//# sourceMappingURL=reload.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { isInsideIFrame } from './utils/iframe';\r\nimport { NodeSmartLinkProvider } from './lib/NodeSmartLinkProvider';\r\nimport { createStorage } from './utils/storage';\r\nimport { IFrameCommunicator } from './lib/IFrameCommunicator';\r\nimport { IFrameMessageType, } from './lib/IFrameCommunicatorTypes';\r\nimport { QueryParamPresenceWatcher } from './lib/QueryParamPresenceWatcher';\r\nimport { defineAllRequiredWebComponents } from './web-components/components';\r\nimport { ConfigurationManager } from './lib/ConfigurationManager';\r\nimport { InvalidEnvironmentError, NotInitializedError } from './utils/errors';\r\nimport { Logger, LogLevel } from './lib/Logger';\r\nimport { reload } from './utils/reload';\r\nimport { EventManager } from './lib/EventManager';\r\nexport var KontentSmartLinkEvent;\r\n(function (KontentSmartLinkEvent) {\r\n    KontentSmartLinkEvent[\"Refresh\"] = \"refresh\";\r\n})(KontentSmartLinkEvent || (KontentSmartLinkEvent = {}));\r\nclass KontentSmartLinkSDK {\r\n    constructor(configuration) {\r\n        this.initialize = () => __awaiter(this, void 0, void 0, function* () {\r\n            yield defineAllRequiredWebComponents();\r\n            const level = this.configurationManager.debug ? LogLevel.Debug : LogLevel.Info;\r\n            Logger.setLogLevel(level);\r\n            if (this.configurationManager.queryParam) {\r\n                this.queryParamPresenceWatcher.watch(this.configurationManager.queryParam, this.nodeSmartLinkProvider.toggle);\r\n            }\r\n            else {\r\n                this.nodeSmartLinkProvider.enable();\r\n            }\r\n            if (isInsideIFrame()) {\r\n                this.initializeIFrameCommunication();\r\n            }\r\n        });\r\n        this.destroy = () => {\r\n            this.events.removeAllListeners();\r\n            this.queryParamPresenceWatcher.unwatchAll();\r\n            this.iframeCommunicator.destroy();\r\n            this.nodeSmartLinkProvider.destroy();\r\n        };\r\n        this.updateConfiguration = (configuration) => {\r\n            if (typeof configuration.queryParam !== 'undefined') {\r\n                if (!configuration.queryParam) {\r\n                    this.nodeSmartLinkProvider.enable();\r\n                }\r\n                else if (configuration.queryParam !== this.configurationManager.queryParam) {\r\n                    this.queryParamPresenceWatcher.unwatchAll();\r\n                    this.queryParamPresenceWatcher.watch(configuration.queryParam, this.nodeSmartLinkProvider.toggle);\r\n                }\r\n            }\r\n            if (typeof configuration.debug !== 'undefined') {\r\n                const level = configuration.debug ? LogLevel.Debug : LogLevel.Info;\r\n                Logger.setLogLevel(level);\r\n            }\r\n            this.configurationManager.update(configuration);\r\n        };\r\n        this.on = (event, handler) => {\r\n            this.events.on(event, handler);\r\n        };\r\n        this.off = (event, handler) => {\r\n            this.events.off(event, handler);\r\n        };\r\n        this.initializeIFrameCommunication = () => {\r\n            var _a, _b;\r\n            this.iframeCommunicator.initialize();\r\n            const storage = KontentSmartLinkSDK.getSettingsStorage();\r\n            const settings = storage.get();\r\n            const enabled = settings !== null ? settings === null || settings === void 0 ? void 0 : settings.enabled : true;\r\n            const messageData = {\r\n                enabled,\r\n                languageCodename: (_a = this.configurationManager.defaultLanguageCodename) !== null && _a !== void 0 ? _a : null,\r\n                projectId: (_b = this.configurationManager.defaultProjectId) !== null && _b !== void 0 ? _b : null,\r\n                supportedFeatures: {\r\n                    refreshHandler: true,\r\n                },\r\n            };\r\n            this.iframeCommunicator.sendMessageWithResponse(IFrameMessageType.Initialized, messageData, () => {\r\n                this.configurationManager.update({ isInsideWebSpotlight: true });\r\n                this.queryParamPresenceWatcher.unwatchAll();\r\n                this.nodeSmartLinkProvider.disable();\r\n                if (enabled) {\r\n                    this.nodeSmartLinkProvider.enable();\r\n                }\r\n                this.iframeCommunicator.addMessageListener(IFrameMessageType.Status, this.handleStatusMessage);\r\n                this.iframeCommunicator.addMessageListener(IFrameMessageType.RefreshPreview, this.handleRefreshMessage);\r\n            });\r\n        };\r\n        this.handleStatusMessage = (data) => {\r\n            if (!data || !this.nodeSmartLinkProvider)\r\n                return;\r\n            this.nodeSmartLinkProvider.toggle(data.enabled);\r\n            KontentSmartLinkSDK.getSettingsStorage().set({\r\n                enabled: data.enabled,\r\n            });\r\n        };\r\n        this.handleRefreshMessage = (data, metadata) => {\r\n            const isCustomRefreshHandlerImplemented = this.events.hasEventListener(KontentSmartLinkEvent.Refresh);\r\n            if (isCustomRefreshHandlerImplemented) {\r\n                this.events.emit(KontentSmartLinkEvent.Refresh, data, metadata, reload);\r\n            }\r\n            else {\r\n                reload();\r\n            }\r\n        };\r\n        this.configurationManager = ConfigurationManager.getInstance();\r\n        this.configurationManager.update(configuration);\r\n        this.events = new EventManager();\r\n        this.queryParamPresenceWatcher = new QueryParamPresenceWatcher();\r\n        this.iframeCommunicator = new IFrameCommunicator();\r\n        this.nodeSmartLinkProvider = new NodeSmartLinkProvider(this.iframeCommunicator);\r\n        this.initialize();\r\n    }\r\n    static getSettingsStorage() {\r\n        return createStorage('kontent-smart-link:iframe-settings');\r\n    }\r\n}\r\nclass KontentSmartLink {\r\n    constructor() {\r\n        this.sdk = null;\r\n        this.destroy = () => {\r\n            var _a;\r\n            (_a = this.sdk) === null || _a === void 0 ? void 0 : _a.destroy();\r\n            this.sdk = null;\r\n        };\r\n        this.setConfiguration = (configuration) => {\r\n            if (!this.sdk) {\r\n                throw NotInitializedError('KontentSmartLink is not initialized or has already been destroyed.');\r\n            }\r\n            else {\r\n                this.sdk.updateConfiguration(configuration);\r\n            }\r\n        };\r\n        this.on = (event, handler) => {\r\n            if (!this.sdk) {\r\n                throw NotInitializedError('KontentSmartLink is not initialized or has already been destroyed.');\r\n            }\r\n            else {\r\n                this.sdk.on(event, handler);\r\n            }\r\n        };\r\n        this.off = (event, handler) => {\r\n            if (!this.sdk) {\r\n                throw NotInitializedError('KontentSmartLink is not initialized or has already been destroyed.');\r\n            }\r\n            else {\r\n                this.sdk.off(event, handler);\r\n            }\r\n        };\r\n    }\r\n    static initializeOnLoad(configuration) {\r\n        if (typeof window === 'undefined') {\r\n            throw InvalidEnvironmentError('KontentSmartLink can only be initialized in a browser environment.');\r\n        }\r\n        return new Promise((resolve) => {\r\n            window.addEventListener('load', () => {\r\n                resolve(KontentSmartLink.initialize(configuration));\r\n            });\r\n        });\r\n    }\r\n    static initialize(configuration) {\r\n        if (!KontentSmartLink.instance) {\r\n            KontentSmartLink.instance = new KontentSmartLink();\r\n        }\r\n        if (!KontentSmartLink.instance.sdk) {\r\n            KontentSmartLink.instance.sdk = new KontentSmartLinkSDK(configuration);\r\n        }\r\n        return KontentSmartLink.instance;\r\n    }\r\n}\r\nexport default KontentSmartLink;\r\n//# sourceMappingURL=sdk.js.map","import React, { useEffect } from 'react'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\nimport KontentSmartLink from '@kentico/kontent-smart-link'\r\n\r\nconst SmartLinkWrapper = ({ children }) => {\r\n  useEffect(() => {\r\n    const kontentSmartLink = KontentSmartLink.initialize({\r\n      queryParam: 'preview-mode',\r\n    })\r\n    return () => {\r\n      kontentSmartLink.destroy()\r\n    }\r\n  })\r\n\r\n  return (\r\n    <StaticQuery\r\n      query={graphql`\r\n        {\r\n          sitePlugin(name: { eq: \"@kentico/gatsby-source-kontent\" }) {\r\n            pluginOptions\r\n          }\r\n        }\r\n      `}\r\n      render={data => (\r\n        <div\r\n          className=\"kontent-smart-link-sdk-wrapper\"\r\n          data-kontent-project-id={data.sitePlugin.pluginOptions.projectId}\r\n          data-kontent-language-codename={\r\n            data.sitePlugin.pluginOptions.languageCodenames[0]\r\n          }\r\n        >\r\n          {children}\r\n        </div>\r\n      )}\r\n    ></StaticQuery>\r\n  )\r\n}\r\n\r\nexport default SmartLinkWrapper\r\n","import React from 'react'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\nimport Helmet from 'react-helmet'\r\n\r\nimport '../assets/scss/main.scss'\r\nimport Header from './Header'\r\nimport Menu from './Menu'\r\nimport Footer from './Footer'\r\nimport SmartLinkWrapper from './SmartLinkWrapper'\r\nimport get from 'lodash.get'\r\n\r\nclass DefaultLayout extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      isMenuVisible: false,\r\n      loading: 'is-loading',\r\n    }\r\n    this.handleToggleMenu = this.handleToggleMenu.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.timeoutId = setTimeout(() => {\r\n      this.setState({ loading: '' })\r\n    }, 100)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.timeoutId) {\r\n      clearTimeout(this.timeoutId)\r\n    }\r\n  }\r\n\r\n  handleToggleMenu() {\r\n    this.setState({\r\n      isMenuVisible: !this.state.isMenuVisible,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props\r\n    const ogImageWidth = 1200\r\n\r\n    return (\r\n      <SmartLinkWrapper>\r\n        <StaticQuery\r\n          query={graphql`\r\n            {\r\n              kontentItemLayout(\r\n                system: { codename: { eq: \"default_layout\" } }\r\n                preferred_language: { eq: \"en-US\" }\r\n              ) {\r\n                system {\r\n                  id\r\n                }\r\n                elements {\r\n                  title {\r\n                    value\r\n                  }\r\n                  meta_description {\r\n                    value\r\n                  }\r\n                  site_url {\r\n                    value\r\n                  }\r\n                  keywords {\r\n                    value {\r\n                      ... on kontent_item_keyword {\r\n                        elements {\r\n                          keyword {\r\n                            value\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  image {\r\n                    value {\r\n                      url\r\n                      name\r\n                      width\r\n                      height\r\n                      description\r\n                    }\r\n                  }\r\n                  header {\r\n                    value {\r\n                      ... on kontent_item_header {\r\n                        system {\r\n                          id\r\n                        }\r\n                        elements {\r\n                          menu_caption {\r\n                            value\r\n                          }\r\n                          menu {\r\n                            value {\r\n                              system {\r\n                                name\r\n                                codename\r\n                              }\r\n                            }\r\n                          }\r\n                          title_link {\r\n                            value {\r\n                              ... on kontent_item_link {\r\n                                id\r\n                                elements {\r\n                                  text {\r\n                                    value\r\n                                  }\r\n                                  url {\r\n                                    value\r\n                                  }\r\n                                }\r\n                              }\r\n                            }\r\n                          }\r\n                          menu {\r\n                            value {\r\n                              ... on kontent_item_navigation_item {\r\n                                system {\r\n                                  id\r\n                                }\r\n                                url\r\n                                elements {\r\n                                  title {\r\n                                    value\r\n                                  }\r\n                                  external_url {\r\n                                    value\r\n                                  }\r\n                                }\r\n                              }\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  footer {\r\n                    value {\r\n                      ... on kontent_item_footer {\r\n                        id\r\n                        elements {\r\n                          footer_text {\r\n                            value\r\n                          }\r\n                          social_media_accounts {\r\n                            value {\r\n                              ... on kontent_item_social_media_account {\r\n                                id\r\n                                elements {\r\n                                  account_handle {\r\n                                    value\r\n                                  }\r\n                                  social_media_type {\r\n                                    value {\r\n                                      ... on kontent_item_social_media_type {\r\n                                        id\r\n                                        elements {\r\n                                          label {\r\n                                            value\r\n                                          }\r\n                                          account_icon {\r\n                                            value {\r\n                                              url\r\n                                              description\r\n                                              name\r\n                                            }\r\n                                          }\r\n                                          account_icon_code {\r\n                                            value\r\n                                          }\r\n                                          account_pattern {\r\n                                            value\r\n                                          }\r\n                                        }\r\n                                      }\r\n                                    }\r\n                                  }\r\n                                }\r\n                              }\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          `}\r\n          render={data => {\r\n            const headerData = get(\r\n              data,\r\n              'kontentItemLayout.elements.header.value[0]'\r\n            )\r\n            const footerData = get(\r\n              data,\r\n              'kontentItemLayout.elements.footer.value[0]'\r\n            )\r\n\r\n            const otherData = get(data, 'kontentItemLayout.elements')\r\n\r\n            const imageUrl = `${otherData.image.value[0].url}?w=${ogImageWidth}&format=auto`\r\n            return (\r\n              <div\r\n                className={`body ${this.state.loading} ${\r\n                  this.state.isMenuVisible ? 'is-menu-visible' : ''\r\n                }`}\r\n              >\r\n                <div id=\"wrapper\">\r\n                  <Header\r\n                    onToggleMenu={this.handleToggleMenu}\r\n                    data={headerData}\r\n                  />\r\n                  <Helmet\r\n                    title={otherData.title.value}\r\n                    meta={[\r\n                      { property: 'og:title', content: otherData.title.value },\r\n                      {\r\n                        name: 'description',\r\n                        content: otherData.meta_description.value,\r\n                      },\r\n                      {\r\n                        name: 'keywords',\r\n                        content: otherData.keywords.value\r\n                          .map(keyword => keyword.elements.keyword.value)\r\n                          .join(','),\r\n                      },\r\n                      { property: 'og:type', content: 'website' },\r\n                      { property: 'og:url', content: otherData.site_url.value },\r\n                      {\r\n                        property: 'og:description',\r\n                        content: otherData.meta_description.value,\r\n                      },\r\n                      {\r\n                        property: 'og:image',\r\n                        content: imageUrl,\r\n                      },\r\n                      {\r\n                        property: 'og:image:width',\r\n                        content: ogImageWidth,\r\n                      },\r\n                      {\r\n                        property: 'og:image:height',\r\n                        content:\r\n                          (ogImageWidth / otherData.image.value[0].width) *\r\n                          otherData.image.value[0].height,\r\n                      },\r\n                      { name: 'twitter:card', content: 'summary_large_image' },\r\n                      { name: 'twitter:title', content: otherData.title.value },\r\n                      {\r\n                        name: 'twitter:description',\r\n                        content: otherData.meta_description.value,\r\n                      },\r\n                      {\r\n                        name: 'twitter:image',\r\n                        content: imageUrl,\r\n                      },\r\n                    ]}\r\n                    htmlAttributes={{\r\n                      lang: 'en',\r\n                    }}\r\n                  ></Helmet>\r\n                  {children}\r\n                  {/* <Contact /> */}\r\n                  <Footer\r\n                    data={footerData}\r\n                    footerItemId={get(data, 'kontentItemLayout.system.id')}\r\n                  />\r\n                </div>\r\n                <Menu\r\n                  onToggleMenu={this.handleToggleMenu}\r\n                  data={get(\r\n                    data,\r\n                    'kontentItemLayout.elements.header.value[0].elements.menu.value'\r\n                  )}\r\n                  data-kontent-item-id={get(\r\n                    data,\r\n                    'kontentItemLayout.elements.header.value[0].system.id'\r\n                  )}\r\n                />\r\n              </div>\r\n            )\r\n          }}\r\n        ></StaticQuery>\r\n      </SmartLinkWrapper>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DefaultLayout\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","import PropTypes from 'prop-types';\nimport withSideEffect from 'react-side-effect';\nimport isEqual from 'react-fast-compare';\nimport React from 'react';\nimport objectAssign from 'object-assign';\n\nvar ATTRIBUTE_NAMES = {\n    BODY: \"bodyAttributes\",\n    HTML: \"htmlAttributes\",\n    TITLE: \"titleAttributes\"\n};\n\nvar TAG_NAMES = {\n    BASE: \"base\",\n    BODY: \"body\",\n    HEAD: \"head\",\n    HTML: \"html\",\n    LINK: \"link\",\n    META: \"meta\",\n    NOSCRIPT: \"noscript\",\n    SCRIPT: \"script\",\n    STYLE: \"style\",\n    TITLE: \"title\"\n};\n\nvar VALID_TAG_NAMES = Object.keys(TAG_NAMES).map(function (name) {\n    return TAG_NAMES[name];\n});\n\nvar TAG_PROPERTIES = {\n    CHARSET: \"charset\",\n    CSS_TEXT: \"cssText\",\n    HREF: \"href\",\n    HTTPEQUIV: \"http-equiv\",\n    INNER_HTML: \"innerHTML\",\n    ITEM_PROP: \"itemprop\",\n    NAME: \"name\",\n    PROPERTY: \"property\",\n    REL: \"rel\",\n    SRC: \"src\",\n    TARGET: \"target\"\n};\n\nvar REACT_TAG_MAP = {\n    accesskey: \"accessKey\",\n    charset: \"charSet\",\n    class: \"className\",\n    contenteditable: \"contentEditable\",\n    contextmenu: \"contextMenu\",\n    \"http-equiv\": \"httpEquiv\",\n    itemprop: \"itemProp\",\n    tabindex: \"tabIndex\"\n};\n\nvar HELMET_PROPS = {\n    DEFAULT_TITLE: \"defaultTitle\",\n    DEFER: \"defer\",\n    ENCODE_SPECIAL_CHARACTERS: \"encodeSpecialCharacters\",\n    ON_CHANGE_CLIENT_STATE: \"onChangeClientState\",\n    TITLE_TEMPLATE: \"titleTemplate\"\n};\n\nvar HTML_TAG_MAP = Object.keys(REACT_TAG_MAP).reduce(function (obj, key) {\n    obj[REACT_TAG_MAP[key]] = key;\n    return obj;\n}, {});\n\nvar SELF_CLOSING_TAGS = [TAG_NAMES.NOSCRIPT, TAG_NAMES.SCRIPT, TAG_NAMES.STYLE];\n\nvar HELMET_ATTRIBUTE = \"data-react-helmet\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar encodeSpecialCharacters = function encodeSpecialCharacters(str) {\n    var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    if (encode === false) {\n        return String(str);\n    }\n\n    return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\n\nvar getTitleFromPropsList = function getTitleFromPropsList(propsList) {\n    var innermostTitle = getInnermostProperty(propsList, TAG_NAMES.TITLE);\n    var innermostTemplate = getInnermostProperty(propsList, HELMET_PROPS.TITLE_TEMPLATE);\n\n    if (innermostTemplate && innermostTitle) {\n        // use function arg to avoid need to escape $ characters\n        return innermostTemplate.replace(/%s/g, function () {\n            return Array.isArray(innermostTitle) ? innermostTitle.join(\"\") : innermostTitle;\n        });\n    }\n\n    var innermostDefaultTitle = getInnermostProperty(propsList, HELMET_PROPS.DEFAULT_TITLE);\n\n    return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nvar getOnChangeClientState = function getOnChangeClientState(propsList) {\n    return getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || function () {};\n};\n\nvar getAttributesFromPropsList = function getAttributesFromPropsList(tagType, propsList) {\n    return propsList.filter(function (props) {\n        return typeof props[tagType] !== \"undefined\";\n    }).map(function (props) {\n        return props[tagType];\n    }).reduce(function (tagAttrs, current) {\n        return _extends({}, tagAttrs, current);\n    }, {});\n};\n\nvar getBaseTagFromPropsList = function getBaseTagFromPropsList(primaryAttributes, propsList) {\n    return propsList.filter(function (props) {\n        return typeof props[TAG_NAMES.BASE] !== \"undefined\";\n    }).map(function (props) {\n        return props[TAG_NAMES.BASE];\n    }).reverse().reduce(function (innermostBaseTag, tag) {\n        if (!innermostBaseTag.length) {\n            var keys = Object.keys(tag);\n\n            for (var i = 0; i < keys.length; i++) {\n                var attributeKey = keys[i];\n                var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n                if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n                    return innermostBaseTag.concat(tag);\n                }\n            }\n        }\n\n        return innermostBaseTag;\n    }, []);\n};\n\nvar getTagsFromPropsList = function getTagsFromPropsList(tagName, primaryAttributes, propsList) {\n    // Calculate list of tags, giving priority innermost component (end of the propslist)\n    var approvedSeenTags = {};\n\n    return propsList.filter(function (props) {\n        if (Array.isArray(props[tagName])) {\n            return true;\n        }\n        if (typeof props[tagName] !== \"undefined\") {\n            warn(\"Helmet: \" + tagName + \" should be of type \\\"Array\\\". Instead found type \\\"\" + _typeof(props[tagName]) + \"\\\"\");\n        }\n        return false;\n    }).map(function (props) {\n        return props[tagName];\n    }).reverse().reduce(function (approvedTags, instanceTags) {\n        var instanceSeenTags = {};\n\n        instanceTags.filter(function (tag) {\n            var primaryAttributeKey = void 0;\n            var keys = Object.keys(tag);\n            for (var i = 0; i < keys.length; i++) {\n                var attributeKey = keys[i];\n                var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n                // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n                if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n                    primaryAttributeKey = lowerCaseAttributeKey;\n                }\n                // Special case for innerHTML which doesn't work lowercased\n                if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === TAG_PROPERTIES.INNER_HTML || attributeKey === TAG_PROPERTIES.CSS_TEXT || attributeKey === TAG_PROPERTIES.ITEM_PROP)) {\n                    primaryAttributeKey = attributeKey;\n                }\n            }\n\n            if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n                return false;\n            }\n\n            var value = tag[primaryAttributeKey].toLowerCase();\n\n            if (!approvedSeenTags[primaryAttributeKey]) {\n                approvedSeenTags[primaryAttributeKey] = {};\n            }\n\n            if (!instanceSeenTags[primaryAttributeKey]) {\n                instanceSeenTags[primaryAttributeKey] = {};\n            }\n\n            if (!approvedSeenTags[primaryAttributeKey][value]) {\n                instanceSeenTags[primaryAttributeKey][value] = true;\n                return true;\n            }\n\n            return false;\n        }).reverse().forEach(function (tag) {\n            return approvedTags.push(tag);\n        });\n\n        // Update seen tags with tags from this instance\n        var keys = Object.keys(instanceSeenTags);\n        for (var i = 0; i < keys.length; i++) {\n            var attributeKey = keys[i];\n            var tagUnion = objectAssign({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n\n            approvedSeenTags[attributeKey] = tagUnion;\n        }\n\n        return approvedTags;\n    }, []).reverse();\n};\n\nvar getInnermostProperty = function getInnermostProperty(propsList, property) {\n    for (var i = propsList.length - 1; i >= 0; i--) {\n        var props = propsList[i];\n\n        if (props.hasOwnProperty(property)) {\n            return props[property];\n        }\n    }\n\n    return null;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n    return {\n        baseTag: getBaseTagFromPropsList([TAG_PROPERTIES.HREF, TAG_PROPERTIES.TARGET], propsList),\n        bodyAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY, propsList),\n        defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n        encode: getInnermostProperty(propsList, HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n        htmlAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML, propsList),\n        linkTags: getTagsFromPropsList(TAG_NAMES.LINK, [TAG_PROPERTIES.REL, TAG_PROPERTIES.HREF], propsList),\n        metaTags: getTagsFromPropsList(TAG_NAMES.META, [TAG_PROPERTIES.NAME, TAG_PROPERTIES.CHARSET, TAG_PROPERTIES.HTTPEQUIV, TAG_PROPERTIES.PROPERTY, TAG_PROPERTIES.ITEM_PROP], propsList),\n        noscriptTags: getTagsFromPropsList(TAG_NAMES.NOSCRIPT, [TAG_PROPERTIES.INNER_HTML], propsList),\n        onChangeClientState: getOnChangeClientState(propsList),\n        scriptTags: getTagsFromPropsList(TAG_NAMES.SCRIPT, [TAG_PROPERTIES.SRC, TAG_PROPERTIES.INNER_HTML], propsList),\n        styleTags: getTagsFromPropsList(TAG_NAMES.STYLE, [TAG_PROPERTIES.CSS_TEXT], propsList),\n        title: getTitleFromPropsList(propsList),\n        titleAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE, propsList)\n    };\n};\n\nvar rafPolyfill = function () {\n    var clock = Date.now();\n\n    return function (callback) {\n        var currentTime = Date.now();\n\n        if (currentTime - clock > 16) {\n            clock = currentTime;\n            callback(currentTime);\n        } else {\n            setTimeout(function () {\n                rafPolyfill(callback);\n            }, 0);\n        }\n    };\n}();\n\nvar cafPolyfill = function cafPolyfill(id) {\n    return clearTimeout(id);\n};\n\nvar requestAnimationFrame = typeof window !== \"undefined\" ? window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\n\nvar cancelAnimationFrame = typeof window !== \"undefined\" ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nvar warn = function warn(msg) {\n    return console && typeof console.warn === \"function\" && console.warn(msg);\n};\n\nvar _helmetCallback = null;\n\nvar handleClientStateChange = function handleClientStateChange(newState) {\n    if (_helmetCallback) {\n        cancelAnimationFrame(_helmetCallback);\n    }\n\n    if (newState.defer) {\n        _helmetCallback = requestAnimationFrame(function () {\n            commitTagChanges(newState, function () {\n                _helmetCallback = null;\n            });\n        });\n    } else {\n        commitTagChanges(newState);\n        _helmetCallback = null;\n    }\n};\n\nvar commitTagChanges = function commitTagChanges(newState, cb) {\n    var baseTag = newState.baseTag,\n        bodyAttributes = newState.bodyAttributes,\n        htmlAttributes = newState.htmlAttributes,\n        linkTags = newState.linkTags,\n        metaTags = newState.metaTags,\n        noscriptTags = newState.noscriptTags,\n        onChangeClientState = newState.onChangeClientState,\n        scriptTags = newState.scriptTags,\n        styleTags = newState.styleTags,\n        title = newState.title,\n        titleAttributes = newState.titleAttributes;\n\n    updateAttributes(TAG_NAMES.BODY, bodyAttributes);\n    updateAttributes(TAG_NAMES.HTML, htmlAttributes);\n\n    updateTitle(title, titleAttributes);\n\n    var tagUpdates = {\n        baseTag: updateTags(TAG_NAMES.BASE, baseTag),\n        linkTags: updateTags(TAG_NAMES.LINK, linkTags),\n        metaTags: updateTags(TAG_NAMES.META, metaTags),\n        noscriptTags: updateTags(TAG_NAMES.NOSCRIPT, noscriptTags),\n        scriptTags: updateTags(TAG_NAMES.SCRIPT, scriptTags),\n        styleTags: updateTags(TAG_NAMES.STYLE, styleTags)\n    };\n\n    var addedTags = {};\n    var removedTags = {};\n\n    Object.keys(tagUpdates).forEach(function (tagType) {\n        var _tagUpdates$tagType = tagUpdates[tagType],\n            newTags = _tagUpdates$tagType.newTags,\n            oldTags = _tagUpdates$tagType.oldTags;\n\n\n        if (newTags.length) {\n            addedTags[tagType] = newTags;\n        }\n        if (oldTags.length) {\n            removedTags[tagType] = tagUpdates[tagType].oldTags;\n        }\n    });\n\n    cb && cb();\n\n    onChangeClientState(newState, addedTags, removedTags);\n};\n\nvar flattenArray = function flattenArray(possibleArray) {\n    return Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\n};\n\nvar updateTitle = function updateTitle(title, attributes) {\n    if (typeof title !== \"undefined\" && document.title !== title) {\n        document.title = flattenArray(title);\n    }\n\n    updateAttributes(TAG_NAMES.TITLE, attributes);\n};\n\nvar updateAttributes = function updateAttributes(tagName, attributes) {\n    var elementTag = document.getElementsByTagName(tagName)[0];\n\n    if (!elementTag) {\n        return;\n    }\n\n    var helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n    var helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n    var attributesToRemove = [].concat(helmetAttributes);\n    var attributeKeys = Object.keys(attributes);\n\n    for (var i = 0; i < attributeKeys.length; i++) {\n        var attribute = attributeKeys[i];\n        var value = attributes[attribute] || \"\";\n\n        if (elementTag.getAttribute(attribute) !== value) {\n            elementTag.setAttribute(attribute, value);\n        }\n\n        if (helmetAttributes.indexOf(attribute) === -1) {\n            helmetAttributes.push(attribute);\n        }\n\n        var indexToSave = attributesToRemove.indexOf(attribute);\n        if (indexToSave !== -1) {\n            attributesToRemove.splice(indexToSave, 1);\n        }\n    }\n\n    for (var _i = attributesToRemove.length - 1; _i >= 0; _i--) {\n        elementTag.removeAttribute(attributesToRemove[_i]);\n    }\n\n    if (helmetAttributes.length === attributesToRemove.length) {\n        elementTag.removeAttribute(HELMET_ATTRIBUTE);\n    } else if (elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n        elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n    }\n};\n\nvar updateTags = function updateTags(type, tags) {\n    var headElement = document.head || document.querySelector(TAG_NAMES.HEAD);\n    var tagNodes = headElement.querySelectorAll(type + \"[\" + HELMET_ATTRIBUTE + \"]\");\n    var oldTags = Array.prototype.slice.call(tagNodes);\n    var newTags = [];\n    var indexToDelete = void 0;\n\n    if (tags && tags.length) {\n        tags.forEach(function (tag) {\n            var newElement = document.createElement(type);\n\n            for (var attribute in tag) {\n                if (tag.hasOwnProperty(attribute)) {\n                    if (attribute === TAG_PROPERTIES.INNER_HTML) {\n                        newElement.innerHTML = tag.innerHTML;\n                    } else if (attribute === TAG_PROPERTIES.CSS_TEXT) {\n                        if (newElement.styleSheet) {\n                            newElement.styleSheet.cssText = tag.cssText;\n                        } else {\n                            newElement.appendChild(document.createTextNode(tag.cssText));\n                        }\n                    } else {\n                        var value = typeof tag[attribute] === \"undefined\" ? \"\" : tag[attribute];\n                        newElement.setAttribute(attribute, value);\n                    }\n                }\n            }\n\n            newElement.setAttribute(HELMET_ATTRIBUTE, \"true\");\n\n            // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n            if (oldTags.some(function (existingTag, index) {\n                indexToDelete = index;\n                return newElement.isEqualNode(existingTag);\n            })) {\n                oldTags.splice(indexToDelete, 1);\n            } else {\n                newTags.push(newElement);\n            }\n        });\n    }\n\n    oldTags.forEach(function (tag) {\n        return tag.parentNode.removeChild(tag);\n    });\n    newTags.forEach(function (tag) {\n        return headElement.appendChild(tag);\n    });\n\n    return {\n        oldTags: oldTags,\n        newTags: newTags\n    };\n};\n\nvar generateElementAttributesAsString = function generateElementAttributesAsString(attributes) {\n    return Object.keys(attributes).reduce(function (str, key) {\n        var attr = typeof attributes[key] !== \"undefined\" ? key + \"=\\\"\" + attributes[key] + \"\\\"\" : \"\" + key;\n        return str ? str + \" \" + attr : attr;\n    }, \"\");\n};\n\nvar generateTitleAsString = function generateTitleAsString(type, title, attributes, encode) {\n    var attributeString = generateElementAttributesAsString(attributes);\n    var flattenedTitle = flattenArray(title);\n    return attributeString ? \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeString + \">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\" : \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\";\n};\n\nvar generateTagsAsString = function generateTagsAsString(type, tags, encode) {\n    return tags.reduce(function (str, tag) {\n        var attributeHtml = Object.keys(tag).filter(function (attribute) {\n            return !(attribute === TAG_PROPERTIES.INNER_HTML || attribute === TAG_PROPERTIES.CSS_TEXT);\n        }).reduce(function (string, attribute) {\n            var attr = typeof tag[attribute] === \"undefined\" ? attribute : attribute + \"=\\\"\" + encodeSpecialCharacters(tag[attribute], encode) + \"\\\"\";\n            return string ? string + \" \" + attr : attr;\n        }, \"\");\n\n        var tagContent = tag.innerHTML || tag.cssText || \"\";\n\n        var isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n\n        return str + \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeHtml + (isSelfClosing ? \"/>\" : \">\" + tagContent + \"</\" + type + \">\");\n    }, \"\");\n};\n\nvar convertElementAttributestoReactProps = function convertElementAttributestoReactProps(attributes) {\n    var initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return Object.keys(attributes).reduce(function (obj, key) {\n        obj[REACT_TAG_MAP[key] || key] = attributes[key];\n        return obj;\n    }, initProps);\n};\n\nvar convertReactPropstoHtmlAttributes = function convertReactPropstoHtmlAttributes(props) {\n    var initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return Object.keys(props).reduce(function (obj, key) {\n        obj[HTML_TAG_MAP[key] || key] = props[key];\n        return obj;\n    }, initAttributes);\n};\n\nvar generateTitleAsReactComponent = function generateTitleAsReactComponent(type, title, attributes) {\n    var _initProps;\n\n    // assigning into an array to define toString function on it\n    var initProps = (_initProps = {\n        key: title\n    }, _initProps[HELMET_ATTRIBUTE] = true, _initProps);\n    var props = convertElementAttributestoReactProps(attributes, initProps);\n\n    return [React.createElement(TAG_NAMES.TITLE, props, title)];\n};\n\nvar generateTagsAsReactComponent = function generateTagsAsReactComponent(type, tags) {\n    return tags.map(function (tag, i) {\n        var _mappedTag;\n\n        var mappedTag = (_mappedTag = {\n            key: i\n        }, _mappedTag[HELMET_ATTRIBUTE] = true, _mappedTag);\n\n        Object.keys(tag).forEach(function (attribute) {\n            var mappedAttribute = REACT_TAG_MAP[attribute] || attribute;\n\n            if (mappedAttribute === TAG_PROPERTIES.INNER_HTML || mappedAttribute === TAG_PROPERTIES.CSS_TEXT) {\n                var content = tag.innerHTML || tag.cssText;\n                mappedTag.dangerouslySetInnerHTML = { __html: content };\n            } else {\n                mappedTag[mappedAttribute] = tag[attribute];\n            }\n        });\n\n        return React.createElement(type, mappedTag);\n    });\n};\n\nvar getMethodsForTag = function getMethodsForTag(type, tags, encode) {\n    switch (type) {\n        case TAG_NAMES.TITLE:\n            return {\n                toComponent: function toComponent() {\n                    return generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode);\n                },\n                toString: function toString() {\n                    return generateTitleAsString(type, tags.title, tags.titleAttributes, encode);\n                }\n            };\n        case ATTRIBUTE_NAMES.BODY:\n        case ATTRIBUTE_NAMES.HTML:\n            return {\n                toComponent: function toComponent() {\n                    return convertElementAttributestoReactProps(tags);\n                },\n                toString: function toString() {\n                    return generateElementAttributesAsString(tags);\n                }\n            };\n        default:\n            return {\n                toComponent: function toComponent() {\n                    return generateTagsAsReactComponent(type, tags);\n                },\n                toString: function toString() {\n                    return generateTagsAsString(type, tags, encode);\n                }\n            };\n    }\n};\n\nvar mapStateOnServer = function mapStateOnServer(_ref) {\n    var baseTag = _ref.baseTag,\n        bodyAttributes = _ref.bodyAttributes,\n        encode = _ref.encode,\n        htmlAttributes = _ref.htmlAttributes,\n        linkTags = _ref.linkTags,\n        metaTags = _ref.metaTags,\n        noscriptTags = _ref.noscriptTags,\n        scriptTags = _ref.scriptTags,\n        styleTags = _ref.styleTags,\n        _ref$title = _ref.title,\n        title = _ref$title === undefined ? \"\" : _ref$title,\n        titleAttributes = _ref.titleAttributes;\n    return {\n        base: getMethodsForTag(TAG_NAMES.BASE, baseTag, encode),\n        bodyAttributes: getMethodsForTag(ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n        htmlAttributes: getMethodsForTag(ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n        link: getMethodsForTag(TAG_NAMES.LINK, linkTags, encode),\n        meta: getMethodsForTag(TAG_NAMES.META, metaTags, encode),\n        noscript: getMethodsForTag(TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n        script: getMethodsForTag(TAG_NAMES.SCRIPT, scriptTags, encode),\n        style: getMethodsForTag(TAG_NAMES.STYLE, styleTags, encode),\n        title: getMethodsForTag(TAG_NAMES.TITLE, { title: title, titleAttributes: titleAttributes }, encode)\n    };\n};\n\nvar Helmet = function Helmet(Component) {\n    var _class, _temp;\n\n    return _temp = _class = function (_React$Component) {\n        inherits(HelmetWrapper, _React$Component);\n\n        function HelmetWrapper() {\n            classCallCheck(this, HelmetWrapper);\n            return possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n        }\n\n        HelmetWrapper.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n            return !isEqual(this.props, nextProps);\n        };\n\n        HelmetWrapper.prototype.mapNestedChildrenToProps = function mapNestedChildrenToProps(child, nestedChildren) {\n            if (!nestedChildren) {\n                return null;\n            }\n\n            switch (child.type) {\n                case TAG_NAMES.SCRIPT:\n                case TAG_NAMES.NOSCRIPT:\n                    return {\n                        innerHTML: nestedChildren\n                    };\n\n                case TAG_NAMES.STYLE:\n                    return {\n                        cssText: nestedChildren\n                    };\n            }\n\n            throw new Error(\"<\" + child.type + \" /> elements are self-closing and can not contain children. Refer to our API for more information.\");\n        };\n\n        HelmetWrapper.prototype.flattenArrayTypeChildren = function flattenArrayTypeChildren(_ref) {\n            var _babelHelpers$extends;\n\n            var child = _ref.child,\n                arrayTypeChildren = _ref.arrayTypeChildren,\n                newChildProps = _ref.newChildProps,\n                nestedChildren = _ref.nestedChildren;\n\n            return _extends({}, arrayTypeChildren, (_babelHelpers$extends = {}, _babelHelpers$extends[child.type] = [].concat(arrayTypeChildren[child.type] || [], [_extends({}, newChildProps, this.mapNestedChildrenToProps(child, nestedChildren))]), _babelHelpers$extends));\n        };\n\n        HelmetWrapper.prototype.mapObjectTypeChildren = function mapObjectTypeChildren(_ref2) {\n            var _babelHelpers$extends2, _babelHelpers$extends3;\n\n            var child = _ref2.child,\n                newProps = _ref2.newProps,\n                newChildProps = _ref2.newChildProps,\n                nestedChildren = _ref2.nestedChildren;\n\n            switch (child.type) {\n                case TAG_NAMES.TITLE:\n                    return _extends({}, newProps, (_babelHelpers$extends2 = {}, _babelHelpers$extends2[child.type] = nestedChildren, _babelHelpers$extends2.titleAttributes = _extends({}, newChildProps), _babelHelpers$extends2));\n\n                case TAG_NAMES.BODY:\n                    return _extends({}, newProps, {\n                        bodyAttributes: _extends({}, newChildProps)\n                    });\n\n                case TAG_NAMES.HTML:\n                    return _extends({}, newProps, {\n                        htmlAttributes: _extends({}, newChildProps)\n                    });\n            }\n\n            return _extends({}, newProps, (_babelHelpers$extends3 = {}, _babelHelpers$extends3[child.type] = _extends({}, newChildProps), _babelHelpers$extends3));\n        };\n\n        HelmetWrapper.prototype.mapArrayTypeChildrenToProps = function mapArrayTypeChildrenToProps(arrayTypeChildren, newProps) {\n            var newFlattenedProps = _extends({}, newProps);\n\n            Object.keys(arrayTypeChildren).forEach(function (arrayChildName) {\n                var _babelHelpers$extends4;\n\n                newFlattenedProps = _extends({}, newFlattenedProps, (_babelHelpers$extends4 = {}, _babelHelpers$extends4[arrayChildName] = arrayTypeChildren[arrayChildName], _babelHelpers$extends4));\n            });\n\n            return newFlattenedProps;\n        };\n\n        HelmetWrapper.prototype.warnOnInvalidChildren = function warnOnInvalidChildren(child, nestedChildren) {\n            if (process.env.NODE_ENV !== \"production\") {\n                if (!VALID_TAG_NAMES.some(function (name) {\n                    return child.type === name;\n                })) {\n                    if (typeof child.type === \"function\") {\n                        return warn(\"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.\");\n                    }\n\n                    return warn(\"Only elements types \" + VALID_TAG_NAMES.join(\", \") + \" are allowed. Helmet does not support rendering <\" + child.type + \"> elements. Refer to our API for more information.\");\n                }\n\n                if (nestedChildren && typeof nestedChildren !== \"string\" && (!Array.isArray(nestedChildren) || nestedChildren.some(function (nestedChild) {\n                    return typeof nestedChild !== \"string\";\n                }))) {\n                    throw new Error(\"Helmet expects a string as a child of <\" + child.type + \">. Did you forget to wrap your children in braces? ( <\" + child.type + \">{``}</\" + child.type + \"> ) Refer to our API for more information.\");\n                }\n            }\n\n            return true;\n        };\n\n        HelmetWrapper.prototype.mapChildrenToProps = function mapChildrenToProps(children, newProps) {\n            var _this2 = this;\n\n            var arrayTypeChildren = {};\n\n            React.Children.forEach(children, function (child) {\n                if (!child || !child.props) {\n                    return;\n                }\n\n                var _child$props = child.props,\n                    nestedChildren = _child$props.children,\n                    childProps = objectWithoutProperties(_child$props, [\"children\"]);\n\n                var newChildProps = convertReactPropstoHtmlAttributes(childProps);\n\n                _this2.warnOnInvalidChildren(child, nestedChildren);\n\n                switch (child.type) {\n                    case TAG_NAMES.LINK:\n                    case TAG_NAMES.META:\n                    case TAG_NAMES.NOSCRIPT:\n                    case TAG_NAMES.SCRIPT:\n                    case TAG_NAMES.STYLE:\n                        arrayTypeChildren = _this2.flattenArrayTypeChildren({\n                            child: child,\n                            arrayTypeChildren: arrayTypeChildren,\n                            newChildProps: newChildProps,\n                            nestedChildren: nestedChildren\n                        });\n                        break;\n\n                    default:\n                        newProps = _this2.mapObjectTypeChildren({\n                            child: child,\n                            newProps: newProps,\n                            newChildProps: newChildProps,\n                            nestedChildren: nestedChildren\n                        });\n                        break;\n                }\n            });\n\n            newProps = this.mapArrayTypeChildrenToProps(arrayTypeChildren, newProps);\n            return newProps;\n        };\n\n        HelmetWrapper.prototype.render = function render() {\n            var _props = this.props,\n                children = _props.children,\n                props = objectWithoutProperties(_props, [\"children\"]);\n\n            var newProps = _extends({}, props);\n\n            if (children) {\n                newProps = this.mapChildrenToProps(children, newProps);\n            }\n\n            return React.createElement(Component, newProps);\n        };\n\n        createClass(HelmetWrapper, null, [{\n            key: \"canUseDOM\",\n\n\n            // Component.peek comes from react-side-effect:\n            // For testing, you may use a static peek() method available on the returned component.\n            // It lets you get the current state without resetting the mounted instance stack.\n            // Dont use it for anything other than testing.\n\n            /**\n             * @param {Object} base: {\"target\": \"_blank\", \"href\": \"http://mysite.com/\"}\n             * @param {Object} bodyAttributes: {\"className\": \"root\"}\n             * @param {String} defaultTitle: \"Default Title\"\n             * @param {Boolean} defer: true\n             * @param {Boolean} encodeSpecialCharacters: true\n             * @param {Object} htmlAttributes: {\"lang\": \"en\", \"amp\": undefined}\n             * @param {Array} link: [{\"rel\": \"canonical\", \"href\": \"http://mysite.com/example\"}]\n             * @param {Array} meta: [{\"name\": \"description\", \"content\": \"Test description\"}]\n             * @param {Array} noscript: [{\"innerHTML\": \"<img src='http://mysite.com/js/test.js'\"}]\n             * @param {Function} onChangeClientState: \"(newState) => console.log(newState)\"\n             * @param {Array} script: [{\"type\": \"text/javascript\", \"src\": \"http://mysite.com/js/test.js\"}]\n             * @param {Array} style: [{\"type\": \"text/css\", \"cssText\": \"div { display: block; color: blue; }\"}]\n             * @param {String} title: \"Title\"\n             * @param {Object} titleAttributes: {\"itemprop\": \"name\"}\n             * @param {String} titleTemplate: \"MySite.com - %s\"\n             */\n            set: function set$$1(canUseDOM) {\n                Component.canUseDOM = canUseDOM;\n            }\n        }]);\n        return HelmetWrapper;\n    }(React.Component), _class.propTypes = {\n        base: PropTypes.object,\n        bodyAttributes: PropTypes.object,\n        children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n        defaultTitle: PropTypes.string,\n        defer: PropTypes.bool,\n        encodeSpecialCharacters: PropTypes.bool,\n        htmlAttributes: PropTypes.object,\n        link: PropTypes.arrayOf(PropTypes.object),\n        meta: PropTypes.arrayOf(PropTypes.object),\n        noscript: PropTypes.arrayOf(PropTypes.object),\n        onChangeClientState: PropTypes.func,\n        script: PropTypes.arrayOf(PropTypes.object),\n        style: PropTypes.arrayOf(PropTypes.object),\n        title: PropTypes.string,\n        titleAttributes: PropTypes.object,\n        titleTemplate: PropTypes.string\n    }, _class.defaultProps = {\n        defer: true,\n        encodeSpecialCharacters: true\n    }, _class.peek = Component.peek, _class.rewind = function () {\n        var mappedState = Component.rewind();\n        if (!mappedState) {\n            // provide fallback if mappedState is undefined\n            mappedState = mapStateOnServer({\n                baseTag: [],\n                bodyAttributes: {},\n                encodeSpecialCharacters: true,\n                htmlAttributes: {},\n                linkTags: [],\n                metaTags: [],\n                noscriptTags: [],\n                scriptTags: [],\n                styleTags: [],\n                title: \"\",\n                titleAttributes: {}\n            });\n        }\n\n        return mappedState;\n    }, _temp;\n};\n\nvar NullComponent = function NullComponent() {\n    return null;\n};\n\nvar HelmetSideEffects = withSideEffect(reducePropsToState, handleClientStateChange, mapStateOnServer)(NullComponent);\n\nvar HelmetExport = Helmet(HelmetSideEffects);\nHelmetExport.renderStatic = HelmetExport.rewind;\n\nexport default HelmetExport;\nexport { HelmetExport as Helmet };\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar React__default = _interopDefault(React);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient, mapStateOnServer) {\n  if (typeof reducePropsToState !== 'function') {\n    throw new Error('Expected reducePropsToState to be a function.');\n  }\n\n  if (typeof handleStateChangeOnClient !== 'function') {\n    throw new Error('Expected handleStateChangeOnClient to be a function.');\n  }\n\n  if (typeof mapStateOnServer !== 'undefined' && typeof mapStateOnServer !== 'function') {\n    throw new Error('Expected mapStateOnServer to either be undefined or a function.');\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (typeof WrappedComponent !== 'function') {\n      throw new Error('Expected WrappedComponent to be a React component.');\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n\n      if (SideEffect.canUseDOM) {\n        handleStateChangeOnClient(state);\n      } else if (mapStateOnServer) {\n        state = mapStateOnServer(state);\n      }\n    }\n\n    var SideEffect =\n    /*#__PURE__*/\n    function (_PureComponent) {\n      _inheritsLoose(SideEffect, _PureComponent);\n\n      function SideEffect() {\n        return _PureComponent.apply(this, arguments) || this;\n      }\n\n      // Try to use displayName of wrapped component\n      // Expose canUseDOM so tests can monkeypatch it\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      SideEffect.rewind = function rewind() {\n        if (SideEffect.canUseDOM) {\n          throw new Error('You may only call rewind() on the server. Call peek() to read the current state.');\n        }\n\n        var recordedState = state;\n        state = undefined;\n        mountedInstances = [];\n        return recordedState;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return React__default.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(React.PureComponent);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    _defineProperty(SideEffect, \"canUseDOM\", canUseDOM);\n\n    return SideEffect;\n  };\n}\n\nmodule.exports = withSideEffect;\n"],"names":["props","titleLink","get","data","menuCaption","titleText","titleURL","React","id","className","system","Link","to","role","tabIndex","onClick","onToggleMenu","onKeyDown","menuItems","map","menuItem","key","url","elements","external_url","value","href","title","icons","social_media_accounts","social_media_account","handle","account_handle","mediaType","social_media_type","account_pattern","replace","account_icon_code","label","footerItemId","dangerouslySetInnerHTML","__html","footer_text","isInsideIFrame","window","self","top","NotImplementedError","message","error","Error","name","InvalidEnvironmentError","NotInitializedError","g","KSLCustomElement","HTMLElement","constructor","super","selfClass","Object","getPrototypeOf","this","attachShadow","mode","appendChild","template","content","cloneNode","is","_template","initializeTemplate","define","customElements","Promise","resolve","whenDefined","updateAttribute","attributeName","attributeValue","setAttribute","toString","removeAttribute","dispatchAsyncEvent","eventType","eventData","timeout","reject","timeoutId","setTimeout","customEvent","CustomEvent","detail","onResolve","clearTimeout","onReject","reason","dispatchEvent","LogLevel","Logger","setLogLevel","level","logLevel","args","console","warn","Warn","info","Info","debug","Debug","log","debugGroupCollapsed","groupCollapsed","debugGroup","group","debugGroupEnd","groupEnd","assert","condition","AssertionError","getRenderingRootForElement","element","parentElement","metadata","getRenderingRootMetadata","isNotTable","includes","tagName","isPositioned","isContentClipped","root","computedStyles","getComputedStyle","getPropertyValue","split","some","getTotalScrollOffset","node","offsetParent","scrollTop","scrollLeft","currentNode","isSameNode","getElementAncestors","ancestors","parent","push","createTemplateForCustomElement","html","document","createElement","innerHTML","IconName","iconsHTML","Edit","Plus","Spinner","Puzzle","PlusPuzzle","CollapseScheme","KSLIconElement","getTemplateByIconName","iconName","querySelector","HTMLTemplateElement","updateIcon","shadowRoot","iconRef","replaceChild","lastElementChild","remove","getAttribute","_icons","observedAttributes","attributeChangedCallback","_oldValue","newValue","ElementPositionOffset","Colors","Shadows","KSLPositionedElement","arguments","targetRef","position","None","connectedCallback","hasAttribute","disconnectedCallback","attachTo","calculateTopOffset","thisRect","targetRect","TopStart","Top","TopEnd","height","BottomStart","Bottom","BottomEnd","Left","Right","LeftEnd","RightEnd","LeftStart","RightStart","calculateLeftOffset","width","BackgroundDefault","Default","TextDefault","KSLPopUpElement","adjustPosition","getBoundingClientRect","parentRect","isOffsetToBody","body","isOffsetToTarget","topOffset","leftOffset","thisTop","thisLeft","scrollOffsetTop","scrollOffsetLeft","pageYOffset","left","pageXOffset","innerHeight","style","bottom","Math","max","innerWidth","right","_a","visible","addEventListener","capture","removeEventListener","BackgroundSecondary","TextSecondary","KSLTooltipElement","baseTemplate","thisTemplate","KSLCustomElementWithTooltip","tooltipRef","showTooltip","hideTooltip","tooltipMessage","tooltipDisabled","tooltip","innerText","tooltipPosition","ButtonType","Primary","PrimaryHover","BackgroundDefaultDisabled","TextDefaultDisabled","Quinary","BackgroundDefaultHover","BackgroundDefaultSelected","KSLButtonElement","handleClick","event","disabled","preventDefault","stopPropagation","stopImmediatePropagation","buttonRef","loading","Boolean","KSLPopoverElement","InsertPositionPlacement","AddButtonAction","AddButtonElementType","AddButtonPermission","AddButtonPermissionCheckResult","IFrameMessageType","IFrameResponseType","DataAttribute","MetadataAttribute","DisableableFeature","ParserTokenKey","baseParserPattern","LanguageCodename","dataAttributes","ProjectId","itemEditButtonParserPattern","ItemId","componentEditButtonParserPattern","ComponentId","elementEditButtonParserPattern","ElementCodename","optional","baseAddButtonParserPattern","relativeAddButtonParserPattern","Placement","AddButtonInsertPosition","TargetId","fixedAddButtonParserPattern","parseEditButtonDataAttributes","target","pattern","type","HighlightType","Element","ContentComponent","ContentItem","getEditButtonDataAttributesPattern","getHighlightTypeForElement","parsed","parseDataAttributes","assign","projectId","languageCodename","itemId","has","contentComponentId","elementCodename","parseAddButtonDataAttributes","End","Start","After","Before","getAddButtonDataAttributesPattern","insertPosition","getAddButtonInsertPosition","placement","targetId","startFrom","Map","takenDataAttributes","Set","token","dataAttribute","findDataAttribute","currentTokenIndex","indexOf","tokensWithHigherPriority","slice","length","areSomeTokensWithHigherPriorityParsed","delete","set","add","attribute","defaultConfiguration","defaultDataAttributes","undefined","forceWebSpotlightMode","isInsideWebSpotlight","queryParam","ConfigurationManager","update","configuration","defaultLanguageCodename","defaultProjectId","isInsideWebSpotlightPreviewIFrame","getInstance","instance","DisabledHighlightFeatureSelector","DisableFeatures","Highlight","ElementSelector","ContentComponentSelector","ContentItemSelector","ElementsWithAddButtonSelector","AddButton","AllAugmentableElementsSelector","getAugmentableDescendants","querySelectorAll","isElementAugmentable","shouldElementHaveHighlight","shouldElementHaveAddButton","feature","toLowerCase","isFeatureDisabledForElement","PrimaryTransparent","KSLHighlightElement","unregisterTargetNodeListeners","hidden","editButtonRef","getEditButtonTooltip","handleTargetNodeMouseEnter","handleTargetNodeMouseLeave","handleEditButtonClick","KSLContainerElement","offsetParentRect","selected","dispatchEditEvent","targetNode","_boundingClientRect","createHighlightForElement","highlight","createAddButtonForElement","button","KSLAddButtonElement","clientHeight","clientWidth","offsetTop","offsetLeft","shouldRecompute","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","result","done","then","apply","ContentIsPublishedTooltip","DefaultTooltipMessage","PopoverButtonId","popoverRef","verticalOffset","horizontalOffset","response","permissions","isUserMissingPermissions","ViewParent","Ok","areComponentsForbidden","CreateNew","RteWithForbiddenComponents","showPopover","handleClickOutside","contains","hidePopover","popover","elementType","isParentPublished","canUserCreateLinkedItem","InsertLinkedItem","CreateLinkedItem","getCreateLinkedItemTooltip","LinkedItems","CreateComponent","RichText","getPopoverHtml","popoverParent","addPopoverEventListeners","removePopoverEventListeners","createComponentButtonRef","createLinkedItemButtonRef","insertLinkedItemButtonRef","handleCreateComponentClick","handleCreateLinkedItemClick","handleInsertLinkedItemClick","handleAddActionClick","action","_b","AddButtonRenderPosition","offset","webComponents","webComponentTags","component","isElementWebComponent","SmartLinkRenderer","render","visibleElements","observedElements","size","clear","newAddButtonByElement","newHighlightByElement","elementsByRenderingRoot","results","prev","groupElementsByRenderingRoot","entries","container","createContainerIfNotExist","offsetHeight","highlightByElement","addButtonByElement","addButton","containerByRenderingRoot","children","destroy","defaultContainer","createAndMountDefaultContainer","logErrors","errors","forEach","validateContentItemClickEditMessageData","validateAddInitialMessageData","buildItemLink","buildKontentLink","componentElementCodename","buildElementLink","NodeSmartLinkProvider","iframeCommunicator","enabled","renderingTimeoutId","toggle","force","enable","disable","startRenderingInterval","listenToGlobalEvents","observeDomMutations","stopRenderingInterval","unlistenToGlobalEvents","disconnectObservers","renderer","augmentVisibleElements","requestAnimationFrame","passive","onAddInitialClick","onAddActionClick","onEditElement","mutationObserver","observe","childList","subtree","observeElementVisibility","disconnect","intersectionObserver","unobserveElementVisibility","unobserve","onDomMutation","mutations","relevantMutations","filter","mutation","isTypeRelevant","isTargetRelevant","hasRelevantAddedNodes","Array","from","addedNodes","hasRelevantRemovedNodes","removedNodes","onElementVisibilityChange","filteredEntries","entry","isIntersecting","configurationManager","messageData","messageMetadata","elementRect","validateElementClickMessageData","sendMessage","ElementClicked","link","open","validateContentComponentClickMessageData","ContentComponentClicked","ContentItemClicked","sendMessageWithResponse","AddInitial","Unknown","validateAddActionMessageData","AddAction","MutationObserver","IntersectionObserver","LocalStorageNotAvailable","EventManager","listeners","on","listener","newListeners","off","emit","callback","removeAllListeners","hasEventListener","IFrameCommunicator","events","callbacks","addMessageListener","removeMessageListener","requestId","crypto","getRandomValues","Uint32Array","registerCallback","postMessage","onMessage","executeCallback","initialize","QueryParamPresenceWatcher","previousValue","timers","watch","onChange","timerId","isPresent","isQueryParamPresent","newTimerId","WatchTimeoutMs","unwatchAll","RegExp","test","location","search","reload","KontentSmartLinkEvent","KontentSmartLinkSDK","allDefined","webComponent","all","defineAllRequiredWebComponents","queryParamPresenceWatcher","nodeSmartLinkProvider","initializeIFrameCommunication","updateConfiguration","handler","settings","getSettingsStorage","supportedFeatures","refreshHandler","Initialized","Status","handleStatusMessage","RefreshPreview","handleRefreshMessage","Refresh","localStorage","getItem","JSON","parse","json","stringify","setItem","removeItem","KontentSmartLink","sdk","setConfiguration","initializeOnLoad","_ref","useEffect","kontentSmartLink","StaticQuery","query","sitePlugin","pluginOptions","languageCodenames","_React$Component","DefaultLayout","_this","call","state","isMenuVisible","handleToggleMenu","bind","_inheritsLoose","_proto","prototype","componentDidMount","setState","componentWillUnmount","ogImageWidth","SmartLinkWrapper","headerData","footerData","otherData","imageUrl","image","Header","Helmet","meta","property","meta_description","keywords","keyword","join","site_url","htmlAttributes","lang","Footer","Menu","HASH_UNDEFINED","funcTag","genTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reEscapeChar","reIsHostCtor","freeGlobal","freeSelf","Function","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","exec","keys","IE_PROTO","funcToString","hasOwnProperty","objectToString","reIsNative","Symbol","splice","getNative","nativeCreate","symbolProto","symbolToString","Hash","index","ListCache","MapCache","assocIndexOf","array","other","baseGet","object","path","isArray","isSymbol","isKey","stringToPath","toKey","baseIsNative","isObject","func","tag","isFunction","isHostObject","toSource","getMapData","__data__","getValue","pop","memoize","string","baseToString","match","number","quote","resolver","TypeError","memoized","cache","Cache","isObjectLike","module","exports","defaultValue","hasElementType","hasMap","hasSet","hasArrayBuffer","ArrayBuffer","isView","equal","a","b","i","it","source","flags","valueOf","$$typeof","clock","Component","_class","_temp","ATTRIBUTE_NAMES","TAG_NAMES","BASE","BODY","HEAD","HTML","LINK","META","NOSCRIPT","SCRIPT","STYLE","TITLE","TAG_PROPERTIES","REACT_TAG_MAP","accesskey","charset","class","contenteditable","contextmenu","itemprop","tabindex","HELMET_PROPS","HTML_TAG_MAP","reduce","obj","SELF_CLOSING_TAGS","HELMET_ATTRIBUTE","_typeof","iterator","createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_extends","objectWithoutProperties","encodeSpecialCharacters","str","String","getTitleFromPropsList","propsList","innermostTitle","getInnermostProperty","innermostTemplate","innermostDefaultTitle","getOnChangeClientState","getAttributesFromPropsList","tagType","tagAttrs","current","getBaseTagFromPropsList","primaryAttributes","reverse","innermostBaseTag","lowerCaseAttributeKey","concat","getTagsFromPropsList","approvedSeenTags","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","attributeKey","tagUnion","rafPolyfill","Date","now","currentTime","cafPolyfill","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","msg","_helmetCallback","commitTagChanges","newState","cb","baseTag","bodyAttributes","linkTags","metaTags","noscriptTags","onChangeClientState","scriptTags","styleTags","titleAttributes","updateAttributes","updateTitle","tagUpdates","updateTags","addedTags","removedTags","_tagUpdates$tagType","newTags","oldTags","flattenArray","possibleArray","attributes","elementTag","getElementsByTagName","helmetAttributeString","helmetAttributes","attributesToRemove","attributeKeys","indexToSave","_i","tags","headElement","head","tagNodes","indexToDelete","newElement","styleSheet","cssText","createTextNode","existingTag","isEqualNode","parentNode","removeChild","generateElementAttributesAsString","attr","convertElementAttributestoReactProps","initProps","getMethodsForTag","encode","toComponent","_initProps","attributeString","flattenedTitle","generateTitleAsString","_mappedTag","mappedTag","mappedAttribute","generateTagsAsReactComponent","attributeHtml","tagContent","isSelfClosing","generateTagsAsString","mapStateOnServer","_ref$title","base","noscript","script","HelmetSideEffects","defer","HelmetExport","HelmetWrapper","classCallCheck","ReferenceError","possibleConstructorReturn","subClass","superClass","create","setPrototypeOf","__proto__","inherits","shouldComponentUpdate","nextProps","mapNestedChildrenToProps","child","nestedChildren","flattenArrayTypeChildren","_babelHelpers$extends","arrayTypeChildren","newChildProps","mapObjectTypeChildren","_ref2","_babelHelpers$extends2","_babelHelpers$extends3","newProps","mapArrayTypeChildrenToProps","newFlattenedProps","arrayChildName","_babelHelpers$extends4","warnOnInvalidChildren","mapChildrenToProps","_this2","_child$props","initAttributes","convertReactPropstoHtmlAttributes","_props","canUseDOM","propTypes","defaultTitle","titleTemplate","defaultProps","peek","rewind","mappedState","renderStatic","ex","React__default","_defineProperty","reducePropsToState","handleStateChangeOnClient","WrappedComponent","mountedInstances","emitChange","SideEffect","_PureComponent","recordedState","UNSAFE_componentWillMount","componentDidUpdate","PureComponent","displayName","getDisplayName"],"sourceRoot":""}